---
title: O que são extensões de mensagens?
author: clearab
description: Uma visão geral das extensões de mensagens na plataforma do Microsoft Teams
ms.topic: overview
ms.author: anclear
ms.openlocfilehash: 2a9fcdbcdda6bb85b6f5edc21253d05327ca5157
ms.sourcegitcommit: 61edf47c9dd1dbc1df03d0d9fb83bfedca4c423b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/28/2020
ms.locfileid: "43914599"
---
# <a name="what-are-messaging-extensions"></a><span data-ttu-id="26878-103">O que são extensões de mensagens?</span><span class="sxs-lookup"><span data-stu-id="26878-103">What are messaging extensions?</span></span>

<span data-ttu-id="26878-104">As extensões de mensagens permitem que os usuários interajam com o serviço Web por meio de botões e formulários no cliente do Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="26878-104">Messaging extensions allow users to interact with your web service through buttons and forms in the Microsoft Teams client.</span></span> <span data-ttu-id="26878-105">Eles podem pesquisar ou iniciar ações em um sistema externo a partir da área de mensagem de redação, da caixa de comando ou diretamente de uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="26878-105">They can search, or initiate actions, in an external system from the compose message area, the command box, or directly from a message.</span></span> <span data-ttu-id="26878-106">Em seguida, você pode enviar os resultados dessa interação de volta para o cliente do Microsoft Teams, geralmente na forma de um cartão com formato avançado.</span><span class="sxs-lookup"><span data-stu-id="26878-106">You can then send the results of that interaction back to the Microsoft Teams client, typically in the form of a richly formatted card.</span></span>

<span data-ttu-id="26878-107">A captura de tela a seguir mostra os locais onde as extensões de mensagens podem ser chamadas.</span><span class="sxs-lookup"><span data-stu-id="26878-107">The screenshot below shows the locations where messaging extensions can be invoked from.</span></span>

![locais de chamadas de extensões de mensagens](~/assets/images/messaging-extension-invoke-locations.png)

## <a name="what-kinds-of-tasks-are-they-good-for"></a><span data-ttu-id="26878-109">De que tipos de tarefas eles são bons?</span><span class="sxs-lookup"><span data-stu-id="26878-109">What kinds of tasks are they good for?</span></span>

<span data-ttu-id="26878-110">**Cenário:** Preciso de algum sistema externo para fazer algo e desejo que o resultado da ação seja enviado de volta para minha conversa. </span><span class="sxs-lookup"><span data-stu-id="26878-110">**Scenario:** I need some external system to do something and I want the result of the action to be sent back to my conversation.</span></span>\
<span data-ttu-id="26878-111">**Exemplo:** Reservar um recurso e permitir que o canal saiba que dia/hora você o reservou.</span><span class="sxs-lookup"><span data-stu-id="26878-111">**Example:** Reserve a resource and let the channel know what day/time you reserved it for.</span></span>

<span data-ttu-id="26878-112">**Cenário:** Preciso localizar algo em um sistema externo e quero compartilhar os resultados com minha conversa. </span><span class="sxs-lookup"><span data-stu-id="26878-112">**Scenario:** I need to find something in an external system, and I want to share the results with my conversation.</span></span>\
<span data-ttu-id="26878-113">**Exemplo:**  Procure um item de trabalho no DevOps do Azure e compartilhe-o com o grupo como um cartão adaptável.</span><span class="sxs-lookup"><span data-stu-id="26878-113">**Example:**  Search for a work item in Azure DevOps, and share it with the group as an adaptive card.</span></span>

<span data-ttu-id="26878-114">**Cenário:** Preciso concluir uma tarefa complexa que envolve várias etapas (ou muitas informações) em um sistema externo, e os resultados devem ser compartilhados com uma conversa. </span><span class="sxs-lookup"><span data-stu-id="26878-114">**Scenario:** I need to complete a complex task involving multiple steps (or lots of information) in an external system, and the results should be shared with a conversation.</span></span>\
<span data-ttu-id="26878-115">**Exemplo:** Crie um bug no sistema de controle com base em uma mensagem do Teams, atribua esse bug a Bob e, em seguida, envie um cartão para o thread de conversa com os detalhes do bug.</span><span class="sxs-lookup"><span data-stu-id="26878-115">**Example:** Create a bug in your tracking system based on a Teams message, assign that bug to Bob, then send a card to the conversation thread with the bug's details.</span></span>

## <a name="how-do-messaging-extensions-work"></a><span data-ttu-id="26878-116">Como funcionam as extensões de mensagens?</span><span class="sxs-lookup"><span data-stu-id="26878-116">How do messaging extensions work?</span></span>

<span data-ttu-id="26878-117">Uma extensão de mensagens consiste em um serviço Web que você hospeda e seu manifesto de aplicativo, que define onde seu serviço Web pode ser chamado no cliente Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="26878-117">A messaging extension consists of a web service you host and your app manifest which defines where your web service can be invoked from in the Microsoft Teams client.</span></span> <span data-ttu-id="26878-118">Eles aproveitam o esquema de mensagens e o protocolo de comunicação segura da estrutura de bot, portanto, você também precisará registrar seu serviço Web como um bot na estrutura do bot.</span><span class="sxs-lookup"><span data-stu-id="26878-118">They take advantage of the Bot Framework's messaging schema and secure communication protocol, so you'll also need to register your web service as a bot in the Bot Framework.</span></span> <span data-ttu-id="26878-119">Embora você possa criar seu serviço Web completamente à mão, recomendamos que você aproveite o [SDK da estrutura de bot](https://github.com/microsoft/botframework) para tornar o trabalho com o protocolo mais simples.</span><span class="sxs-lookup"><span data-stu-id="26878-119">Although you can create your web service completely by hand, we recommend you take advantage of the [Bot Framework SDK](https://github.com/microsoft/botframework) to make working with the protocol simpler.</span></span>

<span data-ttu-id="26878-120">No manifesto do aplicativo para seu aplicativo do Microsoft Teams, você definirá uma única extensão de mensagens com até dez comandos diferentes.</span><span class="sxs-lookup"><span data-stu-id="26878-120">In the app manifest for your Microsoft Teams app you'll define a single messaging extension with up to ten different commands.</span></span> <span data-ttu-id="26878-121">Cada comando define um tipo (ação ou pesquisa), e os locais no cliente podem ser invocados de (área de mensagem de composição, barra de comandos e/ou mensagem).</span><span class="sxs-lookup"><span data-stu-id="26878-121">Each command defines a type (action or search), and the locations in the client it can be invoked from (compose message area, command bar, and/or message).</span></span> <span data-ttu-id="26878-122">Depois de invocado, seu serviço Web receberá uma mensagem HTTPS com uma carga JSON, incluindo todas as informações relevantes.</span><span class="sxs-lookup"><span data-stu-id="26878-122">Once invoked, your web service will receive an HTTPS message with a JSON payload including all the relevant information.</span></span> <span data-ttu-id="26878-123">Você responderá com uma carga JSON, permitindo que o cliente do teams saiba qual interação habilitará a seguir.</span><span class="sxs-lookup"><span data-stu-id="26878-123">You'll respond with a JSON payload, letting the Teams client know what interaction to enable next.</span></span>

## <a name="types-of-messaging-extension-commands"></a><span data-ttu-id="26878-124">Tipos de comandos de extensão de mensagens</span><span class="sxs-lookup"><span data-stu-id="26878-124">Types of messaging extension commands</span></span>

<span data-ttu-id="26878-125">O tipo de comando de extensão de mensagens define os elementos da interface do usuário e os fluxos de interação disponíveis para o serviço Web.</span><span class="sxs-lookup"><span data-stu-id="26878-125">The type of messaging extension command defines the UI elements and interaction flows available to your web service.</span></span> <span data-ttu-id="26878-126">Algumas interações, como autenticação e configuração, estão disponíveis para ambos os tipos de comandos.</span><span class="sxs-lookup"><span data-stu-id="26878-126">Some interactions, like authentication and configuration, are available for both types of commands.</span></span>

### <a name="action-commands"></a><span data-ttu-id="26878-127">Comandos de ação</span><span class="sxs-lookup"><span data-stu-id="26878-127">Action commands</span></span>

<span data-ttu-id="26878-128">Os comandos de ação permitem que você apresente aos usuários um pop-up modal para coletar ou exibir informações.</span><span class="sxs-lookup"><span data-stu-id="26878-128">Action commands allow you to present your users with a modal popup to collect or display information.</span></span> <span data-ttu-id="26878-129">Ao enviar o formulário, seu serviço Web pode responder inserindo uma mensagem na conversa diretamente ou inserindo uma mensagem na área de mensagem de redação e permitindo que o usuário envie a mensagem.</span><span class="sxs-lookup"><span data-stu-id="26878-129">When they submit the form, your web service can respond by inserting a message into the conversation directly, or by inserting a message into the compose message area and allowing the user to submit the message.</span></span> <span data-ttu-id="26878-130">Você pode até encadear vários formulários juntos para fluxos de trabalho mais complexos.</span><span class="sxs-lookup"><span data-stu-id="26878-130">You can even chain multiple forms together for more complex workflows.</span></span>

<span data-ttu-id="26878-131">Eles podem ser disparados da área de mensagem de redação, da caixa de comando ou de uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="26878-131">They can be triggered from the compose message area, the command box, or from a message.</span></span> <span data-ttu-id="26878-132">Quando invocado de uma mensagem, a carga JSON inicial enviada ao bot inclui a mensagem inteira de onde foi invocado.</span><span class="sxs-lookup"><span data-stu-id="26878-132">When invoked from a message, the initial JSON payload sent to your bot will include the entire message it was invoked from.</span></span>

![módulo de tarefa de comando de ação de extensão de mensagens](~/assets/images/task-module.png)

### <a name="search-commands"></a><span data-ttu-id="26878-134">Comandos de pesquisa</span><span class="sxs-lookup"><span data-stu-id="26878-134">Search commands</span></span>

<span data-ttu-id="26878-135">Os comandos de pesquisa permitem que os usuários pesquisem em um sistema externo informações (manualmente por meio de uma caixa de pesquisa ou colando um link para um domínio monitorado na área de mensagem de composição) e, em seguida, insiram os resultados da pesquisa em uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="26878-135">Search commands allow your users to search an external system for information (either manually through a search box, or by pasting a link to a monitored domain into the compose message area), then insert the results of the search into a message.</span></span> <span data-ttu-id="26878-136">No fluxo de comando de pesquisa mais básico, a mensagem de chamada inicial incluirá a cadeia de caracteres de pesquisa que o usuário enviou.</span><span class="sxs-lookup"><span data-stu-id="26878-136">In the most basic search command flow, the initial invoke message will include the search string the user submitted.</span></span> <span data-ttu-id="26878-137">Você responderá com uma lista de cartões e visualizações de cartões.</span><span class="sxs-lookup"><span data-stu-id="26878-137">You'll respond with a list of cards and card previews.</span></span> <span data-ttu-id="26878-138">O cliente Teams processará as visualizações de cartões em uma lista para que o usuário final selecione.</span><span class="sxs-lookup"><span data-stu-id="26878-138">The Teams client will render the card previews in a list for the end user to select from.</span></span> <span data-ttu-id="26878-139">Quando o usuário seleciona um cartão, o cartão de tamanho completo será inserido na área de mensagem de composição.</span><span class="sxs-lookup"><span data-stu-id="26878-139">When the user selects a card, the full-size card will be inserted into the compose message area.</span></span>

<span data-ttu-id="26878-140">Eles podem ser disparados da área de mensagem de redação ou da caixa de comando.</span><span class="sxs-lookup"><span data-stu-id="26878-140">They can be triggered from the compose message area or the command box.</span></span> <span data-ttu-id="26878-141">Diferentemente dos comandos de ação, eles não podem ser disparados a partir de uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="26878-141">Unlike action commands, they cannot be triggered from a message.</span></span>

![comando de pesquisa de extensão de mensagens](~/assets/images/search-extension.png)

### <a name="link-unfurling"></a><span data-ttu-id="26878-143">Desenrolamento de link</span><span class="sxs-lookup"><span data-stu-id="26878-143">Link unfurling</span></span>

<span data-ttu-id="26878-144">Você também tem a opção de chamar o serviço quando uma URL é colada na área de mensagem de composição.</span><span class="sxs-lookup"><span data-stu-id="26878-144">You also have to option to invoke your service when a URL is pasted in the compose message area.</span></span> <span data-ttu-id="26878-145">Essa funcionalidade, conhecida como **link Unfurling**, permite inscrever-se para receber uma chamada quando as URLs que contêm um determinado domínio são coladas na área de mensagem de composição.</span><span class="sxs-lookup"><span data-stu-id="26878-145">This functionality, known as **link unfurling**, allows you to subscribe to receive an invoke when URLs containing a particular domain are pasted into the compose message area.</span></span> <span data-ttu-id="26878-146">O serviço Web pode "unfurl" a URL em um cartão detalhado, fornecendo mais informações do que o cartão de visualização de site padrão.</span><span class="sxs-lookup"><span data-stu-id="26878-146">Your web service can "unfurl" the URL into a detailed card, providing more information than the standard website preview card.</span></span> <span data-ttu-id="26878-147">Você pode até mesmo adicionar botões para permitir que os usuários executem ações imediatamente sem sair do cliente do Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="26878-147">You can even add buttons to allow your users to immediately take action without leaving the Microsoft Teams client.</span></span>

## <a name="get-started"></a><span data-ttu-id="26878-148">Introdução</span><span class="sxs-lookup"><span data-stu-id="26878-148">Get Started</span></span>

<span data-ttu-id="26878-149">Pronto para começar a criar?</span><span class="sxs-lookup"><span data-stu-id="26878-149">Ready to get started building?</span></span> <span data-ttu-id="26878-150">Experimente um dos nossos QuickStartES:</span><span class="sxs-lookup"><span data-stu-id="26878-150">Try one of our quickstarts:</span></span>

* <span data-ttu-id="26878-151">**C#**</span><span class="sxs-lookup"><span data-stu-id="26878-151">**C#**</span></span>
  * [<span data-ttu-id="26878-152">Extensão de mensagens com comandos baseados em ação</span><span class="sxs-lookup"><span data-stu-id="26878-152">Messaging extension with action-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/51.teams-messaging-extensions-action)
  * [<span data-ttu-id="26878-153">Extensão de mensagens com comandos baseados em pesquisa</span><span class="sxs-lookup"><span data-stu-id="26878-153">Messaging extension with search-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/50.teams-messaging-extensions-search)
* <span data-ttu-id="26878-154">**JavaScript**</span><span class="sxs-lookup"><span data-stu-id="26878-154">**JavaScript**</span></span>
  * [<span data-ttu-id="26878-155">Extensão de mensagens com comandos baseados em ação</span><span class="sxs-lookup"><span data-stu-id="26878-155">Messaging extension with action-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/51.teams-messaging-extensions-action)
  * [<span data-ttu-id="26878-156">Extensão de mensagens com comandos baseados em pesquisa</span><span class="sxs-lookup"><span data-stu-id="26878-156">Messaging extension with search-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/50.teams-messaging-extensions-search)

## <a name="learn-more"></a><span data-ttu-id="26878-157">Saiba mais</span><span class="sxs-lookup"><span data-stu-id="26878-157">Learn more</span></span>

<span data-ttu-id="26878-158">Criar uma extensão de mensagens:</span><span class="sxs-lookup"><span data-stu-id="26878-158">Build a messaging extension:</span></span>

* [<span data-ttu-id="26878-159">Criar uma extensão de mensagens</span><span class="sxs-lookup"><span data-stu-id="26878-159">Create a messaging extension</span></span>](~/messaging-extensions/how-to/create-messaging-extension.md)
* [<span data-ttu-id="26878-160">Comando definir extensão de mensagens de ação</span><span class="sxs-lookup"><span data-stu-id="26878-160">Define action messaging extension command</span></span>](~/messaging-extensions/how-to/action-commands/define-action-command.md)
* [<span data-ttu-id="26878-161">Comando definir extensão de mensagens de pesquisa</span><span class="sxs-lookup"><span data-stu-id="26878-161">Define search messaging extension command</span></span>](~/messaging-extensions/how-to/search-commands/define-search-command.md)
