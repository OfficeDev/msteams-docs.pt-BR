---
title: Extensões de mensagens
author: clearab
description: Uma visão geral das extensões de mensagens na plataforma do Microsoft Teams
localization_priority: Normal
ms.topic: overview
ms.author: anclear
ms.openlocfilehash: fcd5661a2e0b601579fc5af843935d64ab487cef
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020692"
---
# <a name="messaging-extensions"></a><span data-ttu-id="656e2-103">Extensões de mensagens</span><span class="sxs-lookup"><span data-stu-id="656e2-103">Messaging extensions</span></span>

<span data-ttu-id="656e2-104">As extensões de mensagens permitem que os usuários interajam com seu serviço Web por meio de botões e formulários no cliente do Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="656e2-104">Messaging extensions allow the users to interact with your web service through buttons and forms in the Microsoft Teams client.</span></span> <span data-ttu-id="656e2-105">Eles podem pesquisar ou iniciar ações em um sistema externo a partir da área de mensagem de composição, da caixa de comando ou diretamente de uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="656e2-105">They can search or initiate actions in an external system from the compose message area, the command box, or directly from a message.</span></span> <span data-ttu-id="656e2-106">Você pode enviar de volta os resultados dessa interação para o cliente do Microsoft Teams na forma de um cartão ricamente formatado.</span><span class="sxs-lookup"><span data-stu-id="656e2-106">You can send back the results of that interaction to the Microsoft Teams client in the form of a richly formatted card.</span></span> <span data-ttu-id="656e2-107">Este documento fornece uma visão geral da extensão de mensagens, tarefas executadas em diferentes cenários, trabalho de extensão de mensagens, comandos de ação e pesquisa e desfraldamento de link.</span><span class="sxs-lookup"><span data-stu-id="656e2-107">This document gives an overview of the messaging extension, tasks performed under different scenarios, working of messaging extension, action and search commands, and link unfurling.</span></span>

<span data-ttu-id="656e2-108">A imagem a seguir exibe os locais de onde as extensões de mensagens são invocadas:</span><span class="sxs-lookup"><span data-stu-id="656e2-108">The following image displays the locations from where messaging extensions are invoked:</span></span>

![locais de invocação de extensão de mensagens](~/assets/images/messaging-extension-invoke-locations.png)

## <a name="scenarios-where-messaging-extensions-are-used"></a><span data-ttu-id="656e2-110">Cenários em que extensões de mensagens são usadas</span><span class="sxs-lookup"><span data-stu-id="656e2-110">Scenarios where messaging extensions are used</span></span>

| <span data-ttu-id="656e2-111">Cenário</span><span class="sxs-lookup"><span data-stu-id="656e2-111">Scenario</span></span> | <span data-ttu-id="656e2-112">Exemplo</span><span class="sxs-lookup"><span data-stu-id="656e2-112">Example</span></span> |
|:-----------------|:-----------------|
|<span data-ttu-id="656e2-113">Você deseja que algum sistema externo faça uma ação e o resultado da ação seja enviado de volta para sua conversa.</span><span class="sxs-lookup"><span data-stu-id="656e2-113">You want some external system to do an action  and the result of the action to be sent back to your conversation.</span></span>|<span data-ttu-id="656e2-114">Reserve um recurso e permita que o canal saiba o intervalo de tempo reservado.</span><span class="sxs-lookup"><span data-stu-id="656e2-114">Reserve a resource and allow the channel to know the reserved time slot.</span></span>|
|<span data-ttu-id="656e2-115">Você deseja encontrar algo em um sistema externo e compartilhar os resultados com a conversa.</span><span class="sxs-lookup"><span data-stu-id="656e2-115">You want to find something in an external system, and share the results with the conversation.</span></span>|<span data-ttu-id="656e2-116">Pesquise um item de trabalho no Azure DevOps e compartilhe-o com o grupo como um Cartão Adaptável.</span><span class="sxs-lookup"><span data-stu-id="656e2-116">Search for a work item in Azure DevOps, and share it with the group as an Adaptive Card.</span></span>|
|<span data-ttu-id="656e2-117">Você deseja concluir uma tarefa complexa envolvendo várias etapas ou muitas informações em um sistema externo e compartilhar os resultados com uma conversa.</span><span class="sxs-lookup"><span data-stu-id="656e2-117">You want to complete a complex task involving multiple steps or lots of information in an external system, and share the results with a conversation.</span></span>|<span data-ttu-id="656e2-118">Crie um bug em seu sistema de controle com base em uma mensagem do Teams, atribua esse bug a Bob e envie um cartão para o thread de conversa com os detalhes do bug.</span><span class="sxs-lookup"><span data-stu-id="656e2-118">Create a bug in your tracking system based on a Teams message, assign that bug to Bob, and send a card to the conversation thread with the bug's details.</span></span>|

## <a name="understand-how-messaging-extensions-work"></a><span data-ttu-id="656e2-119">Entender como funcionam as extensões de mensagens</span><span class="sxs-lookup"><span data-stu-id="656e2-119">Understand how messaging extensions work</span></span>

<span data-ttu-id="656e2-120">Uma extensão de mensagens consiste em um serviço Web que você hospeda e um manifesto de aplicativo, que define de onde seu serviço Web é invocado no cliente do Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="656e2-120">A messaging extension consists of a web service that you host and an app manifest, which defines where your web service is invoked from in the Microsoft Teams client.</span></span> <span data-ttu-id="656e2-121">O serviço Web aproveita o esquema de mensagens da Estrutura de Bot e o protocolo de comunicação segura, portanto, você deve registrar seu serviço Web como um bot na Estrutura de Bots.</span><span class="sxs-lookup"><span data-stu-id="656e2-121">The web service takes advantage of the Bot Framework's messaging schema and secure communication protocol, so you must register your web service as a bot in the Bot Framework.</span></span> 

> [!NOTE]
> <span data-ttu-id="656e2-122">Embora você possa criar o serviço Web manualmente, use [o SDK da Estrutura de Bots](https://github.com/microsoft/botframework) para trabalhar com o protocolo.</span><span class="sxs-lookup"><span data-stu-id="656e2-122">Though you can create the web service manually, use [Bot Framework SDK](https://github.com/microsoft/botframework) to work with the protocol.</span></span>

<span data-ttu-id="656e2-123">No manifesto do aplicativo do Microsoft Teams, uma única extensão de mensagens é definida com até dez comandos diferentes.</span><span class="sxs-lookup"><span data-stu-id="656e2-123">In the app manifest for Microsoft Teams app, a single messaging extension is defined with up to ten different commands.</span></span> <span data-ttu-id="656e2-124">Cada comando define um tipo, como ação ou pesquisa e os locais no cliente de onde ele é invocado.</span><span class="sxs-lookup"><span data-stu-id="656e2-124">Each command defines a type, such as action or search and the locations in the client from where it is invoked.</span></span> <span data-ttu-id="656e2-125">Os locais de invocação são área de composição de mensagem, barra de comandos e mensagem.</span><span class="sxs-lookup"><span data-stu-id="656e2-125">The invoke locations are compose message area, command bar, and message.</span></span> <span data-ttu-id="656e2-126">Ao chamar, o serviço Web recebe uma mensagem HTTPS com uma carga JSON, incluindo todas as informações relevantes.</span><span class="sxs-lookup"><span data-stu-id="656e2-126">On invoke, the web service receives an HTTPS message with a JSON payload including all the relevant information.</span></span> <span data-ttu-id="656e2-127">Responda com uma carga JSON, permitindo que o cliente do Teams saiba a próxima interação a ser habilitada.</span><span class="sxs-lookup"><span data-stu-id="656e2-127">Respond with a JSON payload, allowing the Teams client to know the next interaction to enable.</span></span> 

## <a name="types-of-messaging-extension-commands"></a><span data-ttu-id="656e2-128">Tipos de comandos de extensão de mensagens</span><span class="sxs-lookup"><span data-stu-id="656e2-128">Types of messaging extension commands</span></span>

<span data-ttu-id="656e2-129">Há dois tipos de comandos de extensão de mensagens, comando de ação e comando de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="656e2-129">There are two types of messaging extension commands, action command and search command.</span></span> <span data-ttu-id="656e2-130">O tipo de comando de extensão de mensagens define os elementos da interface do usuário e os fluxos de interação disponíveis para seu serviço Web.</span><span class="sxs-lookup"><span data-stu-id="656e2-130">The messaging extension command type defines the UI elements and interaction flows available to your web service.</span></span> <span data-ttu-id="656e2-131">Algumas interações, como autenticação e configuração, estão disponíveis para ambos os tipos de comandos.</span><span class="sxs-lookup"><span data-stu-id="656e2-131">Some interactions, such as authentication and configuration are available for both types of commands.</span></span>

### <a name="action-commands"></a><span data-ttu-id="656e2-132">Comandos de ação</span><span class="sxs-lookup"><span data-stu-id="656e2-132">Action commands</span></span>

<span data-ttu-id="656e2-133">Comandos de ação são usados para apresentar aos usuários um pop-up modal para coletar ou exibir informações.</span><span class="sxs-lookup"><span data-stu-id="656e2-133">Action commands are used to present the users with a modal popup to collect or display information.</span></span> <span data-ttu-id="656e2-134">Quando o usuário envia o formulário, o serviço Web responde inserindo uma mensagem diretamente na conversa ou inserindo uma mensagem na área de mensagem de redação.</span><span class="sxs-lookup"><span data-stu-id="656e2-134">When the user submits the form, your web service responds by inserting a message into the conversation directly or by inserting a message into the compose message area.</span></span> <span data-ttu-id="656e2-135">Depois disso, o usuário pode enviar a mensagem.</span><span class="sxs-lookup"><span data-stu-id="656e2-135">After that the user can submit the message.</span></span> <span data-ttu-id="656e2-136">Você pode encadeá-los para fluxos de trabalho mais complexos.</span><span class="sxs-lookup"><span data-stu-id="656e2-136">You can chain multiple forms together for more complex workflows.</span></span>

<span data-ttu-id="656e2-137">Os comandos de ação são disparados da área de mensagem de composição, da caixa de comando ou de uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="656e2-137">The action commands are triggered from the compose message area, the command box, or from a message.</span></span> <span data-ttu-id="656e2-138">Quando o comando é invocado de uma mensagem, a carga JSON inicial enviada para o bot inclui a mensagem inteira de que ele foi invocado.</span><span class="sxs-lookup"><span data-stu-id="656e2-138">When the command is invoked from a message, the initial JSON payload sent to your bot includes the entire message it was invoked from.</span></span> <span data-ttu-id="656e2-139">A imagem a seguir exibe o módulo de tarefa de comando de ação de extensão de mensagens: módulo de tarefa de ação de ![ extensão de mensagens](~/assets/images/task-module.png)</span><span class="sxs-lookup"><span data-stu-id="656e2-139">The following image displays the messaging extension action command task module: ![messaging extension action command task module](~/assets/images/task-module.png)</span></span>

### <a name="search-commands"></a><span data-ttu-id="656e2-140">Comandos de pesquisa</span><span class="sxs-lookup"><span data-stu-id="656e2-140">Search commands</span></span>

<span data-ttu-id="656e2-141">Os comandos de pesquisa permitem que os usuários pesquisem informações em um sistema externo manualmente por meio de uma caixa de pesquisa ou colar um link a um domínio monitorado na área de mensagem de composição e inserir os resultados da pesquisa em uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="656e2-141">Search commands allow the users to search an external system for information either manually through a search box, or by pasting a link to a monitored domain into the compose message area, and insert the results of the search into a message.</span></span> <span data-ttu-id="656e2-142">No fluxo de comando de pesquisa mais básico, a mensagem de invocação inicial inclui a cadeia de caracteres de pesquisa que o usuário enviou.</span><span class="sxs-lookup"><span data-stu-id="656e2-142">In the most basic search command flow, the initial invoke message includes the search string that the user submitted.</span></span> <span data-ttu-id="656e2-143">Você responde com uma lista de visualizações de cartões e cartões.</span><span class="sxs-lookup"><span data-stu-id="656e2-143">You respond with a list of cards and card previews.</span></span> <span data-ttu-id="656e2-144">O cliente do Teams renderiza uma lista de visualizações de cartão para o usuário.</span><span class="sxs-lookup"><span data-stu-id="656e2-144">The Teams client renders a list of card previews for the user.</span></span> <span data-ttu-id="656e2-145">Quando o usuário seleciona um cartão na lista, o cartão de tamanho completo é inserido na área de mensagem de composição.</span><span class="sxs-lookup"><span data-stu-id="656e2-145">When the user selects a card from the list, the full-size card is inserted into the compose message area.</span></span>

<span data-ttu-id="656e2-146">Os cartões são disparados da área de mensagem de redação ou da caixa de comando e não disparados de uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="656e2-146">The cards are triggered from the compose message area or the command box and not triggered from a message.</span></span> <span data-ttu-id="656e2-147">Eles não podem ser disparados de uma mensagem.</span><span class="sxs-lookup"><span data-stu-id="656e2-147">They can not be triggered from a message.</span></span>
<span data-ttu-id="656e2-148">A imagem a seguir exibe o módulo de tarefa de comando de pesquisa de extensão de mensagens:</span><span class="sxs-lookup"><span data-stu-id="656e2-148">The following image displays the messaging extension search command task module:</span></span>

![comando de pesquisa de extensão de mensagens](~/assets/images/search-extension.png)

> [!NOTE]
> <span data-ttu-id="656e2-150">Para obter mais informações sobre cartões, consulte [o que são cartões](../task-modules-and-cards/what-are-cards.md).</span><span class="sxs-lookup"><span data-stu-id="656e2-150">For more information on cards, see [what are cards](../task-modules-and-cards/what-are-cards.md).</span></span>

## <a name="link-unfurling"></a><span data-ttu-id="656e2-151">Desenrolamento de link</span><span class="sxs-lookup"><span data-stu-id="656e2-151">Link unfurling</span></span>

<span data-ttu-id="656e2-152">Um serviço Web é chamado quando uma URL é colar na área de mensagem de redação.</span><span class="sxs-lookup"><span data-stu-id="656e2-152">A web service is invoked when a URL is pasted in the compose message area.</span></span> <span data-ttu-id="656e2-153">Essa funcionalidade é conhecida como desarmamento de link.</span><span class="sxs-lookup"><span data-stu-id="656e2-153">This functionality is known as link unfurling.</span></span> <span data-ttu-id="656e2-154">Você pode se inscrever para receber uma invocação quando URLs que contêm um determinado domínio são colar na área de mensagem de redação.</span><span class="sxs-lookup"><span data-stu-id="656e2-154">You can subscribe to receive an invoke when URLs containing a particular domain are pasted into the compose message area.</span></span> <span data-ttu-id="656e2-155">Seu serviço Web pode "desafraldar" a URL em um cartão detalhado, fornecendo mais informações do que o cartão de visualização do site padrão.</span><span class="sxs-lookup"><span data-stu-id="656e2-155">Your web service can "unfurl" the URL into a detailed card, providing more information than the standard website preview card.</span></span> <span data-ttu-id="656e2-156">Você pode adicionar botões para permitir que os usuários tomem medidas imediatamente sem sair do cliente do Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="656e2-156">You can add buttons to allow the users to immediately take action without leaving the Microsoft Teams client.</span></span>
<span data-ttu-id="656e2-157">As imagens a seguir exibem o recurso de desfralização de link quando um link é passado na extensão de mensagens:</span><span class="sxs-lookup"><span data-stu-id="656e2-157">The following images display link unfurling feature when a link is pasted in messaging extension:</span></span>
 
![link unfurl](../assets/images/messaging-extension/unfurl-link.png)

![link desfraldamento](../assets/images/messaging-extension/link-unfurl.gif)

## <a name="code-sample"></a><span data-ttu-id="656e2-160">Exemplo de código</span><span class="sxs-lookup"><span data-stu-id="656e2-160">Code sample</span></span>

| <span data-ttu-id="656e2-161">**Exemplo de nome**</span><span class="sxs-lookup"><span data-stu-id="656e2-161">**Sample name**</span></span> | <span data-ttu-id="656e2-162">**Descrição**</span><span class="sxs-lookup"><span data-stu-id="656e2-162">**Description**</span></span> | <span data-ttu-id="656e2-163">**.NET**</span><span class="sxs-lookup"><span data-stu-id="656e2-163">**.NET**</span></span> | <span data-ttu-id="656e2-164">**Node.js**</span><span class="sxs-lookup"><span data-stu-id="656e2-164">**Node.js**</span></span> | <span data-ttu-id="656e2-165">**Python**</span><span class="sxs-lookup"><span data-stu-id="656e2-165">**Python**</span></span> |
|------------|-------------|----------------|------------|
| <span data-ttu-id="656e2-166">Extensão de mensagens com comandos baseados em ação</span><span class="sxs-lookup"><span data-stu-id="656e2-166">Messaging extension with action-based commands</span></span> | <span data-ttu-id="656e2-167">Este exemplo ilustra como criar uma extensão de mensagens baseada em ação.</span><span class="sxs-lookup"><span data-stu-id="656e2-167">This sample illustrates how to build an action-based messaging extension.</span></span> | [<span data-ttu-id="656e2-168">View</span><span class="sxs-lookup"><span data-stu-id="656e2-168">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/51.teams-messaging-extensions-action) | [<span data-ttu-id="656e2-169">View</span><span class="sxs-lookup"><span data-stu-id="656e2-169">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/51.teams-messaging-extensions-action) | [<span data-ttu-id="656e2-170">View</span><span class="sxs-lookup"><span data-stu-id="656e2-170">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/51.teams-messaging-extensions-action) |
| <span data-ttu-id="656e2-171">Extensão de mensagens com comandos baseados em pesquisa</span><span class="sxs-lookup"><span data-stu-id="656e2-171">Messaging extension with search-based commands</span></span> | <span data-ttu-id="656e2-172">Este exemplo ilustra como criar uma Extensão de Mensagens baseada em Pesquisa.</span><span class="sxs-lookup"><span data-stu-id="656e2-172">This sample illustrates how to build a Search-based Messaging Extension.</span></span> | [<span data-ttu-id="656e2-173">View</span><span class="sxs-lookup"><span data-stu-id="656e2-173">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/50.teams-messaging-extensions-search) | [<span data-ttu-id="656e2-174">View</span><span class="sxs-lookup"><span data-stu-id="656e2-174">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/50.teams-messaging-extensions-search) | [<span data-ttu-id="656e2-175">View</span><span class="sxs-lookup"><span data-stu-id="656e2-175">View</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/main/samples/python/50.teams-messaging-extension-search) |

## <a name="see-also"></a><span data-ttu-id="656e2-176">Confira também</span><span class="sxs-lookup"><span data-stu-id="656e2-176">See also</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="656e2-177">Criar uma extensão de mensagens</span><span class="sxs-lookup"><span data-stu-id="656e2-177">Create a messaging extension</span></span>](../build-your-first-app/build-messaging-extension.md)


## <a name="next-step"></a><span data-ttu-id="656e2-178">Próxima etapa</span><span class="sxs-lookup"><span data-stu-id="656e2-178">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="656e2-179">Definir comando de extensão de mensagens de ação</span><span class="sxs-lookup"><span data-stu-id="656e2-179">Define action messaging extension command</span></span>](~/messaging-extensions/how-to/action-commands/define-action-command.md)

> [!div class="nextstepaction"]
> [<span data-ttu-id="656e2-180">Definir o comando de extensão de mensagens de pesquisa</span><span class="sxs-lookup"><span data-stu-id="656e2-180">Define search messaging extension command</span></span>](~/messaging-extensions/how-to/search-commands/define-search-command.md)
