---
title: Criar uma extensão de mensagens
author: clearab
description: Como criar uma extensão de mensagens para um aplicativo do Microsoft Teams.
ms.topic: conceptual
ms.author: anclear
ms.openlocfilehash: ca03469b04c9696b26db3512790e03be26ca63af
ms.sourcegitcommit: b01986739a05c65094618fbe76aeb53d038b1c74
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/22/2020
ms.locfileid: "48178306"
---
# <a name="create-a-messaging-extension-in-microsoft-teams"></a><span data-ttu-id="e5945-103">Criar uma extensão de mensagens no Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="e5945-103">Create a messaging extension in Microsoft Teams</span></span>

<span data-ttu-id="e5945-104">Em um nível alto, você precisará concluir as etapas a seguir para criar uma extensão de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e5945-104">At a high level, you'll need to complete the following steps to create a messaging extension.</span></span>

1. <span data-ttu-id="e5945-105">Preparar seu ambiente de desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="e5945-105">Prepare your development environment</span></span>
2. <span data-ttu-id="e5945-106">Criar e implantar seu serviço Web (ao desenvolver o uso de um serviço de encapsulamento como o ngrok para executá-lo localmente)</span><span class="sxs-lookup"><span data-stu-id="e5945-106">Create and deploy your web service (while developing use a tunneling service like ngrok to run it locally)</span></span>
3. <span data-ttu-id="e5945-107">Registrar seu serviço Web com a estrutura bot</span><span class="sxs-lookup"><span data-stu-id="e5945-107">Register your web service with the Bot Framework</span></span>
4. <span data-ttu-id="e5945-108">Criar seu pacote de aplicativos</span><span class="sxs-lookup"><span data-stu-id="e5945-108">Create your app package</span></span>
5. <span data-ttu-id="e5945-109">Carregar um pacote do aplicativo para o Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="e5945-109">Upload your package to Microsoft Teams</span></span>

<span data-ttu-id="e5945-110">A criação do seu serviço Web, a criação do pacote de aplicativos e o registro do serviço Web com a estrutura de bot podem ser feitas em qualquer ordem.</span><span class="sxs-lookup"><span data-stu-id="e5945-110">Creating your web service, creating your app package, and registering your web service with the Bot Framework can be done in any order.</span></span> <span data-ttu-id="e5945-111">Como essas três partes estão desentrelaçadas, não importa a ordem em que você precisará retornar para atualizar as outras.</span><span class="sxs-lookup"><span data-stu-id="e5945-111">Because those three pieces are so intertwined, no matter which order you do them in you'll need return to update the others.</span></span> <span data-ttu-id="e5945-112">Seu registro precisa do ponto de extremidade de mensagens do seu serviço Web implantado e seu serviço Web precisa da ID e senha criadas a partir do seu registro.</span><span class="sxs-lookup"><span data-stu-id="e5945-112">Your registration needs the messaging endpoint from your deployed web service, and your web service needs the Id and password created from your registration.</span></span> <span data-ttu-id="e5945-113">O manifesto do aplicativo também precisa dessa ID para conectar o Microsoft Teams ao seu serviço Web.</span><span class="sxs-lookup"><span data-stu-id="e5945-113">Your app manifest also needs that Id to connect Teams to your web service.</span></span>

<span data-ttu-id="e5945-114">À medida que você está criando sua extensão de mensagens, você vai migrar regularmente entre alterar o manifesto do aplicativo e implantar o código no seu serviço Web.</span><span class="sxs-lookup"><span data-stu-id="e5945-114">As you're building your messaging extension, you'll regularly be moving between changing your app manifest, and deploying code to your web service.</span></span> <span data-ttu-id="e5945-115">Ao trabalhar com o manifesto do aplicativo, tenha em mente que você pode manipular manualmente o arquivo JSON ou fazer alterações através do App Studio.</span><span class="sxs-lookup"><span data-stu-id="e5945-115">When working with the app manifest, keep in mind that you can either manually manipulate the JSON file, or make changes through App Studio.</span></span> <span data-ttu-id="e5945-116">De qualquer forma, você precisará implantar (carregar) seu aplicativo no Teams quando fizer uma alteração no manifesto, mas não é necessário fazê-lo ao implantar as alterações no serviço Web.</span><span class="sxs-lookup"><span data-stu-id="e5945-116">Either way, you'll need to re-deploy (upload) your app in Teams when you make a change to the manifest, but there's no need to do so when you deploy changes to your web service.</span></span>

[!include[prepare environment](~/includes/prepare-environment.md)]

## <a name="create-your-web-service"></a><span data-ttu-id="e5945-117">Criar seu serviço Web</span><span class="sxs-lookup"><span data-stu-id="e5945-117">Create your web service</span></span>

<span data-ttu-id="e5945-118">O coração de sua extensão de mensagens é seu serviço Web.</span><span class="sxs-lookup"><span data-stu-id="e5945-118">The heart of your messaging extension is your web service.</span></span> <span data-ttu-id="e5945-119">Ele definirá uma única rota, geralmente `/api/messages` , para receber todas as solicitações.</span><span class="sxs-lookup"><span data-stu-id="e5945-119">It will define a single route, typically `/api/messages`, to receive all requests on.</span></span> <span data-ttu-id="e5945-120">Se você estiver começando a partir do zero, terá algumas opções para escolher.</span><span class="sxs-lookup"><span data-stu-id="e5945-120">If you're getting started from scratch, you have a few options to choose from.</span></span>

* <span data-ttu-id="e5945-121">Use um de nossos tutoriais de [QuickStartES](#learn-more) que orientarão você durante a criação do seu serviço Web.</span><span class="sxs-lookup"><span data-stu-id="e5945-121">Use one of our [quickstarts](#learn-more) tutorials that will guide you through the creation of your web service.</span></span>
* <span data-ttu-id="e5945-122">Escolha uma das amostras de extensão de mensagens disponíveis no [repositório de exemplo da estrutura de bot](https://github.com/Microsoft/BotBuilder-Samples) para começar.</span><span class="sxs-lookup"><span data-stu-id="e5945-122">Choose one of the messaging extension samples available in the [Bot Framework sample repository](https://github.com/Microsoft/BotBuilder-Samples) to start from.</span></span>
* <span data-ttu-id="e5945-123">Se você estiver usando o JavaScript, use o [gerador Yeoman para o Microsoft Teams](https://github.com/OfficeDev/generator-teams) para estruturar seu aplicativo do Teams, incluindo o serviço Web.</span><span class="sxs-lookup"><span data-stu-id="e5945-123">If you're using JavaScript, use the [Yeoman generator for Microsoft Teams](https://github.com/OfficeDev/generator-teams) to scaffold your Teams app, including your web service.</span></span>
* <span data-ttu-id="e5945-124">Criar seu serviço Web a partir do zero.</span><span class="sxs-lookup"><span data-stu-id="e5945-124">Create your web service from scratch.</span></span> <span data-ttu-id="e5945-125">Você pode optar por adicionar o SDK do verificador de bot para o seu idioma ou trabalhar diretamente com as cargas JSON.</span><span class="sxs-lookup"><span data-stu-id="e5945-125">You can choose to add the Bot Framework SDK for your language, or you can work directly with the JSON payloads.</span></span>

## <a name="register-your-web-service-with-the-bot-framework"></a><span data-ttu-id="e5945-126">Registrar seu serviço Web com a estrutura bot</span><span class="sxs-lookup"><span data-stu-id="e5945-126">Register your web service with the Bot Framework</span></span>

<span data-ttu-id="e5945-127">As extensões de mensagens aproveitam o esquema de mensagens da estrutura de bot e o protocolo de comunicação seguro; Se você ainda não tiver um, você precisará registrar seu serviço Web na estrutura de bot.</span><span class="sxs-lookup"><span data-stu-id="e5945-127">Messaging extensions take advantage of the Bot Framework's messaging schema and secure communication protocol; if you don't already have one you'll need to register your web service on the Bot Framework.</span></span> <span data-ttu-id="e5945-128">A ID do aplicativo da Microsoft (vamos nos referir a isso como o seu ID de bot de dentro do teams para identificá-lo a partir de outras IDs de aplicativos que você pode estar trabalhando) e o ponto de extremidade de mensagens que seu registrador com a estrutura de bot será usado em sua extensão de mensagens para receber e responder a solicitações.</span><span class="sxs-lookup"><span data-stu-id="e5945-128">The Microsoft App Id (we'll refer to this as your Bot Id from inside of Teams, to identify it from other App Id's you might be working with) and the messaging endpoint your register with the Bot Framework will be used in your messaging extension to receive and respond to requests.</span></span> <span data-ttu-id="e5945-129">Se você estiver usando um registro existente, certifique-se [de habilitar o canal do Microsoft Teams](/azure/bot-service/bot-service-manage-channels.md?view=azure-bot-service-4.0&preserve-view=true).</span><span class="sxs-lookup"><span data-stu-id="e5945-129">If you're using an existing registration, make sure you [enable the Microsoft Teams channel](/azure/bot-service/bot-service-manage-channels.md?view=azure-bot-service-4.0&preserve-view=true).</span></span>

<span data-ttu-id="e5945-130">Se você seguir um dos QuickStarts ou iniciar a partir de um dos exemplos disponíveis, será guiado através do registro do seu serviço Web.</span><span class="sxs-lookup"><span data-stu-id="e5945-130">If you follow one of the quickstarts or start from one of the available samples you'll be guided through registering your web service.</span></span> <span data-ttu-id="e5945-131">Se quiser registrar manualmente seu serviço, você terá três opções para fazer isso.</span><span class="sxs-lookup"><span data-stu-id="e5945-131">If you want to manually register your service you have three options to do so.</span></span> <span data-ttu-id="e5945-132">Se você optar por se registrar sem usar uma assinatura do Azure, não será possível aproveitar o fluxo de autenticação OAuth simplificado fornecido pela estrutura do bot.</span><span class="sxs-lookup"><span data-stu-id="e5945-132">If you choose to register without using an Azure subscription you will not be able to take advantage of the simplified OAuth authentication flow provided by the Bot Framework.</span></span> <span data-ttu-id="e5945-133">Você poderá migrar seu registro para o Azure após a criação.</span><span class="sxs-lookup"><span data-stu-id="e5945-133">You will be able to migrate your registration to Azure after creation.</span></span>

* <span data-ttu-id="e5945-134">Se você tiver uma assinatura do Azure (ou quiser criar uma nova), poderá registrar o serviço Web manualmente usando o portal do Azure.</span><span class="sxs-lookup"><span data-stu-id="e5945-134">If you have an Azure subscription (or want to create a new one), you can register your web service manually using the Azure Portal.</span></span> <span data-ttu-id="e5945-135">Crie um recurso "registro de canais de bot".</span><span class="sxs-lookup"><span data-stu-id="e5945-135">Create a "Bot Channels Registration" resource.</span></span> <span data-ttu-id="e5945-136">Você pode escolher a camada de preços gratuita, uma vez que as mensagens do Microsoft Teams não contam com relação ao total de mensagens permitidas por mês.</span><span class="sxs-lookup"><span data-stu-id="e5945-136">You can choose the free pricing tier, as messages from Microsoft Teams do not count towards your total allowable messages per month.</span></span>
* <span data-ttu-id="e5945-137">Se não quiser usar uma assinatura do Azure, você pode usar o portal de [registro herdado](https://dev.botframework.com/bots/new).</span><span class="sxs-lookup"><span data-stu-id="e5945-137">If you do not wish to use an Azure subscription, you can use the [legacy registration portal](https://dev.botframework.com/bots/new).</span></span>
* <span data-ttu-id="e5945-138">O app Studio também pode ajudá-lo a registrar o serviço Web (bot).</span><span class="sxs-lookup"><span data-stu-id="e5945-138">App Studio can also help you register your web service (bot).</span></span> <span data-ttu-id="e5945-139">Os serviços Web registrados por meio do App Studio não são registrados no Azure.</span><span class="sxs-lookup"><span data-stu-id="e5945-139">Web services registered through App Studio are not registered in Azure.</span></span> <span data-ttu-id="e5945-140">Você pode usar o [portal herdado](https://dev.botframework.com/bots) para exibir, gerenciar e migrar seus registros.</span><span class="sxs-lookup"><span data-stu-id="e5945-140">You can use the [legacy portal](https://dev.botframework.com/bots) to view, manage, and migrate your registrations.</span></span>

## <a name="create-your-app-manifest"></a><span data-ttu-id="e5945-141">Criar o manifesto do aplicativo</span><span class="sxs-lookup"><span data-stu-id="e5945-141">Create your app manifest</span></span>

<span data-ttu-id="e5945-142">Você pode usar o aplicativo Studio para ajudá-lo a criar seu manifesto de aplicativo ou a criá-lo manualmente.</span><span class="sxs-lookup"><span data-stu-id="e5945-142">You can either use App Studio to help you create your app manifest, or create it manually.</span></span>

### <a name="create-your-app-manifest-using-app-studio"></a><span data-ttu-id="e5945-143">Criar seu manifesto de aplicativo usando o app Studio</span><span class="sxs-lookup"><span data-stu-id="e5945-143">Create your app manifest using App Studio</span></span>

<span data-ttu-id="e5945-144">Você pode usar o aplicativo App Studio no cliente Microsoft Teams para ajudar a criar seu manifesto de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e5945-144">You can use the App Studio app from within the Microsoft Teams client to help create your app manifest.</span></span>

1. <span data-ttu-id="e5945-145">No cliente do Teams, abra o aplicativo Studio no menu de estouro **...** no trilho de navegação à esquerda.</span><span class="sxs-lookup"><span data-stu-id="e5945-145">In the Teams client, open App Studio from the **...** overflow menu on the left navigation rail.</span></span> <span data-ttu-id="e5945-146">Se ainda não estiver instalado, você pode fazê-lo pesquisando.</span><span class="sxs-lookup"><span data-stu-id="e5945-146">If it isn't already installed, you can do so by searching for it.</span></span>
2. <span data-ttu-id="e5945-147">Na guia **Editor de manifesto** , selecione **criar um novo aplicativo** (ou se você estiver adicionando uma extensão de mensagens a um aplicativo existente, poderá importar seu pacote de aplicativos)</span><span class="sxs-lookup"><span data-stu-id="e5945-147">On the **Manifest editor** tab select **Create a new app** (or if you're adding a messaging extension to an existing app, you can import your app package)</span></span>
3. <span data-ttu-id="e5945-148">Adicione os detalhes do aplicativo (Confira [definição de esquema de manifesto](~/resources/schema/manifest-schema.md) para obter descrições completas de cada campo).</span><span class="sxs-lookup"><span data-stu-id="e5945-148">Add your app details (see [manifest schema definition](~/resources/schema/manifest-schema.md) for full descriptions of each field).</span></span>
4. <span data-ttu-id="e5945-149">Na guia **extensões de mensagens** , clique no botão **Configurar** .</span><span class="sxs-lookup"><span data-stu-id="e5945-149">On the **Messaging extensions** tab click the **Setup** button.</span></span>
5. <span data-ttu-id="e5945-150">Você pode criar um novo serviço Web (bot) para que sua extensão de mensagens seja usada, ou se já tiver registrado um SELECT/Add-lo aqui.</span><span class="sxs-lookup"><span data-stu-id="e5945-150">You can either create a new web service (bot) for your messaging extension to use, or if you've already registered one select/add it here.</span></span>
6. <span data-ttu-id="e5945-151">Se necessário, atualize o endereço do ponto de extremidade do bot para apontar para o seu bot.</span><span class="sxs-lookup"><span data-stu-id="e5945-151">If necessary, update your bot endpoint address to point to your bot.</span></span> <span data-ttu-id="e5945-152">Ela deve ser similar a `https://someplace.com/api/messages`.</span><span class="sxs-lookup"><span data-stu-id="e5945-152">It should look something like `https://someplace.com/api/messages`.</span></span>
7. <span data-ttu-id="e5945-153">O botão **Adicionar** na seção **comando** orientará você na adição de comandos à extensão do sistema de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e5945-153">The **Add** button in the **Command** section will guide you through adding commands to your messaging extension.</span></span> <span data-ttu-id="e5945-154">Consulte a seção [saiba mais](#learn-more) para obter links para mais informações sobre como adicionar comandos.</span><span class="sxs-lookup"><span data-stu-id="e5945-154">See the [Learn more](#learn-more) section for links to more information on adding commands.</span></span> <span data-ttu-id="e5945-155">Lembre-se de que você pode definir até 10 comandos para sua extensão de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e5945-155">Remember you can define up to 10 commands for your messaging extension.</span></span>
8. <span data-ttu-id="e5945-156">A seção **manipuladores de mensagens** permite que você adicione um domínio para o qual as mensagens serão disparadas.</span><span class="sxs-lookup"><span data-stu-id="e5945-156">The **Message Handlers** section allows you to add a domain that your messaging will trigger on.</span></span> <span data-ttu-id="e5945-157">Confira [link Unfurling](~/messaging-extensions/how-to/link-unfurling.md) para obter mais informações.</span><span class="sxs-lookup"><span data-stu-id="e5945-157">See [link unfurling](~/messaging-extensions/how-to/link-unfurling.md) for more information.</span></span>

<span data-ttu-id="e5945-158">Na guia **concluir => teste e distribuição** , você pode **baixar** seu pacote de aplicativos (que inclui o manifesto do aplicativo, bem como seus ícones de aplicativo) ou **instalar** o pacote.</span><span class="sxs-lookup"><span data-stu-id="e5945-158">From the **Finish => Test and distribute** tab you can **Download** your app package (which includes your app manifest as well as your app icons), or **Install** the package.</span></span>

### <a name="create-your-app-manifest-manually"></a><span data-ttu-id="e5945-159">Criar o manifesto do aplicativo manualmente</span><span class="sxs-lookup"><span data-stu-id="e5945-159">Create your app manifest manually</span></span>

<span data-ttu-id="e5945-160">Como com bots e guias, você atualiza o [manifesto do aplicativo](~/resources/schema/manifest-schema.md#composeextensions) de seu aplicativo para incluir as propriedades de extensão de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e5945-160">As with bots and tabs, you update the [app manifest](~/resources/schema/manifest-schema.md#composeextensions) of your app to include the messaging extension properties.</span></span> <span data-ttu-id="e5945-161">Essas propriedades controlam como sua extensão de mensagens aparece e se comporta no cliente Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="e5945-161">These properties govern how your messaging extension appears and behaves in the Microsoft Teams client.</span></span> <span data-ttu-id="e5945-162">As extensões de mensagens têm suporte a partir da versão v 1.0 do manifesto.</span><span class="sxs-lookup"><span data-stu-id="e5945-162">Messaging extensions are supported beginning with v1.0 of the manifest.</span></span>

#### <a name="declare-your-messaging-extension"></a><span data-ttu-id="e5945-163">Declarar sua extensão de mensagens</span><span class="sxs-lookup"><span data-stu-id="e5945-163">Declare your messaging extension</span></span>

<span data-ttu-id="e5945-164">Para adicionar uma extensão de mensagens, inclua uma nova estrutura JSON de nível superior em seu manifesto de aplicativo com a `composeExtensions` propriedade.</span><span class="sxs-lookup"><span data-stu-id="e5945-164">To add a messaging extension, include a new top-level JSON structure in your app manifest with the `composeExtensions` property.</span></span> <span data-ttu-id="e5945-165">Você cria uma única extensão de mensagens para seu aplicativo, com até 10 comandos.</span><span class="sxs-lookup"><span data-stu-id="e5945-165">You create a single messaging extension for your app, with up to 10 commands.</span></span>

> [!NOTE]
> <span data-ttu-id="e5945-166">O manifesto se refere a extensões de mensagens como `composeExtensions` .</span><span class="sxs-lookup"><span data-stu-id="e5945-166">The manifest refers to messaging extensions as `composeExtensions`.</span></span> <span data-ttu-id="e5945-167">Isso é para manter a compatibilidade com versões anteriores.</span><span class="sxs-lookup"><span data-stu-id="e5945-167">This is to maintain backward compatibility.</span></span>

<span data-ttu-id="e5945-168">A definição de extensão é um objeto que tem a seguinte estrutura:</span><span class="sxs-lookup"><span data-stu-id="e5945-168">The extension definition is an object that has the following structure:</span></span>

| <span data-ttu-id="e5945-169">Nome da propriedade</span><span class="sxs-lookup"><span data-stu-id="e5945-169">Property name</span></span> | <span data-ttu-id="e5945-170">Finalidade</span><span class="sxs-lookup"><span data-stu-id="e5945-170">Purpose</span></span> | <span data-ttu-id="e5945-171">Obrigatório?</span><span class="sxs-lookup"><span data-stu-id="e5945-171">Required?</span></span> |
|---|---|---|
| `botId` | <span data-ttu-id="e5945-172">O ID exclusivo do aplicativo Microsoft para o bot conforme registrado na estrutura do bot.</span><span class="sxs-lookup"><span data-stu-id="e5945-172">The unique Microsoft app ID for the bot as registered with the Bot Framework.</span></span> <span data-ttu-id="e5945-173">Isso deve ser normalmente o mesmo que a ID do aplicativo de suas equipes gerais.</span><span class="sxs-lookup"><span data-stu-id="e5945-173">This should typically be the same as the ID for your overall Teams app.</span></span> | <span data-ttu-id="e5945-174">Sim</span><span class="sxs-lookup"><span data-stu-id="e5945-174">Yes</span></span> |
| `canUpdateConfiguration` | <span data-ttu-id="e5945-175">Habilita o item de menu **configurações** .</span><span class="sxs-lookup"><span data-stu-id="e5945-175">Enables **Settings** menu item.</span></span> | <span data-ttu-id="e5945-176">Não</span><span class="sxs-lookup"><span data-stu-id="e5945-176">No</span></span> |
| `commands` | <span data-ttu-id="e5945-177">Matriz de comandos que esta extensão de mensagens suporta.</span><span class="sxs-lookup"><span data-stu-id="e5945-177">Array of commands that this messaging extension supports.</span></span> <span data-ttu-id="e5945-178">Você está limitado a 10 comandos.</span><span class="sxs-lookup"><span data-stu-id="e5945-178">You are limited to 10 commands.</span></span> | <span data-ttu-id="e5945-179">Sim</span><span class="sxs-lookup"><span data-stu-id="e5945-179">Yes</span></span> |

#### <a name="define-your-commands"></a><span data-ttu-id="e5945-180">Definir seus comandos</span><span class="sxs-lookup"><span data-stu-id="e5945-180">Define your commands</span></span>

<span data-ttu-id="e5945-181">Sua extensão de mensagens deve declarar um ou mais comandos, que definem onde seus usuários podem disparar sua extensão de mensagens e o tipo de interação.</span><span class="sxs-lookup"><span data-stu-id="e5945-181">Your messaging extension should declare one or more commands, which define where your users can trigger your messaging extension, and the type of interaction.</span></span> <span data-ttu-id="e5945-182">Consulte [saiba mais](#learn-more) para obter mais informações sobre os comandos de extensão de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e5945-182">See [learn more](#learn-more) for more information on messaging extension commands.</span></span>

#### <a name="simple-manifest-example"></a><span data-ttu-id="e5945-183">Exemplo de manifesto simples</span><span class="sxs-lookup"><span data-stu-id="e5945-183">Simple manifest example</span></span>

<span data-ttu-id="e5945-184">O exemplo a seguir é um objeto de extensão de mensagem simples no manifesto de aplicativo com um comando de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="e5945-184">The example below is a simple messaging extension object in the app manifest with a search command.</span></span> <span data-ttu-id="e5945-185">Esse não é o arquivo de manifesto completo do aplicativo, apenas a parte específica das extensões de mensagens.</span><span class="sxs-lookup"><span data-stu-id="e5945-185">This is not the entire app manifest file, just the part specific to messaging extensions.</span></span> <span data-ttu-id="e5945-186">Consulte [esquema de manifesto de aplicativo](~/resources/schema/manifest-schema.md) para obter um exemplo completo.</span><span class="sxs-lookup"><span data-stu-id="e5945-186">See [app manifest schema](~/resources/schema/manifest-schema.md) for a complete example.</span></span>

```json
...
"composeExtensions": [
  {
    "botId": "abcd1234-1fc5-4d97-a142-35bb662b7b23",
    "canUpdateConfiguration": true,
    "commands": [
      {
        "id": "searchCmd",
        "description": "Search you ToDo's",
        "title": "Search",
        "initialRun": true,
        "parameters": [
          {
            "name": "searchKeyword",
            "description": "Enter your search keywords",
            "title": "Keywords"
          }
        ]
      }
    ]
  }
]
...
```

## <a name="add-your-invoke-message-handlers"></a><span data-ttu-id="e5945-187">Adicionar seus manipuladores de mensagens de chamada</span><span class="sxs-lookup"><span data-stu-id="e5945-187">Add your invoke message handlers</span></span>

<span data-ttu-id="e5945-188">Quando seus usuários disparam sua extensão de mensagens, você precisará lidar com a mensagem de chamada inicial, coletar algumas informações do usuário e, em seguida, processar essas informações e responder de forma adequada.</span><span class="sxs-lookup"><span data-stu-id="e5945-188">When your users trigger your messaging extension you'll need to handle the initial invoke message, collect some information from the user, then process that information and respond appropriately.</span></span> <span data-ttu-id="e5945-189">Para fazer isso, primeiro você precisará decidir que tipo de comandos você deseja adicionar à sua extensão de mensagens e [adicionar comandos de ação](~/messaging-extensions/how-to/action-commands/define-action-command.md) ou [Adicionar um comando de pesquisa](~/messaging-extensions/how-to/search-commands/define-search-command.md).</span><span class="sxs-lookup"><span data-stu-id="e5945-189">To do that, you'll first need to decide what kind of commands you want to add to your messaging extension and either [add an action commands](~/messaging-extensions/how-to/action-commands/define-action-command.md) or [add a search commands](~/messaging-extensions/how-to/search-commands/define-search-command.md).</span></span>

## <a name="messaging-extensions-in-teams-meetings"></a><span data-ttu-id="e5945-190">Extensões de mensagens em reuniões do teams</span><span class="sxs-lookup"><span data-stu-id="e5945-190">Messaging extensions in Teams meetings</span></span>

<span data-ttu-id="e5945-191">Após a reunião começar, os participantes do teams podem interagir diretamente com sua extensão de mensagens durante uma chamada ativa.</span><span class="sxs-lookup"><span data-stu-id="e5945-191">Once a meeting begins, Teams participants can interact directly with your messaging extension during a live call.</span></span> <span data-ttu-id="e5945-192">Considere o seguinte ao criar sua extensão de mensagens na reunião:</span><span class="sxs-lookup"><span data-stu-id="e5945-192">Consider the following when building your in-meeting messaging extension:</span></span>

1. <span data-ttu-id="e5945-193">**Localização**</span><span class="sxs-lookup"><span data-stu-id="e5945-193">**Location**.</span></span> <span data-ttu-id="e5945-194">Sua extensão de mensagens pode ser invocada a partir da área de mensagem de composição, da caixa de comando ou @mentioned no chat da reunião.</span><span class="sxs-lookup"><span data-stu-id="e5945-194">Your messaging extension can be invoked from the compose message area, the command box, or @mentioned in the meeting chat.</span></span>

1. <span data-ttu-id="e5945-195">**Metadados**.</span><span class="sxs-lookup"><span data-stu-id="e5945-195">**Metadata**.</span></span> <span data-ttu-id="e5945-196">Quando sua extensão de mensagens é invocada, ela pode identificar o usuário e o locatário de `userId` e `tenantId` .</span><span class="sxs-lookup"><span data-stu-id="e5945-196">When your messaging extension is invoked it can identify the user and tenant from `userId` and `tenantId`.</span></span> <span data-ttu-id="e5945-197">O `meetingId` pode ser encontrado como parte do `channelData` objeto.</span><span class="sxs-lookup"><span data-stu-id="e5945-197">The `meetingId` can be found as part of the `channelData` object.</span></span> <span data-ttu-id="e5945-198">Seu aplicativo pode usar o `userId` e o `meetingId`  para a `GetParticipant` solicitação de API para recuperar funções de usuário.</span><span class="sxs-lookup"><span data-stu-id="e5945-198">Your app can use the `userId` and `meetingId`  for the `GetParticipant` API request to retrieve user roles.</span></span>

1. <span data-ttu-id="e5945-199">**Tipo de comando**.</span><span class="sxs-lookup"><span data-stu-id="e5945-199">**Command type**.</span></span> <span data-ttu-id="e5945-200">Se sua extensão de mensagem usa [comandos baseados em ação](../../messaging-extensions/what-are-messaging-extensions.md#action-commands), ela deve seguir as guias autenticação de [logon único](../../tabs/how-to/authentication/auth-aad-sso.md) .</span><span class="sxs-lookup"><span data-stu-id="e5945-200">If your message extension uses [action-based commands](../../messaging-extensions/what-are-messaging-extensions.md#action-commands), it should follow tabs [Single Sign-On](../../tabs/how-to/authentication/auth-aad-sso.md) authentication.</span></span> 

1. <span data-ttu-id="e5945-201">**Experiência do usuário**.</span><span class="sxs-lookup"><span data-stu-id="e5945-201">**User experience**.</span></span> <span data-ttu-id="e5945-202">Você deve determinar a experiência do usuário final para extensões de mensagens invocadas durante um chat de reunião.</span><span class="sxs-lookup"><span data-stu-id="e5945-202">You should determine the intended the end-user experience for messaging extensions invoked during a meeting chat.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e5945-203">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="e5945-203">Next steps</span></span>

* [<span data-ttu-id="e5945-204">Criar comandos de ação</span><span class="sxs-lookup"><span data-stu-id="e5945-204">Create action commands</span></span>](~/messaging-extensions/how-to/action-commands/define-action-command.md)
* [<span data-ttu-id="e5945-205">Criar comandos de pesquisa</span><span class="sxs-lookup"><span data-stu-id="e5945-205">Create search commands</span></span>](~/messaging-extensions/how-to/search-commands/define-search-command.md)
* [<span data-ttu-id="e5945-206">Desenrolamento de link</span><span class="sxs-lookup"><span data-stu-id="e5945-206">Link unfurling</span></span>](~/messaging-extensions/how-to/link-unfurling.md)

## <a name="learn-more"></a><span data-ttu-id="e5945-207">Saiba mais</span><span class="sxs-lookup"><span data-stu-id="e5945-207">Learn more</span></span>

<span data-ttu-id="e5945-208">Experimente em um QuickStart:</span><span class="sxs-lookup"><span data-stu-id="e5945-208">Try it out in a quickstart:</span></span>

* <span data-ttu-id="e5945-209">Início rápido para C #</span><span class="sxs-lookup"><span data-stu-id="e5945-209">Quickstarts for C#</span></span>
  * [<span data-ttu-id="e5945-210">Extensão de mensagens com comandos baseados em ação</span><span class="sxs-lookup"><span data-stu-id="e5945-210">Messaging extension with action-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/51.teams-messaging-extensions-action)
  * [<span data-ttu-id="e5945-211">Extensão de mensagens com comandos baseados em pesquisa</span><span class="sxs-lookup"><span data-stu-id="e5945-211">Messaging extension with search-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/csharp_dotnetcore/50.teams-messaging-extensions-search)
* <span data-ttu-id="e5945-212">Início rápido para JavaScript</span><span class="sxs-lookup"><span data-stu-id="e5945-212">Quickstarts for JavaScript</span></span>
  * [<span data-ttu-id="e5945-213">Extensão de mensagens com comandos baseados em ação</span><span class="sxs-lookup"><span data-stu-id="e5945-213">Messaging extension with action-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/51.teams-messaging-extensions-action)
  * [<span data-ttu-id="e5945-214">Extensão de mensagens com comandos baseados em pesquisa</span><span class="sxs-lookup"><span data-stu-id="e5945-214">Messaging extension with search-based commands</span></span>](https://github.com/microsoft/BotBuilder-Samples/tree/master/samples/javascript_nodejs/50.teams-messaging-extensions-search)

<span data-ttu-id="e5945-215">Saiba mais sobre os conceitos de extensões de mensagens:</span><span class="sxs-lookup"><span data-stu-id="e5945-215">Learn more about messaging extensions concepts:</span></span>

* [<span data-ttu-id="e5945-216">Entender os recursos do aplicativo Teams?</span><span class="sxs-lookup"><span data-stu-id="e5945-216">Understand Teams app capabilities ?</span></span>](~/concepts/extensibility-points.md)
* [<span data-ttu-id="e5945-217">O que são extensões de mensagens?</span><span class="sxs-lookup"><span data-stu-id="e5945-217">What are messaging extensions?</span></span>](~/messaging-extensions/what-are-messaging-extensions.md)
