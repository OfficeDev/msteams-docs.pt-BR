### YamlMime:Tutorial
title: Criar um bot de conversa do Teams
metadata:
  title: Criar um bot de conversa do Teams
  description: Neste tutorial, você aprenderá a configurar o bot de conversa no Teams.
  audience: Developer
  level: Beginner
  ms.date: 04/01/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/conversations/channel-and-group-conversations.md
  nextTutorialTitle: Canais e conversas de chat em grupo com um bot do Microsoft Teams
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 8507ab1039568224f5b863b6fa7bb00a72fe4608
  ms.sourcegitcommit: e16b51a49756e0fe4eaf239898e28d3021f552da
  ms.translationtype: MT
  ms.contentlocale: pt-BR
  ms.lasthandoff: 06/04/2022
  ms.locfileid: "65887559"
items:
- durationInMinutes: 1
  content: >
    Os bots de conversa do Teams permitem que os usuários interajam com seu serviço Web por meio de texto, cartões interativos e módulos de tarefas. As conversas básicas são tratadas por meio do conector do Bot Framework, uma única API REST. Essa API permite que seu bot se comunique com o Teams e outros canais. O SDK do Construtor de Bot fornece os seguintes recursos:


    * Acesso fácil ao conector do Bot Framework.

    * Funcionalidade adicional para gerenciar o estado e o fluxo da conversa.

    * Maneiras simples de incorporar serviços cognitivos, como nLP (processamento de linguagem natural).


    Quando o bot é adicionado pela primeira vez a um grupo ou equipe, uma mensagem de introdução é enviada. A mensagem fornece uma breve descrição dos recursos do bot e como usá-los.


    Este guia passo a passo ajuda você a criar um bot de conversa básico no aplicativo Teams. Você verá a seguinte saída:


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Saída final." border="true"lightbox="assets/images/conversation-bot/final-output.png":::
- title: Pré-requisitos
  durationInMinutes: 1
  content: >
    Para configurar seu ambiente de desenvolvimento, instale as seguintes ferramentas:


    * [Locatário do Office 365](https://developer.microsoft.com/en-us/microsoft-365/dev-program)

    * [Ngrok ou](https://ngrok.com/) uma solução de túnel equivalente

    * Versão mais recente do [Visual Studio](https://visualstudio.microsoft.com/downloads/)

    * [SDK do .NET Core versão 3.1](https://dotnet.microsoft.com/en-us/download)

    * Microsoft Teams e uma conta do Teams
- title: Configurar o bot de conversa
  durationInMinutes: 5
  content: "Registre o bot no serviço de bot do Azure ao desenvolver e hospedá-lo no Azure. Execute as etapas a seguir:\n\n1. Use o ngrok para criar um túnel para os pontos de extremidade do servidor Web.\n1. Criar registro de canal de bot na conta do Azure.\n1. Crie um segredo do cliente que habilite a autenticação de SSO do bot.\n1. Adicione permissões de API para chamadas downstream.\n1. Adicione o ponto de extremidade de mensagens ao túnel ngrok que você criou.\n1. Adicione o canal do Microsoft Teams para implantar o bot em um canal do Teams.\n\n**Criar túnel ngrok**\n\nUse o ngrok para criar um túnel para os pontos de extremidade HTTPS disponíveis publicamente do servidor Web em execução localmente. Execute o seguinte comando no ngrok:\n\n```bash\nngrok http -host-header=rewrite 3978\n```\n\n**Criar registro de canal do Bot na conta do Azure**\n\n1. Acesse o [portal do Azure](https://portal.azure.com/).\n1. Selecione **Criar um recurso**.\n1. Pesquise **o Bot do Azure** na caixa de pesquisa.\n1. Selecione **o Bot do Azure**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/azure-bot.png\" alt-text=\"Bot do Azure.\":::\n\n1. Selecionar **Criar**.\n1. Digite o nome do identificador do bot no campo **Identificador do bot**.\n1. Selecione sua **Assinatura** na lista suspensa.\n1. Selecione seu **Grupo de recursos** na lista suspensa.\n\n    Para criar um novo grupo de recursos, selecione **Criar, insira** o nome do recurso, selecione **OK** e selecione o local necessário  na lista suspensa Novo local do grupo de recursos.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/create-azure-bot.png\" alt-text=\"Criar um bot do Azure.\":::\n\n1. Selecione o **Tipo de Aplicativo** **Multilocatário** para a **ID de Aplicativo da Microsoft**.\n\n    > [!NOTE]\n    > Na **seção Tipo de** Criação da ID do Aplicativo da Microsoft, Criar **nova ID** de Aplicativo da Microsoft já está selecionado para criar um novo bot. Você também pode selecionar **Usar registro de aplicativo existente**, se já tiver registrado um bot. Insira a ID do Aplicativo da Microsoft **no campo ID do** aplicativo existente e insira o valor **no campo Senha do** aplicativo existente.\n\n1. Selecione **Rever + criar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/review-create.png\" alt-text=\"Examinar e criar.\":::\n\n1. Selecione **Criar**, se a validação for aprovada. Levará alguns minutos para o serviço de bot ser provisionado.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/validation-passed.png\" alt-text=\"Validação do bot.\":::\n\n1. Selecione **Vá para o recurso**. O bot e os respectivos recursos estão listados no grupo de recursos.\n\n    Agora seu bot do Azure foi criado.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/go-to-resource.png\" alt-text=\"Vá para o cartão de recurso.\":::\n\n**Para criar o segredo do cliente**\n\n1. Em **Configurações**, selecione **Configurar**. Salve a **ID de Aplicativo da Microsoft** (ID do cliente) para referência futura.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/microsoft-app-id.png\" alt-text=\"ID do Aplicativo microsoft.\":::\n\n1. Selecione **Gerenciar** adjacente à **ID do Aplicativo da Microsoft**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manage-bot-label.png\" alt-text=\"Gerenciar rótulo.\":::\n\n1. Na seção **Segredos do cliente** , selecione **Novo segredo do cliente**. A **janela Adicionar um segredo do** cliente é exibida.  \n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/new-client-secret.png\" alt-text=\"Novo segredo do cliente.\":::\n\n1. Digite uma **Descrição** e selecione **Adicionar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-client-secret.png\" alt-text=\"Adicione o segredo do cliente.\":::\n\n1. Selecione **Copiar para a área de transferência** na **coluna Valor** e salve a ID do segredo do cliente para referência futura.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/value.png\" alt-text=\"Cartão de valor.\":::\n\n**Para adicionar permissões de API para chamadas downstream**\n\n1. No **painel** Gerenciar do bot, selecione **permissões de API**.\n1. Selecione **Adicionar uma permissão**. **A janela Solicitar permissões de API** é exibida.\n1. Selecione **AS APIs da Microsoft** e selecione **Microsoft Graph**.\n1. Selecione **permissões de aplicativo e** , em seguida, selecione permissões.\n1. Adicione quaisquer permissões de usuário que seu aplicativo exija para APIs downstream, por exemplo, `User.Read`.\n1. Selecione **Adicionar permissões**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/api-permissions.png\" alt-text=\"Adicionar permissões de API.\" border=\"true\"lightbox=\"assets/images/conversation-bot/api-permissions.png\":::\n\n**Para adicionar o ponto de extremidade de mensagens**\n\n1. Vá para **a home** page do bot e selecione **Configuração** em **Configurações** no painel esquerdo.\n1. Vá para ngrok.\n1. Copie a URL HTTPS (https para io), conforme mostrado na imagem a seguir:\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/ngrok.png\" alt-text=\"O Ngrok.\":::\n\n1. No **ponto de extremidade mensagens**, adicione a URL HTTPS disponível no ngrok e, no final da URL, adicione **/api/messages**.\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/messaging-endpoint.png\" alt-text=\"Ponto de extremidade de mensagens.\":::\n\n1. Selecione **Aplicar**.\n\n**Para adicionar o canal do Microsoft Teams**\n\n1. Vá para a **Página Inicial**.\n1. Na seção **Recursos recentes** , abra o bot.\n1. Selecione **Canais** no painel esquerdo e selecione **Microsoft Teams** <img src=\"~/assets/images/conversation-bot/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/> na lista de canais disponíveis.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/channels-teams.png\" alt-text=\"Selecione Teams.\":::\n\n1. Marque a caixa de seleção para aceitar os termos de serviço e selecione **Concordar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/terms-of-service.png\" alt-text=\"Termos de Serviço.\":::\n\n1. Selecione **Salvar**.\n\n    Você configurou com êxito um bot no Serviço de Bot do Azure e agora precisa configurar a conexão de serviço de bot.\n"
- title: Configurar a conexão de serviço de bot
  durationInMinutes: 1
  content: "Configure o exemplo de bot para entender como autenticar o bot de conversa no Microsoft Teams, criar o pacote de aplicativos do Teams e carregá-lo para a organização.\n\n1. Atualize appsettings.json no Visual Studio.\n1. Atualize manifest.json no Visual Studio e compacte-o no arquivo zip no Explorador de Arquivos.\n1. Execute sua solução no Visual Studio.\n1. Carregue o bot no Teams.\n\n**Atualizar appsettings para o bot de conversa**\n\n1. Vá para o repositório https://github.com/Microsoft/botbuilder-samples.git.\n1. Selecione **Código** e selecione a lista suspensa.\n1. Selecione **Baixar ZIP**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/repo.png\" alt-text=\"Clonagem de repositório.\":::\n\n1. Observe o caminho do repositório que você baixou.\n1. No Explorador **de Arquivos**, vá para **exemplos de botbuilder-samples** >  > **csharp_dotnetcore** > **57.teams-conversation-bot**.\n1. Abra o **arquivo appsettings.json** no Visual Studio e atualize a configuração do bot.\n\n    * Adicione o nome do bot para `MicrosoftAppType`.\n    * Você pode obter a partir `MicrosoftAppId` da página de configuração do bot. O `MicrosoftAppPassword` valor da ID de segredo do cliente que você salvou anteriormente.\n    * Você pode obter o `MicrosoftAppTenantId` ou `UserId` do link da conta usada para fazer logon no Teams. Siga o caminho na imagem para obter o link para `tenant id`:\n    \n        :::image type=\"content\" source=\"./assets/images/conversation-bot/teams-link-new.png\" alt-text=\"Caminho da ID do locatário no Teams.\":::\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/tenant-id.png\" alt-text=\"Copiar link do Teams.\":::\n\n        Copie a ID do locatário da URL.\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/url-tenantid.png\" alt-text=\"TenantID.\":::\n\n1. Selecione **Salvar**.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/appsettings.png\" alt-text=\"Appsettings Json.\":::\n\n**Para atualizar o manifesto**\n\n1. No Explorador **de Arquivos**, vá para **exemplos de botbuilder-samples** >  > **csharp_dotnetcore** > **57.teams-conversation-bot** > **TeamsAppManifest**.\n1. Abra o **arquivo manifest.json** no Visual Studio.\n1. No arquivo **manifest.json** , **localize {id}, {botId}** e adicione sua ID do Aplicativo microsoft.\n1. Adicione sua URL ngrok **em validDomains** excluindo `https://` e salvando.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manifest.png\" alt-text=\"Manifesto.\":::\n\n1. Compacte o conteúdo da pasta **TeamsAppManifest** para criar **manifest.zip**.\n\n    > [!NOTE]\n    > Ele `manifest.zip` não deve conter pastas adicionais. Ele deve ter o `manifest json` arquivo de origem, `color` o ícone e o `outline` ícone dentro da pasta zip.\n    > Execute sua solução no Visual Studio e carregue seu manifesto em seu locatário de demonstração para a organização ou sua conta do Teams.\n\n**Para executar a solução no Visual Studio**\n\n1. Abra o Visual Studio.\n1. Selecione **Arquivo** e **Abrir**.\n1. Selecione **Projeto/Solução** para abrir o `.csproj` arquivo no Explorador de Arquivos.\n1. Vá para **exemplos de botbuilder-samples** >  > **csharp_dotnetcore** > **57.teams-conversation-bot**.\n1. Selecione `TeamsConversationBot.csproj` o arquivo e selecione o bot na lista Projetos **de Inicialização** .\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/visual-studio.png\" alt-text=\"Depuração do Visual Studio.\":::\n\n1. Selecione F5 para depurar. Você receberá uma tela de confirmação quando o bot estiver pronto.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/bot.png\" alt-text=\"Tela pronta para bot.\":::\n\n**Para carregar o aplicativo no Teams**\n\n1. Vá para o Teams.\n1. Para carregar **manifest.zip**, selecione Armazenar > Gerenciar seus aplicativos > **Carregar** um aplicativo personalizado e abrirmanifest.zipdo repositório no Explorador de Arquivos.****\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/upload-manifest.png\" alt-text=\"Upload de manifesto no Teams.\":::\n\n1. Selecione **Adicionar** para instalar o bot de conversa no Teams.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-app-teams.png\" alt-text=\"Adicionar aplicativo ao Teams.\":::\n\n    Você pode interagir com esse bot agora.\n"
- title: Interação com o bot de conversa
  durationInMinutes: 2
  content: >
    Você pode interagir com o bot no Teams enviando uma mensagem ou selecionando um comando na lista de comandos. O bot responde às seguintes cadeias de caracteres:


    No painel esquerdo do Teams, selecione as reticências  e, em seguida, selecione seu aplicativo na lista. O bot mostra **Sugestões** da seguinte maneira:


    :::image type="content" source="./assets/images/conversation-bot/suggestions.png" alt-text="Cartão de sugestões.":::


    | MentionMe    | Mostrar Boas-vindas   | MessageAllMembers |

    | --- | --- | --- |

    | :::image type="content" source="./assets/images/conversation-bot/mentionme-new.png" alt-text="Cartão Mentionme" border="true"lightbox="assets/images/conversation-bot/mentionme-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/show-welcome-new.png" alt-text="Mostrar cartão de boas-vindas" border="true"lightbox="assets/images/conversation-bot/show-welcome-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/message-all-members-new.png" alt-text="Cartão MessageAllMembers" border="true"lightbox="assets/images/conversation-bot/message-all-members-new.png"::: |

    | **Resultado:** O bot responde à mensagem e menciona o usuário. | **Resultado:** O bot envia o cartão de boas-vindas para você interagir. |  **Resultado:** O bot envia uma mensagem um-para-um para cada membro na conversa atual. |

    | **Escopos válidos:** pessoal, chat em grupo, chat em equipe. | **Escopos válidos:** pessoal, chat em grupo, chat em equipe. |  **Escopos válidos:** pessoal, chat em grupo, chat em equipe. |


    Você pode selecionar uma opção na lista de comandos digitando @TeamsConversationBot  na área de composição da mensagem e o que **posso fazer?** Texto acima da área de composição.
- title: Desafio completo
  durationInMinutes: 1
  content: >
    Você conseguiu algo assim?


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Saída final." border="true"lightbox="assets/images/conversation-bot/final-output.png":::
- content: Você concluiu o tutorial para começar a usar o bot de conversa para o Microsoft Teams.
