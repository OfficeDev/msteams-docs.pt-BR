### YamlMime:Tutorial
title: Criar Teams de conversa
metadata:
  title: Criar Teams de conversa
  description: Neste tutorial, você aprenderá a configurar o bot de conversa no Teams.
  audience: Developer
  level: Beginner
  ms.date: 04/01/2022
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/conversations/channel-and-group-conversations.md
  nextTutorialTitle: Canais e conversas de chat em grupo com um bot do Microsoft Teams
  ms.custom: mvc
  ms.localizationpriority: none
  ms.openlocfilehash: 7bdb662ef322edf1e635d84593be66d8946874ee
  ms.sourcegitcommit: a85b4ae65b87006bb2e2e50ea902eb97291e83a8
  ms.translationtype: MT
  ms.contentlocale: pt-BR
  ms.lasthandoff: 04/01/2022
  ms.locfileid: "64612679"
items:
- durationInMinutes: 1
  content: >
    Teams bots de conversa permitem que os usuários interajam com seu serviço Web por meio de texto, cartões interativos e módulos de tarefas. As conversas básicas são manipuladas por meio do conector da Estrutura do Bot, uma única API REST. Essa API permite que seu bot se comunique com Teams e outros canais. O SDK do Construtor de Bots fornece os seguintes recursos:


    * Acesso fácil ao conector da Estrutura de Bot.

    * Funcionalidade adicional para gerenciar o fluxo e o estado da conversa.

    * Maneiras simples de incorporar serviços cognitivos, como o processamento de linguagem natural (NLP).


    Quando seu bot é adicionado pela primeira vez a um grupo ou equipe, uma mensagem de introdução é enviada. A mensagem fornece uma breve descrição dos recursos do bot e como usá-los.


    Este guia passo a passo ajuda você a criar um bot de conversa básica no Teams aplicativo. Você verá a seguinte saída:


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Saída final." border="true"lightbox="assets/images/conversation-bot/final-output.png":::
- title: Pré-requisitos
  durationInMinutes: 1
  content: >
    Para configurar seu ambiente de desenvolvimento, instale as seguintes ferramentas:


    * [Office 365 locatário](https://developer.microsoft.com/en-us/microsoft-365/dev-program)

    * [Ngrok](https://ngrok.com/) ou uma solução de tunelamento equivalente

    * Versão mais recente [do Visual Studio](https://visualstudio.microsoft.com/downloads/)

    * [.NET Core SDK versão 3.1](https://dotnet.microsoft.com/en-us/download)

    * Microsoft Teams e uma Teams de usuário
- title: Configurar bot de conversa
  durationInMinutes: 5
  content: "Registre bot com o serviço de bot do Azure quando você o desenvolver e hospedá-lo no Azure. Execute as etapas a seguir:\n\n1. Use ngrok para criar um túnel para os pontos de extremidade do servidor Web.\n1. Criar registro de canal bot na conta do Azure.\n1. Crie o segredo do cliente que habilita a autenticação SSO do bot.\n1. Adicione permissões de API para chamadas downstream.\n1. Adicione o ponto de extremidade de mensagens ao túnel de ngrok que você criou.\n1. Adicione Microsoft Teams canal para implantar o bot em um Teams canal.\n\n**Criar túnel ngrok**\n\nUse o ngrok para criar um túnel para os pontos de extremidade HTTPS disponíveis publicamente do servidor Web em execução local. Execute o seguinte comando em ngrok:\n\n```bash\nngrok http -host-header=rewrite 3978\n```\n\n**Criar registro de canal bot na conta do Azure**\n\n1. Acesse o [portal do Azure](https://portal.azure.com/).\n1. Selecione **Criar um recurso**.\n1. **Pesquise o Bot do Azure** na caixa de pesquisa.\n1. Selecione **Bot do Azure**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/azure-bot.png\" alt-text=\"Bot do Azure.\":::\n\n1. Selecionar **Criar**.\n1. Insira o nome da alça do bot no **campo Manipular** Bot.\n1. Selecione sua **Assinatura** na lista de menus suspensos.\n1. Selecione seu **grupo De recursos** na lista de menus suspensos.\n\n    Para criar um novo grupo de recursos, selecione **Criar** novo, insira nome do recurso, selecione **OK** e selecione o local necessário  na lista lista suspenso Novo local do grupo de recursos.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/create-azure-bot.png\" alt-text=\"Crie um bot do azure.\":::\n\n1. Selecione **Tipo de Aplicativo** como **Multi Locatário** para **ID do Aplicativo Microsoft**.\n\n    > [!NOTE]\n    > Na **seção Criação do** tipo de ID do Microsoft **App, Criar nova ID do Microsoft App** já está selecionada para criar um novo bot. Você também pode selecionar **Usar o registro de aplicativo existente**, se já tiver registrado um bot. Insira a ID do Aplicativo microsoft **no campo ID do aplicativo** existente e insira valor **no campo Senha do aplicativo** existente.\n\n1. Selecione **Examinar + criar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/review-create.png\" alt-text=\"Revisar e criar.\":::\n\n1. Selecione **Criar**, se a validação for aprovada. Leva alguns instantes para que o serviço de bot seja provisionado.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/validation-passed.png\" alt-text=\"Validação do bot.\":::\n\n1. Selecione **Acessar recursos**. O bot e os recursos relacionados estão listados no grupo de recursos.\n\n    Agora seu bot do Azure foi criado.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/go-to-resource.png\" alt-text=\"Vá para o cartão de recurso.\":::\n\n**Para criar o segredo do cliente**\n\n1. Em **Configurações**, selecione **Configuração**. Salve a **ID do Microsoft App** (ID do cliente) para referência futura.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/microsoft-app-id.png\" alt-text=\"ID do Aplicativo microsoft.\":::\n\n1. Selecione **Gerenciar** adjacente à **ID do Microsoft App**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manage-bot-label.png\" alt-text=\"Gerenciar rótulo.\":::\n\n1. Na seção **Segredos do** cliente, selecione **Novo segredo do cliente**. A **janela Adicionar um segredo do** cliente é exibida.  \n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/new-client-secret.png\" alt-text=\"Novo segredo do cliente.\":::\n\n1. Insira **Descrição** e selecione **Adicionar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-client-secret.png\" alt-text=\"Adicionar segredo do cliente.\":::\n\n1. Selecione **Copiar para área de transferência** na coluna **Valor** e salve a ID do segredo do cliente para referência futura.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/value.png\" alt-text=\"Cartão de valor.\":::\n\n**Para adicionar permissões de API para chamadas downstream**\n\n1. Em **Gerenciar** painel do bot, selecione **permissões de API**.\n1. Selecione **Adicionar uma permissão**. **A janela Solicitar permissões de API** é exibida.\n1. Selecione **APIs da Microsoft** e selecione **Microsoft Graph**.\n1. Selecione **Permissões de aplicativo e** selecione permissões.\n1. Adicione quaisquer permissões de usuário que seu aplicativo exija para APIs de downstream, por exemplo, `User.Read`.\n1. Selecione **Adicionar permissões**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/api-permissions.png\" alt-text=\"Adicionar permissões de API.\" border=\"true\"lightbox=\"assets/images/conversation-bot/api-permissions.png\":::\n\n**Para adicionar ponto de extremidade de mensagens**\n\n1. Vá para **a home** page do bot e selecione **Configuração** **em** Configurações no painel esquerdo.\n1. Vá para ngrok.\n1. Copie a URL HTTPS (https para io) conforme mostrado na imagem a seguir:\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/ngrok.png\" alt-text=\"Ngrok.\":::\n\n1. No **ponto de extremidade Mensagens**, adicione a URL HTTPS disponível no ngrok e, no final da URL, adicione **/api/messages**.\n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/messaging-endpoint.png\" alt-text=\"Ponto de extremidade de mensagens.\":::\n\n1. Selecione **Aplicar**.\n\n**Para adicionar o Microsoft Teams canal**\n\n1. Vá para **Home**.\n1. Na seção **Recursos recentes** , abra seu bot.\n1. Selecione **Canais** no painel esquerdo e selecione **Microsoft Teams** <img src=\"~/assets/images/conversation-bot/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/> na lista de canais disponíveis.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/channels-teams.png\" alt-text=\"Selecione Teams.\":::\n\n1. Selecione a caixa de seleção para aceitar os termos de serviço e selecione **Concordar**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/terms-of-service.png\" alt-text=\"Termos de Serviço.\":::\n\n1. Selecione **Salvar**.\n\n    Você definiu com êxito um bot no Serviço de Bot do Azure e agora precisa configurar a conexão de serviço bot.\n"
- title: Configurar a conexão de serviço de bot
  durationInMinutes: 1
  content: "Configure o exemplo de bot para entender como autenticar o bot de conversa no Microsoft Teams e criar o pacote de aplicativos Teams e carregue-o na organização.\n\n1. Atualize appsettings.json no Visual Studio.\n1. Atualize manifest.json no Visual Studio e compacta-o no arquivo zip no Explorador de Arquivos.\n1. Execute sua solução em Visual Studio.\n1. Upload o bot para Teams.\n\n**Atualizar appsettings para bot de conversa**\n\n1. Vá para o repo https://github.com/Microsoft/botbuilder-samples.git.\n1. Selecione **Código** e selecione o menu suspenso.\n1. Selecione **Baixar ZIP**.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/repo.png\" alt-text=\"Clonagem de Repo.\":::\n\n1. Certifique-se de observar o caminho do repositório que você baixou.\n1. No **Explorador de Arquivos**, vá para **botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-bot**.\n1. Abra o **arquivo appsettings.json** no Visual Studio e atualize a configuração do bot.\n\n    * Adicione seu nome de bot para `MicrosoftAppType`.\n    * Você pode obter a `MicrosoftAppId` partir da página de configuração do bot. The `MicrosoftAppPassword` is the Value for client secret ID that you saved previously.\n    * Você pode obter o `MicrosoftAppTenantId` ou `UserId` do link da conta usada para fazer logon no Teams. Siga o caminho na imagem para obter o link para `tenant id`:\n    \n        :::image type=\"content\" source=\"./assets/images/conversation-bot/teams-link-new.png\" alt-text=\"Caminho da ID do locatário Teams.\":::\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/tenant-id.png\" alt-text=\"Copie Teams link.\":::\n\n        Copie a ID do locatário da URL.\n\n        :::image type=\"content\" source=\"./assets/images/conversation-bot/url-tenantid.png\" alt-text=\"TenantID.\":::\n\n1. Selecione **Salvar**.    \n    \n    :::image type=\"content\" source=\"./assets/images/conversation-bot/appsettings.png\" alt-text=\"Appsettings Json.\":::\n\n**Para atualizar manifesto**\n\n1. No **Explorador de** Arquivos, vá para **botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-botTeamsAppManifest** > .\n1. Abra o **arquivo manifest.json** no Visual Studio.\n1. No arquivo **manifest.json** , encontre **{id}, {botId}** e adicione sua ID do Microsoft App.\n1. Adicione sua url ngrok **em validDomains** excluindo `https://` e salvando.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/manifest.png\" alt-text=\"Manifesto.\":::\n\n1. Feche o conteúdo da pasta **TeamsAppManifest** **para criarmanifest.zip**.\n\n    > [!NOTE]\n    > O `manifest.zip` não deve conter pastas adicionais nele. Ele deve ter arquivo `manifest json` de origem, `color` ícone e `outline` ícone dentro da pasta zip.\n    > Execute sua solução no Visual Studio e carregue seu manifesto em seu locatário de demonstração para a organização ou sua Teams conta.\n\n**Para executar a solução no Visual Studio**\n\n1. Abra o Visual Studio.\n1. Selecione **Arquivo** e **selecione Abrir**.\n1. Selecione **Project/Solução** para abrir o `.csproj` arquivo no Explorador de Arquivos.\n1. Vá para **botbuilder-samplessamples** >  >  **csharp_dotnetcore** >  **57.teams-conversation-bot**.\n1. Selecione `TeamsConversationBot.csproj` arquivo e selecione seu bot na lista **Projetos de** Inicialização.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/visual-studio.png\" alt-text=\"Visual Studio depuração.\":::\n\n1. Selecione F5 para depurar. Você receberá uma tela de confirmação quando o bot estiver pronto.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/bot.png\" alt-text=\"Tela pronta para bot.\":::\n\n**Para carregar o aplicativo no Teams**\n\n1. Vá para Teams.\n1. Para carregar **manifest.zip**, selecione **Armazenar > Gerenciar seus aplicativos > Upload um** aplicativo personalizado e abramanifest.zipdo repo no Explorador de Arquivos ****.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/upload-manifest.png\" alt-text=\"Carregamento de manifesto no Teams.\":::\n\n1. Selecione **Adicionar** para instalar o bot de conversa Teams.\n\n    :::image type=\"content\" source=\"./assets/images/conversation-bot/add-app-teams.png\" alt-text=\"Adicione App ao Teams.\":::\n\n    Agora você pode interagir com esse bot.\n"
- title: Interação com o bot de conversa
  durationInMinutes: 2
  content: >
    Você pode interagir com o bot no Teams enviando uma mensagem ou selecionando um comando na lista de comandos. O bot responde às seguintes cadeias de caracteres:


    No painel esquerdo do Teams, selecione as releições *** e selecione seu aplicativo na lista. O bot mostra **Sugestões** da seguinte forma:


    :::image type="content" source="./assets/images/conversation-bot/suggestions.png" alt-text="Cartão sugestões.":::


    | MentionMe    | Mostrar Bem-vindo   | MessageAllMembers |

    | --- | --- | --- |

    | :::image type="content" source="./assets/images/conversation-bot/mentionme-new.png" alt-text="Cartão Mentionme" border="true"lightbox="assets/images/conversation-bot/mentionme-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/show-welcome-new.png" alt-text="Mostrar cartão de boas-vindas" border="true"lightbox="assets/images/conversation-bot/show-welcome-new.png"::: | :::image type="content" source="./assets/images/conversation-bot/message-all-members-new.png" alt-text="Cartão MessageAllMembers" border="true"lightbox="assets/images/conversation-bot/message-all-members-new.png"::: |

    | **Resultado:** O bot responde à mensagem e menciona o usuário. | **Resultado:** O bot envia o cartão de boas-vindas para você interagir. |  **Resultado:** O bot envia uma mensagem um-a-um para cada membro na conversa atual. |

    | **Escopos válidos:** pessoal, chat em grupo, chat de equipe. | **Escopos válidos:** pessoal, chat em grupo, chat de equipe. |  **Escopos válidos:** pessoal, chat em grupo, chat de equipe. |


    Você pode selecionar uma opção na lista de comandos digitando @TeamsConversationBot  na área de mensagem de redação e o **que posso fazer?** texto acima da área de composição.
- title: Desafio completo
  durationInMinutes: 1
  content: >
    Você achou algo assim?


    :::image type="content" source="./assets/images/conversation-bot/final-output.png" alt-text="Saída final." border="true"lightbox="assets/images/conversation-bot/final-output.png":::
- content: Você concluiu o tutorial para começar com o bot de conversa para Microsoft Teams.
