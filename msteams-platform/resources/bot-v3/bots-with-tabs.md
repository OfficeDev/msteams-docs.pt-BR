---
title: Combinar bots com guias
description: Descreve como usar guias e bots juntos
keywords: desenvolvimento de guias de bots do teams
ms.date: 03/15/2018
ms.openlocfilehash: 59ae8bc01f82c70dd7ea6869cb870e26acae1293
ms.sourcegitcommit: 4329a94918263c85d6c65ff401f571556b80307b
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/01/2020
ms.locfileid: "41672747"
---
# <a name="combine-bots-with-tabs"></a><span data-ttu-id="a919b-104">Combinar bots com guias</span><span class="sxs-lookup"><span data-stu-id="a919b-104">Combine bots with tabs</span></span>

[!include[v3-to-v4-SDK-pointer](~/includes/v3-to-v4-pointer-bots.md)]

<span data-ttu-id="a919b-105">Os bots e guias funcionam bem juntos e são frequentemente combinados em um único serviço de back-end.</span><span class="sxs-lookup"><span data-stu-id="a919b-105">Bots and tabs work well together, and are often combined into a single back-end service.</span></span> <span data-ttu-id="a919b-106">Esta seção descreve as práticas recomendadas e os padrões comuns para usar guias e bots juntos.</span><span class="sxs-lookup"><span data-stu-id="a919b-106">This section describes best practices and common patterns for using tabs and bots together.</span></span>

## <a name="associating-user-identities-across-bot-and-tab"></a><span data-ttu-id="a919b-107">Associando identidades de usuário ao bot e à guia</span><span class="sxs-lookup"><span data-stu-id="a919b-107">Associating user identities across bot and tab</span></span>

<span data-ttu-id="a919b-108">Por exemplo: Suponha que seu aplicativo de guia use um sistema de ID proprietário para proteger seu conteúdo.</span><span class="sxs-lookup"><span data-stu-id="a919b-108">For example: Suppose your tab application uses a proprietary ID system to secure its content.</span></span> <span data-ttu-id="a919b-109">Suponha que você também tenha um bot que possa interagir com o usuário.</span><span class="sxs-lookup"><span data-stu-id="a919b-109">Suppose you also have a bot that can interact with the user.</span></span> <span data-ttu-id="a919b-110">Normalmente, você vai querer mostrar o conteúdo na guia específico para o usuário de exibição.</span><span class="sxs-lookup"><span data-stu-id="a919b-110">Typically, you’ll want to show content in the tab that is specific to the viewing user.</span></span> <span data-ttu-id="a919b-111">O desafio é que a ID de usuário em seu sistema provavelmente é diferente da ID de usuário do Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="a919b-111">The challenge is that the user ID in your system is likely different from the Microsoft Teams user ID.</span></span> <span data-ttu-id="a919b-112">Então, como você associa essas duas identidades?</span><span class="sxs-lookup"><span data-stu-id="a919b-112">So how do you associate these two identities?</span></span>
<span data-ttu-id="a919b-113">Em geral, a abordagem recomendada é assinar o usuário com o bot usando o mesmo sistema de identidade usado para fornecer autenticação para o conteúdo da guia.</span><span class="sxs-lookup"><span data-stu-id="a919b-113">In general, the recommended approach is to sign the user in with the bot using the same identity system used to provide authentication for the tab content.</span></span> <span data-ttu-id="a919b-114">Você pode implementar isso por meio da ação de entrada, que geralmente faz logon no usuário por meio de um fluxo OAuth.</span><span class="sxs-lookup"><span data-stu-id="a919b-114">You can implement this via the sign-in action, which typically logs in the user via an OAuth flow.</span></span>

<span data-ttu-id="a919b-115">Esse fluxo funciona melhor se o seu provedor de identidade implementar o protocolo OAuth 2,0.</span><span class="sxs-lookup"><span data-stu-id="a919b-115">This flow works best if your identity provider implements the OAuth 2.0 protocol.</span></span> <span data-ttu-id="a919b-116">Em seguida, você pode associar a ID de usuário da equipe às credenciais do usuário de seu próprio serviço de identidade.</span><span class="sxs-lookup"><span data-stu-id="a919b-116">You can then associate the Teams user ID with the user’s credentials from your own identity service.</span></span>

   ![Associando identidades](~/assets/images/bots/associating_contexts.png)

## <a name="constructing-deep-links-to-tabs-in-messages-from-your-bot"></a><span data-ttu-id="a919b-118">Construindo links profundas para guias em mensagens do bot</span><span class="sxs-lookup"><span data-stu-id="a919b-118">Constructing deep links to tabs in messages from your bot</span></span>

<span data-ttu-id="a919b-119">Você pode querer usar guias para mostrar mais conteúdo do que pode caber dentro de um cartão ou fornecer uma maneira de concluir tarefas complexas de preenchimento de formulários usando a tela da guia.</span><span class="sxs-lookup"><span data-stu-id="a919b-119">You may want to use tabs to show more content than can fit inside of a card, or provide a way to complete complex form-filling tasks using the tab canvas.</span></span> <span data-ttu-id="a919b-120">Por exemplo, considere navegar o usuário para a guia ao clicar no cartão do bot.</span><span class="sxs-lookup"><span data-stu-id="a919b-120">For example, consider navigating the user to the tab when he or she clicks on the card from your bot.</span></span> <span data-ttu-id="a919b-121">Para que isso aconteça, você precisará codificar a mensagem de seu bot para incluir uma URL de [link profundo](~/concepts/build-and-test/deep-links.md) , seja via marcação ou como o destino da ação openUrl.</span><span class="sxs-lookup"><span data-stu-id="a919b-121">For this to happen, you’ll need to encode your bot’s message to include a [deep link](~/concepts/build-and-test/deep-links.md) URL, either via markup or as the target of the openUrl action.</span></span>

<span data-ttu-id="a919b-122">Links profundos dependem de um EntityId, que é um valor opaco que mapeia para uma entidade exclusiva no seu sistema.</span><span class="sxs-lookup"><span data-stu-id="a919b-122">Deep links rely on an entityId, which is an opaque value that maps to a unique entity in your system.</span></span> <span data-ttu-id="a919b-123">Quando a guia é criada, você idealmente armazena um estado simples (por exemplo, sinalizador) no seu back-end, indicando que a guia foi criada no canal.</span><span class="sxs-lookup"><span data-stu-id="a919b-123">When the tab is created, you ideally store some simple state (e.g. flag) on your backend indicating the tab has been created in the channel.</span></span> <span data-ttu-id="a919b-124">Quando o bot cria uma mensagem, ele pode direcionar a EntityId associada a essa guia.</span><span class="sxs-lookup"><span data-stu-id="a919b-124">When your bot constructs a message, it can target the entityId associated with that tab.</span></span>

<span data-ttu-id="a919b-125">**Observação:** em bate-papos pessoais, como as guias são "estáticas" e instaladas com o aplicativo, você sempre pode supor sua existência e, assim, construir links profundas de acordo.</span><span class="sxs-lookup"><span data-stu-id="a919b-125">**Note:** in personal chats, because tabs are “static” and installed with the app, you can always assume their existence and thus construct deep links accordingly.</span></span>

## <a name="sending-notifications-for-tab-updates"></a><span data-ttu-id="a919b-126">Enviar notificações para atualizações de guia</span><span class="sxs-lookup"><span data-stu-id="a919b-126">Sending notifications for tab updates</span></span>

<span data-ttu-id="a919b-127">Muitas vezes, você deverá notificar o usuário final sempre que uma atualização ou uma ação do usuário ocorrer em uma guia. Um cenário de exemplo é atribuir uma tarefa ou um tíquete a um membro da equipe colega e, em seguida, notificar esse membro da equipe.</span><span class="sxs-lookup"><span data-stu-id="a919b-127">Often you’ll want to notify the end user whenever an update or a user action occurs in a tab. An example scenario is assigning a task or ticket to a fellow team member and then notifying that team member.</span></span>

<span data-ttu-id="a919b-128">Há duas maneiras de obter esse cenário:</span><span class="sxs-lookup"><span data-stu-id="a919b-128">There are two ways of achieving this scenario:</span></span>

1. <span data-ttu-id="a919b-129">Se você quiser notificar um canal inteiro, seu bot poderá postar uma mensagem de forma assíncrona no canal.</span><span class="sxs-lookup"><span data-stu-id="a919b-129">If you wish to notify an entire channel your bot can asynchronously post a message to the channel.</span></span> <span data-ttu-id="a919b-130">Não há nenhuma maneira de um bot criar proativamente a conversa de guia se ela não tiver sido criada com a guia.</span><span class="sxs-lookup"><span data-stu-id="a919b-130">There is no way for a bot to proactively create the tab conversation if it wasn't created with the tab.</span></span>

2. <span data-ttu-id="a919b-131">Se você quiser apenas notificar o destinatário ou partes interessadas envolvidas na ação, seu bot poderá enviar uma mensagem de chat pessoal para o usuário.</span><span class="sxs-lookup"><span data-stu-id="a919b-131">If you wish to only notify the recipient or interested parties involved with the action, your bot can send a personal chat message to the user.</span></span> <span data-ttu-id="a919b-132">Você deve primeiro verificar se uma conversa pessoal entre o bot e o usuário existe.</span><span class="sxs-lookup"><span data-stu-id="a919b-132">You should first check to see if a personal conversation between your bot and the user exists.</span></span> <span data-ttu-id="a919b-133">Caso contrário, você pode ligar `CreateConversation` para iniciar o chat pessoal.</span><span class="sxs-lookup"><span data-stu-id="a919b-133">If not, you can call `CreateConversation` to initiate the personal chat.</span></span>

<span data-ttu-id="a919b-134">Em ambos os casos, use notificações de evento de forma inteligente e nunca spam o usuário com atualizações desnecessárias.</span><span class="sxs-lookup"><span data-stu-id="a919b-134">In both cases, use event notifications wisely and never spam the user with unnecessary updates.</span></span>
