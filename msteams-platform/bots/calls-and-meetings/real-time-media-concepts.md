---
title: Chamadas de mídia em tempo real e reuniões online com o Microsoft Teams
description: Entenda os principais conceitos na criação de bot que podem conduzir chamadas de áudio e vídeo em tempo real e reuniões online.
ms.topic: conceptual
localization_priority: Normal
keywords: áudio stream vídeo stream audio/video calling meeting real-time media application-hosted media service-hosted media hosted media
ms.openlocfilehash: deedc47f67fe6848cf7f84457247d2271257e3f0
ms.sourcegitcommit: 825abed2f8784d2bab7407ba7a4455ae17bbd28f
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/26/2021
ms.locfileid: "52020152"
---
# <a name="real-time-media-calls-and-meetings-with-microsoft-teams"></a><span data-ttu-id="fe9da-104">Chamadas de mídia em tempo real e reuniões com o Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="fe9da-104">Real-time media calls and meetings with Microsoft Teams</span></span>

<span data-ttu-id="fe9da-105">A Plataforma de Mídia em tempo real permite que os bots interajam com chamadas e reuniões do Microsoft Teams usando voz, vídeo e compartilhamento de tela em tempo real.</span><span class="sxs-lookup"><span data-stu-id="fe9da-105">The Real-time Media Platform enables bots to interact with Microsoft Teams calls and meetings using real-time voice, video, and screen sharing.</span></span> <span data-ttu-id="fe9da-106">Esse é um recurso avançado que permite que o bot envie e receba conteúdo de voz e vídeo quadro a quadro.</span><span class="sxs-lookup"><span data-stu-id="fe9da-106">This is an advanced capability that allows the bot to send and receive voice and video content frame by frame.</span></span> <span data-ttu-id="fe9da-107">O bot tem acesso bruto aos fluxos de mídia de compartilhamento de voz, vídeo e tela.</span><span class="sxs-lookup"><span data-stu-id="fe9da-107">The bot has raw access to the voice, video, and screen sharing media streams.</span></span> <span data-ttu-id="fe9da-108">Há bots de mídia hospedados por serviço mais simples que dependem da Plataforma de Mídia em tempo real para todo o processamento de mídia.</span><span class="sxs-lookup"><span data-stu-id="fe9da-108">There are simpler service-hosted media bots that rely on the Real-time Media Platform for all media processing.</span></span> <span data-ttu-id="fe9da-109">Os bots que processam a mídia por conta própria são chamados de bots de mídia hospedados pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-109">Bots that process media themselves are called application-hosted media bots.</span></span>

<span data-ttu-id="fe9da-110">Por exemplo, em uma chamada 1:1 com um bot, como o usuário fala, o bot recebe 50 quadros de áudio por segundo, com cada quadro contendo 20 milissegundos (ms) de áudio.</span><span class="sxs-lookup"><span data-stu-id="fe9da-110">For example, in a 1:1 call with a bot, as the user speaks, the bot receives 50 audio frames per second, with each frame containing 20 milliseconds (ms) of audio.</span></span> <span data-ttu-id="fe9da-111">Um bot de mídia hospedado por aplicativo pode executar o reconhecimento de fala em tempo real à medida que os quadros de áudio são recebidos, em vez de ter que esperar por uma gravação depois que o usuário parou de falar.</span><span class="sxs-lookup"><span data-stu-id="fe9da-111">An application-hosted media bot can perform real-time speech recognition as the audio frames are received, rather than having to wait for a recording after the user has stopped speaking.</span></span> <span data-ttu-id="fe9da-112">O bot também pode enviar e receber vídeo de alta resolução, incluindo conteúdo de compartilhamento de tela baseado em vídeo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-112">The bot can also send and receive high-definition-resolution video, including video-based screen sharing content.</span></span>

<span data-ttu-id="fe9da-113">A plataforma fornece uma API simples como soquete para o bot enviar e receber mídia.</span><span class="sxs-lookup"><span data-stu-id="fe9da-113">The platform provides a simple socket-like API for the bot to send and receive media.</span></span> <span data-ttu-id="fe9da-114">Ele lida com a codificação em tempo real e a decodificação de pacotes de áudio ou vídeo usando codecs como SILK e G.722 para áudio e H.264 para vídeo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-114">It handles the real-time encoding and decoding of audio or video packets using codecs such as SILK and G.722 for audio and H.264 for video.</span></span> <span data-ttu-id="fe9da-115">A plataforma também lida com toda a criptografia de pacotes de mídia ou descriptografia e transmissão de rede de pacotes automaticamente.</span><span class="sxs-lookup"><span data-stu-id="fe9da-115">The platform also handles all media packet encryption or decryption and packet network transmission automatically.</span></span> <span data-ttu-id="fe9da-116">O bot só está preocupado com o conteúdo real de áudio ou vídeo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-116">The bot is only concerned with the actual audio or video content.</span></span> <span data-ttu-id="fe9da-117">Um bot de mídia em tempo real participa de chamadas 1:1, bem como reuniões com vários participantes.</span><span class="sxs-lookup"><span data-stu-id="fe9da-117">A real-time media bot participates in 1:1 calls as well as meetings with multiple participants.</span></span>

## <a name="media-session"></a><span data-ttu-id="fe9da-118">Sessão de mídia</span><span class="sxs-lookup"><span data-stu-id="fe9da-118">Media session</span></span>

<span data-ttu-id="fe9da-119">Quando um bot de mídia em tempo real responde a uma chamada de entrada ou inscreves em uma reunião do Teams, ele deve declarar quais modalidades ele deve suportar.</span><span class="sxs-lookup"><span data-stu-id="fe9da-119">When a real-time media bot answers an incoming call or joins a Teams meeting, it must declare what modalities it must support.</span></span> <span data-ttu-id="fe9da-120">Para cada modalidade suportada, o bot declara se pode enviar e receber mídia, receber somente ou enviar somente.</span><span class="sxs-lookup"><span data-stu-id="fe9da-120">For each supported modality, the bot declares whether it can send and receive media, receive only, or send only.</span></span> <span data-ttu-id="fe9da-121">Por exemplo, um bot projetado para lidar com chamadas do Teams 1:1 exige enviar e receber áudio, mas apenas enviar vídeo, pois não é necessário receber o vídeo do chamador.</span><span class="sxs-lookup"><span data-stu-id="fe9da-121">For example, a bot designed to handle 1:1 Teams calls, requires to both send and receive audio, but only send video as it does not require to receive the video of the caller.</span></span> <span data-ttu-id="fe9da-122">O conjunto de modalidades de áudio e vídeo estabelecidas entre o bot e o chamador ou reunião do Teams é chamado de sessão de mídia.</span><span class="sxs-lookup"><span data-stu-id="fe9da-122">The set of audio and video modalities established between the bot and the Teams caller or meeting is called the media session.</span></span>

<span data-ttu-id="fe9da-123">Há suporte para dois tipos de modalidades de vídeo, vídeo principal e compartilhamento de tela baseado em vídeo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-123">Two types of video modalities are supported, main video and video-based screen sharing.</span></span> <span data-ttu-id="fe9da-124">O vídeo principal é usado para transportar o vídeo da webcam de um usuário.</span><span class="sxs-lookup"><span data-stu-id="fe9da-124">The main video is used to transport the video from a user's webcam.</span></span> <span data-ttu-id="fe9da-125">O compartilhamento de tela baseado em vídeo permite que um usuário compartilhe sua tela como um fluxo de vídeo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-125">The video-based screen sharing allows a user to share his or her screen as a video stream.</span></span> <span data-ttu-id="fe9da-126">A plataforma permite que um bot envie e receba ambos os tipos de vídeo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-126">The platform allows a bot to send and receive both video types.</span></span>

<span data-ttu-id="fe9da-127">Quando ingressou em uma reunião do Teams, um bot pode receber vários fluxos de vídeo principais simultaneamente até dez por sessão de mídia.</span><span class="sxs-lookup"><span data-stu-id="fe9da-127">When joined to a Teams meeting, a bot can receive multiple main video streams simultaneously up to ten per media session.</span></span> <span data-ttu-id="fe9da-128">Isso permite que o bot veja mais de um participante na reunião.</span><span class="sxs-lookup"><span data-stu-id="fe9da-128">This allows the bot to see more than one participant in the meeting.</span></span>

<span data-ttu-id="fe9da-129">A próxima seção fornece detalhes sobre o bot enviando e recebendo mídia como uma sequência de quadros.</span><span class="sxs-lookup"><span data-stu-id="fe9da-129">The next section provides details about the bot sending and receiving media as a sequence of frames.</span></span>

## <a name="frames-and-frame-rate"></a><span data-ttu-id="fe9da-130">Quadros e taxa de quadros</span><span class="sxs-lookup"><span data-stu-id="fe9da-130">Frames and frame rate</span></span>

<span data-ttu-id="fe9da-131">Um bot de mídia em tempo real interage diretamente com as modalidades de áudio e vídeo de uma sessão de mídia.</span><span class="sxs-lookup"><span data-stu-id="fe9da-131">A real-time media bot interacts directly with the audio and video modalities of a media session.</span></span> <span data-ttu-id="fe9da-132">Isso significa que o bot está enviando e recebendo mídia como uma sequência de quadros, onde cada quadro representa uma unidade de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-132">This means the bot is sending and receiving media as a sequence of frames, where each frame represents a unit of content.</span></span> <span data-ttu-id="fe9da-133">Um segundo de áudio é transmitido como uma sequência de 50 quadros, com cada quadro contendo 20 ms que seja 1/50 de um segundo de conteúdo de fala.</span><span class="sxs-lookup"><span data-stu-id="fe9da-133">One second of audio is transmitted as a sequence of 50 frames, with each frame containing 20 ms that is 1/50th of a second of speech content.</span></span> <span data-ttu-id="fe9da-134">Um segundo do vídeo é transmitido como uma sequência de 30 imagens ainda, cada uma delas destinada a ser exibida por apenas 33,3 ms que é 1/30 de segundo antes que o próximo quadro de vídeo seja exibido.</span><span class="sxs-lookup"><span data-stu-id="fe9da-134">One second of video is transmitted as a sequence of 30 still images, each intended to be viewed for just 33.3 ms that is 1/30th of a second before the next video frame is displayed.</span></span> <span data-ttu-id="fe9da-135">O número de quadros transmitidos ou renderizados por segundo é chamado de taxa de quadros.</span><span class="sxs-lookup"><span data-stu-id="fe9da-135">The number of frames transmitted or rendered per second is called the frame rate.</span></span>

<span data-ttu-id="fe9da-136">A próxima seção fornece detalhes sobre o formato de áudio e vídeo usado em chamadas e reuniões de mídia em tempo real.</span><span class="sxs-lookup"><span data-stu-id="fe9da-136">The next section provides details about the audio and video format used in real-time media calls and meetings.</span></span>

## <a name="audio-and-video-format"></a><span data-ttu-id="fe9da-137">Formato de áudio e vídeo</span><span class="sxs-lookup"><span data-stu-id="fe9da-137">Audio and video format</span></span>

<span data-ttu-id="fe9da-138">No formato de áudio, cada segundo de áudio é representado como 16.000 amostras, com cada amostra contendo 16 bits de dados.</span><span class="sxs-lookup"><span data-stu-id="fe9da-138">In audio format, each second of audio is represented as 16,000 samples, with each sample containing 16-bits of data.</span></span> <span data-ttu-id="fe9da-139">Um quadro de áudio de 20 ms contém 320 amostras que são 640 bytes de dados.</span><span class="sxs-lookup"><span data-stu-id="fe9da-139">A 20 ms audio frame contains 320 samples that is 640 bytes of data.</span></span>

<span data-ttu-id="fe9da-140">No formato de vídeo, há suporte para vários formatos.</span><span class="sxs-lookup"><span data-stu-id="fe9da-140">In video format, several formats are supported.</span></span> <span data-ttu-id="fe9da-141">Duas propriedades principais de um formato de vídeo são o tamanho do quadro e o formato de cor.</span><span class="sxs-lookup"><span data-stu-id="fe9da-141">Two key properties of a video format are its frame size and color format.</span></span> <span data-ttu-id="fe9da-142">Os tamanhos de quadros com suporte incluem 640x360 que é 360 pixels, 1280x720 que é 720 pixels e 1920x1080 que é 1080 pixels.</span><span class="sxs-lookup"><span data-stu-id="fe9da-142">Supported frame sizes include 640x360 that is 360 pixels, 1280x720 that is 720 pixels, and 1920x1080 that is 1080 pixels.</span></span> <span data-ttu-id="fe9da-143">Os formatos de cores com suporte incluem NV12 que é 12 bits por pixel e RGB24 que é 24 bits por pixel.</span><span class="sxs-lookup"><span data-stu-id="fe9da-143">Supported color formats include NV12 that is 12 bits per pixel and RGB24 that is 24 bits per pixel.</span></span>

<span data-ttu-id="fe9da-144">Um quadro de vídeo de 720p contém 921.600 pixels que é 1280 vezes 720.</span><span class="sxs-lookup"><span data-stu-id="fe9da-144">A 720p video frame contains 921,600 pixels that is 1280 times 720.</span></span> <span data-ttu-id="fe9da-145">No formato de cor RGB24, cada pixel é representado como 3 bytes que são 24 bits compostos por um byte cada um dos componentes de cor vermelho, verde e azul.</span><span class="sxs-lookup"><span data-stu-id="fe9da-145">In the RGB24 color format, each pixel is represented as 3 bytes that is 24-bits comprised of one byte each of red, green, and blue color components.</span></span> <span data-ttu-id="fe9da-146">Portanto, um único quadro de vídeo RGB24 de 720p requer 2.764.800 bytes de dados que são 921.600 pixels vezes 3 bytes por pixel.</span><span class="sxs-lookup"><span data-stu-id="fe9da-146">Therefore, a single 720p RGB24 video frame requires 2,764,800 bytes of data that is 921,600 pixels times 3 bytes per pixel.</span></span> <span data-ttu-id="fe9da-147">A uma taxa de quadros de 30 fps, enviar quadros de vídeo RGB24 de 720p significa processar aproximadamente 80 megabytes por segundo de conteúdo, que é substancialmente compactado pelo codec de vídeo H.264 antes da transmissão da rede.</span><span class="sxs-lookup"><span data-stu-id="fe9da-147">At a frame rate of 30 fps, sending 720p RGB24 video frames means processing approximately 80 megabytes per second of content, which is substantially compressed by the H.264 video codec before network transmission.</span></span>

<span data-ttu-id="fe9da-148">Um recurso avançado da plataforma permite que um bot envie ou receba vídeo como quadros H.264 codificados.</span><span class="sxs-lookup"><span data-stu-id="fe9da-148">An advanced capability of the platform allows a bot to send or receive video as encoded H.264 frames.</span></span> <span data-ttu-id="fe9da-149">Isso dá suporte a bots que fornecem seu próprio codificador ou decodificador H.264 ou não exigem o fluxo de vídeo decodificado em bitmaps RGB24 ou NV12 brutos.</span><span class="sxs-lookup"><span data-stu-id="fe9da-149">This supports bots which provide their own H.264 encoder or decoder, or do not require the video stream decoded into raw RGB24 or NV12 bitmaps.</span></span>

<span data-ttu-id="fe9da-150">A próxima seção fornece detalhes sobre quais participantes da reunião estão falando que são falantes ativos e dominantes.</span><span class="sxs-lookup"><span data-stu-id="fe9da-150">The next section provides details about which meeting participants are speaking that is which are active and dominant speakers.</span></span>

## <a name="active-and-dominant-speakers"></a><span data-ttu-id="fe9da-151">Alto-falantes ativos e dominantes</span><span class="sxs-lookup"><span data-stu-id="fe9da-151">Active and dominant speakers</span></span>

<span data-ttu-id="fe9da-152">Quando ingresse em uma reunião do Teams que consiste em vários participantes, um bot pode identificar quais participantes da reunião estão falando no momento.</span><span class="sxs-lookup"><span data-stu-id="fe9da-152">When joined to a Teams meeting consisting of multiple participants, a bot can identify which meeting participants are currently speaking.</span></span> <span data-ttu-id="fe9da-153">Os alto-falantes ativos identificam quais participantes estão sendo ouvidos em cada quadro de áudio recebido.</span><span class="sxs-lookup"><span data-stu-id="fe9da-153">Active speakers identify which participants are being heard in each received audio frame.</span></span> <span data-ttu-id="fe9da-154">Os alto-falantes dominantes identificam quais participantes estão mais ativos ou dominantes na conversa de grupo, mesmo que sua voz não seja ouvida em todos os quadros de áudio.</span><span class="sxs-lookup"><span data-stu-id="fe9da-154">Dominant speakers identify which participants are currently most active or dominant in the group conversation, even though their voice is not heard in every audio frame.</span></span> <span data-ttu-id="fe9da-155">O conjunto de alto-falantes dominantes pode mudar à medida que diferentes participantes se revezam falando.</span><span class="sxs-lookup"><span data-stu-id="fe9da-155">The set of dominant speakers can change as different participants take turns speaking.</span></span>

<span data-ttu-id="fe9da-156">A próxima seção fornece detalhes sobre solicitações de assinatura de vídeo feitas por um bot.</span><span class="sxs-lookup"><span data-stu-id="fe9da-156">The next section provides details about video subscription requests made by a bot.</span></span>

## <a name="video-subscription"></a><span data-ttu-id="fe9da-157">Assinatura de vídeo</span><span class="sxs-lookup"><span data-stu-id="fe9da-157">Video subscription</span></span>

<span data-ttu-id="fe9da-158">Em uma chamada 1:1, o bot recebe automaticamente o vídeo do chamador se o bot estiver habilitado para receber o vídeo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-158">In a 1:1 call, the bot automatically receives the video of the caller if the bot is enabled to receive the video.</span></span> <span data-ttu-id="fe9da-159">Em uma reunião do Teams, o bot deve indicar para a plataforma quais participantes ele deseja ver.</span><span class="sxs-lookup"><span data-stu-id="fe9da-159">In a Teams meeting, the bot must indicate to the platform which participants it wants to see.</span></span> <span data-ttu-id="fe9da-160">Uma assinatura de vídeo é uma solicitação do bot para receber o conteúdo principal de vídeo ou compartilhamento de tela de um participante.</span><span class="sxs-lookup"><span data-stu-id="fe9da-160">A video subscription is a request by the bot to receive a participant’s main video or screen-sharing content.</span></span> <span data-ttu-id="fe9da-161">À medida que os participantes da reunião conduzem suas conversas, o bot modifica suas assinaturas de vídeo desejadas com base nas atualizações do conjunto de alto-falantes dominante ou nas notificações indicando qual participante está compartilhamento de tela no momento.</span><span class="sxs-lookup"><span data-stu-id="fe9da-161">As the participants in the meeting conduct their conversation, the bot modifies its desired video subscriptions based on updates of the dominant speaker set or notifications indicating which participant is currently screen sharing.</span></span>

<span data-ttu-id="fe9da-162">A próxima seção fornece detalhes sobre o que você deve instalar e os requisitos para desenvolver um bot de mídia hospedado pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="fe9da-162">The next section provides details about what you must install and the requirements to develop an application-hosted media bot.</span></span>

## <a name="developer-resources"></a><span data-ttu-id="fe9da-163">Recursos de desenvolvedor</span><span class="sxs-lookup"><span data-stu-id="fe9da-163">Developer resources</span></span>

<span data-ttu-id="fe9da-164">Para desenvolver um bot de mídia hospedado por aplicativo, você deve instalar o pacote NuGet da biblioteca .NET da [Microsoft.Graph.Calls.Media](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) no seu projeto Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fe9da-164">To develop an application-hosted media bot, you must install the [Microsoft.Graph.Calls.Media .NET library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) NuGet package within your Visual Studio project.</span></span>

<span data-ttu-id="fe9da-165">Os bots de mídia hospedados pelo aplicativo exigem .NET ou C# e Windows Server.</span><span class="sxs-lookup"><span data-stu-id="fe9da-165">Application-hosted media bots require .NET or C# and Windows Server.</span></span> <span data-ttu-id="fe9da-166">Para obter mais informações, consulte [requisitos e considerações para bots de mídia hospedados pelo aplicativo.](requirements-considerations-application-hosted-media-bots.md#c-or-net-and-windows-server-for-development)</span><span class="sxs-lookup"><span data-stu-id="fe9da-166">For more information, see [requirements and considerations for application-hosted media bots](requirements-considerations-application-hosted-media-bots.md#c-or-net-and-windows-server-for-development).</span></span>

## <a name="next-step"></a><span data-ttu-id="fe9da-167">Próxima etapa</span><span class="sxs-lookup"><span data-stu-id="fe9da-167">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="fe9da-168">Registrar um bot de chamada</span><span class="sxs-lookup"><span data-stu-id="fe9da-168">Register a calling bot</span></span>](~/bots/calls-and-meetings/registering-calling-bot.md)
