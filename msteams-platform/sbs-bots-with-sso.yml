### YamlMime:Tutorial
title: Criar um bot com autenticação de SSO
metadata:
  title: Criar um bot com autenticação de SSO
  description: Neste tutorial, você aprenderá a criar um bot com autenticação de SSO.
  audience: Developer
  level: Beginner
  ms.date: 08/24/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/authentication/auth-aad-sso-bots.md
  nextTutorialTitle: Leia mais sobre a autenticação de bot
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: 14640c0aa58f3304f3bd18a09105c4e718eee129
  ms.sourcegitcommit: ac59d469b823b80e65ee6f7be11ec5c365977a1c
  ms.translationtype: MT
  ms.contentlocale: pt-BR
  ms.lasthandoff: 10/06/2022
  ms.locfileid: "68490537"
items:
- durationInMinutes: 1
  content: >
    Os bots do Teams são bots de conversa que executam tarefas automatizadas repetitivas realizadas pelos usuários, como o atendimento ao cliente. O usuário precisa entrar várias vezes sem autenticação de SSO (logon único). Com os métodos de autenticação de SSO, os usuários não precisam entrar no bot várias vezes.


    Um bot se comporta de maneira diferente, dependendo da conversa em que ele está envolvido:


    * Os bots em conversas de chat em grupo e canal exigem que os usuários @mention o bot.

    * Bots em uma conversa privada não exigem uma @menção. Todas as mensagens enviadas pelo usuário são roteadas para o bot.


    Este guia passo a passo ajuda você a criar um bot com autenticação de SSO. Você verá a seguinte saída:

     :::image type="content" source="~/assets/images/bots/sbs-desktop-mobile.png" alt-text="Celular conectado ao bot":::
- title: Pré-requisitos
  durationInMinutes: 1
  content: "Instale as seguintes ferramentas e configure seu ambiente de desenvolvimento:  \n\n | &nbsp; | Instalar | Para usar... |\n | --- | --- | --- |\n | **Required** | &nbsp; | &nbsp; |\n | &nbsp; | [Microsoft Teams com uma conta (não uma conta de convidado)](https://www.microsoft.com/microsoft-teams/download-app) |  Microsoft Teams para colaborar com todas as pessoas com quem você trabalha por meio de aplicativos para chat, reuniões, chamadas e tudo em um só lugar. |\n | &nbsp; | [Visual Studio 2022 versão 17.3](https://visualstudio.microsoft.com)<br> Instale uma das duas cargas de trabalho a seguir:<br> • **ASP.NET desenvolvimento para a Web** <br> • **Desenvolvimento multiplataforma do .NET Core** | Você pode instalar a versão corporativa no Visual Studio 2022 e instalar as cargas de trabalho. |\n | &nbsp; | [Conta de desenvolvedor do Microsoft 365](/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant) | Acesso à conta do Teams com as permissões apropriadas para instalar um aplicativo. |\n | &nbsp; | [ngrok](https://ngrok.com/download) | Os recursos do aplicativo Teams (bots de conversa, extensões de mensagem e webhooks de entrada) exigem conexões de entrada. Um túnel conecta seu sistema de desenvolvimento ao Teams. Ele não é necessário para aplicativos que incluem apenas guias. Esse pacote é instalado no diretório do projeto (usando npm `devDependencies`). |\n\n  > [!NOTE]\n  > Depois de baixar o ngrok, inscreva-se e instale [o authtoken](https://ngrok.com/download).\n\n## <a name=\"set-up-your-teams-development-tenant\"></a>Configurar seu locatário de desenvolvimento do Teams\n\n   Um **locatário** é como um espaço ou um contêiner em que você conversa, compartilha arquivos e executa reuniões para sua organização no Teams. Você também pode realizar o sideload e testar o aplicativo.\n\n### <a name=\"check-for-sideloading-option\"></a>Verificar a opção de sideload\n\n    After creating the app, you must load your app in Teams without distributing it. This loading is known as sideloading. Sign-in to your Microsoft 365 account to view this option.\n\n   > [!NOTE]\n   > O sideload é necessário para visualizar e testar aplicativos no ambiente local do Teams. Habilite o Sideload para visualizar e testar seu aplicativo no Teams localmente.\n\n   Você já tem um locatário e tem acesso de administrador? Vamos verificar se você realmente faz!\n\nPara verificar o sideload de aplicativos no Teams:\n\n1. No cliente do Teams, selecione **Loja**.\n1. Selecione **Gerenciar seus aplicativos Carregar** > **um aplicativo**.\n1. Procure a opção para **carregar um aplicativo personalizado**. Se você vir a opção, o sideload de aplicativos estará habilitado.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/upload-custom-app1.png\" alt-text=\"A ilustração mostra a opção de carregar um aplicativo personalizado no Teams.\":::\n\n    > [!NOTE]\n    > Se você não tiver a opção de carregar um aplicativo personalizado, entre em contato com o administrador do Teams.\n\n### <a name=\"create-a-free-teams-developer-tenant-optional\"></a>Criar um locatário de desenvolvedor gratuito do Teams (opcional)\n\nSe você não tiver uma conta de desenvolvedor do Teams, poderá obtê-la gratuitamente. Participe do programa de desenvolvedor do Microsoft 365!\n\n1. Acesse o [Programa para desenvolvedores do Microsoft 365](https://developer.microsoft.com/microsoft-365/dev-program).\n1. Selecione **Ingressar Agora** e siga as instruções na tela.\n1. Selecione **Configurar assinatura E5 na** tela de boas-vindas.\n1. Configurar conta de administrador. Depois de concluir, a tela a seguir será exibida.\n\n      :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/microsoft-365.png\" alt-text=\"Microsoft\":::\n\n1. Entre no Teams usando a nova conta de administrador. Agora você deve ter a **opção Carregar um aplicativo** personalizado.\n"
- title: Criar e registrar seu bot
  durationInMinutes: 5
  content: "As etapas a seguir ajudam você a criar e registrar seu bot portal do Azure:\n\n1. Crie um recurso de Bot do Azure para registrar o bot no Azure Serviço de Bot.\n1. Crie o segredo do cliente para habilitar a autenticação de SSO do bot.\n1. Adicione o canal do Teams para implantar o bot.\n1. Use o ngrok para criar um túnel para os pontos de extremidade do servidor Web.\n1. Adicione o ponto de extremidade de mensagens ao túnel ngrok que você criou.\n\n**Para criar um recurso de Bot do Azure**\n\n1. Acesse o [Portal do Azure](https://portal.azure.com/). Ele pode solicitar que você entre com suas credenciais de conta da Microsoft.\n\n1. Selecione **Criar um recurso**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Createaresource_1.png\" alt-text=\"Criar Recurso\":::\n\n1. Na caixa de pesquisa, insira o **bot do Azure**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/searchazurebot_1.png\" alt-text=\"Criar Recurso\":::\n\n1. Selecione **Enter**.\n\n1. Selecione **o Bot do Azure**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectazurebot_1.png\" alt-text=\"Selecionar Bot do Azure\":::\n\n1. Selecionar **Criar**.\n\n    :::image type=\"content\" source=\"./assets/images/bots/azure-bot_1.png\" alt-text=\"Bot do Azure.\":::\n\n   A **janela Criar um Bot do Azure** é exibida.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/azurebotpage.png\" alt-text=\"Captura de tela mostrando a página de bot do Azure.\":::\n\n1. Insira os detalhes a seguir para criar o bot do Azure.\n\n    1. Insira o nome do identificador do bot necessário no identificador do **Bot** e ele é um identificador exclusivo para o bot.\n\n    1. Selecione sua **assinatura e** **grupo de recursos** na lista suspensa.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/Azurebotcreate.png\" alt-text=\"Captura de tela mostrando os detalhes ao criar o recurso do bot do Azure.\":::\n  \n       Você também pode criar um novo grupo de recursos seguindo as seguintes etapas:\n\n          1. Para criar um novo grupo de recursos, selecione **Criar >** insira o nome do recurso > selecione **OK**.\n\n               :::image type=\"content\" source=\"~/assets/images/bots/newresourcecreation.png\" alt-text=\"Captura de tela mostrando a Seleção do novo grupo de recursos.\":::\n\n          1. Selecione o local necessário na lista **suspensa Novo local do** grupo de recursos.\n\n               :::image type=\"content\" source=\"~/assets/images/bots/newresource.png\" alt-text=\"Captura de tela mostrando o novo local do grupo de recursos.\":::\n\n    1. Selecione **o tipo de aplicativo** como **multilocatário**.\n\n    1. Na seção **ID do Aplicativo da Microsoft** , por padrão **, a opção Criar nova ID de Aplicativo da Microsoft** está selecionada.\n\n       Você também pode selecionar **Usar o registro de** aplicativo existente e inserir a **ID** do aplicativo, a **ID** do locatário do aplicativo e a **ID do recurso MSI existentes**.\n\n        :::image type=\"content\" source=\"~/assets/images/bots/Review-Create.png\" alt-text=\"Captura de tela mostrando a seleção da opção multilocatário. \":::\n\n       > [!NOTE]\n       > Não é possível criar mais de um bot com a mesma **ID do Aplicativo da Microsoft**.\n\n    1. Selecione **Rever + criar**.\n\n1. Depois que a validação for aprovada, selecione **Criar**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/validationpass.png\" alt-text=\"Captura de tela mostrando a aprovação de validação.\":::\n\n   Leva alguns instantes para que o serviço de bot seja provisionado e a página a seguir seja exibida.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/provisionpage_1.png\" alt-text=\"Página Provisionar\":::\n\n1. Selecione **Vá para o recurso**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/gotoresource_1.png\" alt-text=\"Recurso\":::\n\n   Seu bot do Azure é criado. Você pode ver os **detalhes do grupo de recursos** **e da ID da assinatura** no bot do Azure.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/Azurebotresource_1.png\" alt-text=\"Recurso de bot do Azure criado\":::\n\n**Para criar o segredo do cliente**\n\n Execute as seguintes etapas para criar o segredo do cliente:\n\n1. No painel esquerdo, selecione **Configuração**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectconfigure_1.png\" alt-text=\"Selecionar Configurar\":::\n\n   > [!Important]\n   > Salve a **ID do Aplicativo da Microsoft** ou **a ID do Cliente** para referência futura.\n\n1. Ao lado da **ID do Aplicativo da Microsoft**, selecione **Gerenciar**.\n\n   :::image type=\"content\" source=\"~/assets/images/manage-bot-label_1.png\" alt-text=\"gerenciar bot\":::\n\n1. Na seção **Segredos do cliente** , selecione **Novo segredo do cliente**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/newclientsecret.png\" alt-text=\"Captura de tela mostrando a seleção do novo segredo do cliente.\":::\n\n   A **janela Adicionar um segredo do** cliente é exibida.\n\n1. Insira **Descrição**.\n\n1. Selecione **Adicionar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/addclientsecret.png\" alt-text=\"Captura de tela mostrando a adição de segredo do cliente ao aplicativo.\":::\n\n1. Na coluna **Valor** , selecione copiar para o ícone da área de transferência para copiar os detalhes do valor. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/valueclientsecret.png\" alt-text=\"Captura de tela mostrando o valor do segredo do cliente copiado para a área de transferência.\":::\n\n   > [!Important]\n   > Salve o **valor de segredos do** cliente ou a senha do aplicativo para referência futura.\n   \n**Adicionar bot ao canal do Teams**\n\n1. Selecione **Início**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selecthome_1.png\" alt-text=\"Home page\":::\n\n1. Selecione seu bot de **recursos recentes**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-recent-resources_1.png\" alt-text=\"Selecionar recursos recentes\":::\n\n1. Selecione **Canais** no painel esquerdo e selecione **Teams** <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectchannel_1.png\" alt-text=\"Selecionar recentes\":::\n\n1. Selecionar **o Microsoft Teams** <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-microsoft-teams_1.png\" alt-text=\"Selecionar o Microsoft Teams\":::\n\n1. Marque a caixa de seleção para aceitar os **Termos de Serviço**.\n\n1. Selecione **Concordar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Terms-of-service_1.png\" alt-text=\"Termos\":::\n\n1. Selecione **Aplicar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/apply.png\" alt-text=\"Captura de tela mostrando a opção apply\":::\n\n**Para criar um túnel para o servidor Web local**\n\nUse o ngrok para criar um túnel para os pontos de extremidade HTTPS disponíveis publicamente do servidor Web em execução localmente. Execute o seguinte comando no ngrok:\n\n   ```bash\n   ngrok http --host-header=localhost 3978\n   ```\n   > [!TIP]\n   > Se você encontrar **ERR_NGROK_4018**, siga as etapas, conforme exibido no prompt de comando para se inscrever e autenticar o ngrok. Em seguida, execute o `ngrok http --host-header=localhost 3978` comando.\n\n**Para adicionar o ponto de extremidade de mensagens**\n\n1. No ngrok, copie a URL HTTPS.\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/ngrok-url.png\" alt-text=\"URL HTTPS do ngrok\":::\n\n    > [!NOTE]\n    > A URL HTTPS em seu ngrok é seu nome de domínio totalmente qualificado.\n    > É `WebAppDomain` um nome de domínio totalmente qualificado que não inclui `https://` nele.\n\n1. Voltar à portal do Azure.\n\n1. Em **Configurações** do bot do Azure que você criou, selecione **Configuração**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-configuration_1.png\" alt-text=\"Selecionar Configuração\":::\n\n1. No **ponto de extremidade de Mensagens**, use a URL HTTPS disponível no ngrok e, no final da URL, adicione **/api/messages**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/messagingURL_1.png\" alt-text=\"Ponto de extremidade de mensagens\":::\n\n1. Selecione **Aplicar**.\n\n    Você configurou com êxito um bot no Azure Serviço de Bot.\n"
- title: Configurar o SSO para o bot
  durationInMinutes: 5
  content: "**Para adicionar o URI de redirecionamento ao recurso de bot do Azure**\n\n1. Selecione **Página Inicial** > **do Azure Active Directory**.\n\n1. No painel esquerdo, selecione **Registros de aplicativo**.\n\n1. Selecione seu bot.\n\n1. No painel esquerdo, selecione Autenticação **para** definir um URI de redirecionamento.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/select-authentication_1.png\" alt-text=\"Selecionar Autenticação\":::\n\n1. Em **Configurações de plataforma**, selecione **Adicionar uma plataforma** para escolher a plataforma na qual você deseja hospedar o aplicativo de bot. \n\n1. Para este tutorial, selecione **Web**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-web_1.png\" alt-text=\"Captura de tela mostrando a seleção da Web.\":::\n    \n1. Insira **URIs de Redirecionamento** como `https://token.botframework.com/.auth/web/redirect` e esse URI no qual Azure AD enviará resposta para autenticação do usuário.\n\n1. **Habilite a concessão implícita e os fluxos** híbridos selecionando as seguintes caixas de seleção:\n\n    * **Tokens de ID**\n    * **Tokens de acesso**\n\n1. Selecione **Configurar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-implict-grant_1.png\" alt-text=\"Captura de tela mostrando a seleção de configurar.\":::\n\n    O URI de redirecionamento é adicionado ao recurso de bot do Azure.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/redirectURIadded.png\" alt-text=\"Captura de tela mostrando o URI de redirecionamento adicionado ao recurso de bot.\":::\n\n**Para expor o ponto de extremidade da API**\n\n1. No painel esquerdo, selecione **Expor uma API**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/expose-an-api_1.png\" alt-text=\"Expor uma API\":::\n\n1. Selecione **Definir**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/appidURI.png\" alt-text=\"Captura de tela mostrando a opção set.\":::\n\n1. Use o URI da ID do aplicativo **mostrado e acrescente api://botid-** no início do URI.\n\n1. Selecione **Salvar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/exposeAPI_1.png\" alt-text=\"Captura de tela mostrando a opção Salvar.\":::\n\n   > [!Important]\n   > Salve o **URI da ID do Aplicativo** para referência futura.\n\n1. Selecione **Adicionar um escopo**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Addascope.png\" alt-text=\"Captura de tela mostrando a adição de um escopo.\":::\n\n   A **janela Adicionar um escopo** é exibida.\n\n1. Insira os detalhes para configurar o escopo.    \n\n      1. Insira `access_as_user` como o **Nome do Escopo**.\n\n         > [!NOTE]\n         > O **nome do escopo** deve corresponder ao URI **da ID do** Aplicativo `/access_as_user` com acrescentado no final.\n\n      1. Definir **Quem pode consentir?** para `Admins and users`.\n\n      1. Para configurar os prompts de consentimento do administrador e do usuário com os valores apropriados para `access_as_user` o escopo, forneça as seguintes informações nos campos:</br>\n\n          * Insira `Teams can access the user’s profile` como Administração **de exibição de consentimento**.\n\n          * Insira `Allows Teams to call the app’s web APIs as the current user` como Administração **de consentimento**.\n\n          * Insira como `Teams can access the user profile and make requests on the user’s behalf` nome **de exibição de consentimento do usuário**.\n\n          * Insira como `Enable Teams to call this app’s APIs with the same rights as you have` **descrição de consentimento do usuário**.\n\n      1. Verifique se o **Estado** está definido como **Habilitado**.\n\n      1. Selecione **Adicionar escopo** para salvar.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/addscope.png\" alt-text=\"Captura de tela mostrando a configuração do escopo.\":::\n\n   O URI da ID do aplicativo é criado com o **nome do escopo**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/ExposeAPI_2.png\" alt-text=\"Captura de tela mostrando a API exposta e o escopo adicionado.\":::\n\n1. Na seção **Aplicativos cliente autorizados,** identifique os aplicativos que você deseja autorizar para o aplicativo Web do seu aplicativo.\n\n1. Selecione **Adicionar um aplicativo cliente**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/addaclientapplication.png\" alt-text=\"Captura de tela mostrando a adição de um aplicativo cliente.\":::\n\n   A **janela Adicionar um aplicativo cliente** é exibida.\n\n1. Insira a ID do Cliente para a área de trabalho e o aplicativo Web separadamente que você deseja autorizar. É a ID do aplicativo cliente que você deseja autorizar.\n   \n   |**ID do cliente**|**Para autorizar**|\n   |--------|-------------|\n   | `1fec8e78-bce4-4aaf-ab1b-5451cc387264` | Aplicativo móvel ou da área de trabalho do Teams |\n   | `5e3ce6c0-2b1f-4285-8d4b-75ee78787346` | Aplicativo Web do Teams. |\n\n1. Selecione **escopos autorizados** para determinar qual tipo de token será retornado pelo serviço.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/add-desktop-app.png\" alt-text=\"Captura de tela mostrando a seleção de escopos autorizados.\":::\n   \n1. Selecione **Adicionar aplicativo**.\n\n    A imagem a seguir exibe a ID do Cliente:\n\n      :::image type=\"content\" source=\"~/assets/images/bots/clientapps.png\" alt-text=\"Captura de tela mostrando a adição da ID do cliente.\":::\n\n**Configurar permissões do Graph**\n\n1. No painel esquerdo, selecione Permissões **de API**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/select-api-permissions_1.png\" alt-text=\"Selecionar permissões de API\":::\n\n   > [!NOTE]\n   > Os usuários precisam consentir com as permissões de API somente se o aplicativo de bot estiver registrado em um locatário diferente.\n\n1. Selecione **Adicionar uma permissão**.\n\n   A página solicitar permissão de API é exibida:\n\n1. Selecione **Microsoft Graph**.\n    \n    :::image type=\"content\" source=\"~/assets/images/bots/select-microsoft-graph_1.png\" alt-text=\"Captura de tela mostrando a seleção do Microsoft Graph.\":::\n\n1. Selecione **Permissões delegadas**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-graph-permissions.png\" alt-text=\"Captura de tela mostrando a seleção de Permissões delegadas.\":::\n\n1. Selecione **a permissão User.Read** na **lista suspensa** Usuário.\n\n1. Selecione **Adicionar permissões**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/userread.png\" alt-text=\"Captura de tela mostrando a seleção de Leitura do Usuário.\":::\n\n**Para atualizar o manifesto**\n\n1. No painel esquerdo, selecione **Manifesto**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/select-manifest_1.png\" alt-text=\"Selecione Manifesto\":::\n\n1. Verifique se o item de configuração está definido como **\"accessTokenAcceptedVersion\": 2**. Caso contrário, altere seu valor para **2** e selecione **Salvar**.\n\n   > [!NOTE]\n   > Se você já estiver testando seu bot no Teams, deverá sair deste aplicativo e do Teams. Em seguida, entre novamente para ver essa alteração.</br>\n    \n      :::image type=\"content\" source=\"~/assets/images/bots/update-manifest.png\" alt-text=\"Captura de tela mostrando a atualização do manifesto.\":::\n\n**Para configurar a conexão de serviço de Bot**\n\n1. Na **página Configuração**, selecione **Adicionar Configurações de Conexão OAuth**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-configuration_2.png\" alt-text=\"Selecionar configuration1\":::\n\nA **janela Nova Configuração de** Conexão é exibida.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/botserviceconnection.png\" alt-text=\"Screenshot showing the bot Service connection.\":::\n\n1. Na **página Nova Configuração de** Conexão, insira os seguintes detalhes:\n\n    | Campo | Valor ou descrição |\n    | ----- | ----- |\n    | Nome | Insira o nome da nova configuração de conexão. Você pode usar o nome nas configurações do código do serviço de bot. |\n    | Service Provider | Selecione **O Azure Active Directory V2**. |\n    | ID do cliente | Salvo anteriormente como sua **ID de Aplicativo da Microsoft**. |\n    | Segredo do cliente | Salvo anteriormente **como Valor** da ID do segredo do cliente. |\n    | URL do Exchange de Tokens | Use a **URL da ID do Aplicativo** obtida anteriormente ao expor o ponto de extremidade da API. |\n    | ID do locatário | Insira **comum**. |\n    | Scopes | Insira **User.Read e** também adicione todos os **Escopos necessários** ao especificar permissões para APIs downstream. |\n\n1. Selecione **Salvar** > **Aplicar**.\n\n   Agora você configurou o SSO para seu bot.\n"
- title: Configurar e executar o exemplo de bot
  durationInMinutes: 1
  content: "1. Abra **o Visual Studio**.\n\n1. Selecione **Clonar um repositório**.\n\n1. No local **do repositório**, insira `https://github.com/OfficeDev/Microsoft-Teams-Samples.git`. Certifique-se de observar **o caminho** em que o repositório é clonado.\n\n1. Vá para **Arquivo** > **Aberto projeto** > **/solução**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/project-solution_1.png\" alt-text=\"Captura de tela mostrando a navegação para o projeto/solução.\":::\n\n1. Selecione **o arquivo BotSSOCSharp.csproj** **csharp_dotnetcore** pasta.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/filepath.png\" alt-text=\"Captura de tela mostrando o caminho da pasta.\":::\n\n1. Abra o **arquivo appsettings.json** .\n\n1. Atualize **a configuração de appsettings.json** para que o bot use e `MicrosoftAppId` `MicrosoftAppPassword`. Use o nome da conexão OAuth como o **Nome da Conexão**.\n\n    > [!NOTE]\n    > Você pode obter a partir `MicrosoftAppId` da página configuração do bot. O `MicrosoftAppPassword` valor da ID de segredo do cliente que você salvou anteriormente no Azure.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/appsettingsjson.png\" alt-text=\"Captura de tela mostrando a opção appsettings json.\":::\n\n1. Selecione **F5**  para executar o projeto.\n\n1. Selecione **Sim** se a caixa de diálogo a seguir for exibida:\n\n    :::image type=\"content\" source=\"~/assets/images/bots/certificate.png\" alt-text=\"Captura de tela mostrando a opção Selecionar Sim quando a caixa de diálogo for exibida.\":::\n\n   Uma página da Web é aberta com uma mensagem **que o Bot está pronto**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/yourbot.png\" alt-text=\"Captura de tela mostrando a página da Web dizendo que o bot está pronto.\":::\n    \n    <br>\n\n    <details>\n\n    <summary><b>Solução de Problemas</b></summary>\n\n    Se você receber o **erro Não é possível localizar** o pacote, siga estas etapas:\n\n    1.  Vá para **Configurações do Gerenciador** >  de **Pacotes do Gerenciador de Pacotes** >  nuGet **de ferramentas**.\n    1.  Na janela **Opções** exibida, selecione Fontes de **Pacote do Gerenciador de Pacotes** >  nuGet **.**\n    1.  Selecione **Adicionar**.\n    1.  Em **Nome**, insira `nuget.org` e em **Origem**, insira `https://api.nuget.org/v3/index.json`.\n    1.  Selecione **Atualizar** e **OK**.\n    1.  Recompile seu projeto.\n    <br>\n\n    </details>\n"
- title: Configurar e executar o aplicativo Teams
  durationInMinutes: 2
  content: "1. No Visual Studio, abra a **pasta appPackage** .\n\n1. Abra o **arquivo manifest.json** .\n\n1. Substitua todas as ocorrências de **{TODO: MicrosoftAppId}** pela **ID do aplicativo Microsoft do bot**.\n\n1. No repositório clonado, acesse **bot-conversation-sso-quickstart > csharp_dotnetcore > pasta appPackage** .\n\n1. Crie um .zip com os seguintes arquivos que estão presentes na pasta **Manifesto** : \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n    :::image type=\"content\" source=\"~/assets/images/bots/manifest.png\" alt-text=\"Captura de tela mostrando como compactar uma pasta de manifesto\":::\n\n1. Vá para o cliente do Teams.\n1. Selecione **Repositório**.\n1. Selecione **Gerenciar seus aplicativos**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/manage-your-app.png\" alt-text=\"Captura de tela mostrando a seleção de gerenciar seu aplicativo.\":::\n\n1. Selecione **Fazer o upload de um aplicativo personalizado**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/upload-custom-app.png\" alt-text=\"Captura de tela mostrando o aplicativo personalizado de carregamento.\":::\n\n1. Selecione **Abrir** para carregar .zip arquivo que você criou na pasta **Manifesto** .\n\n    :::image type=\"content\" source=\"~/assets/images/bots/open-app.png\" alt-text=\"Abrir aplicativo\":::\n\n1. Selecione **Adicionar** para adicionar o bot de conversa ao chat.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/add-conversation-bot.png\" alt-text=\"Captura de tela mostrando a opção adicionar bot de conversa.\":::\n\n    Você pode interagir com o bot enviando uma mensagem. O bot troca um token de SSO e chama o API do Graph em seu nome. Ele mantém você conectado, a menos que você envie uma mensagem **para sair**.\n\n1. Envie uma mensagem para o bot. O bot de conversa solicita consentimento pela primeira vez.\n\n1. Selecione **Continuar** para conceder permissões ao cliente do Teams para acessar o bot.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/sbsdesktop-mobile-consent-request1.png\" alt-text=\"Captura de tela mostrando a seleção de conceder permissões ao bot\":::\n    \n    > [!NOTE]\n    > Agora você configurou o SSO com seu aplicativo de bot e é a única vez que você precisará dar consentimento.\n\n1. Para dispositivo móvel, **selecione Aceitar** **permissões solicitadas**.\n\n    > [!NOTE]\n    > Agora você configurou o SSO com seu aplicativo de bot no celular, e esse é o único momento em que você precisará dar consentimento.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/sbsdesktop-mobile-consent-request.png\" alt-text=\"Captura de tela mostrando o celular conectado ao bot.\":::\n"
- title: Desafio completo
  durationInMinutes: 1
  content: >
    Você conseguiu algo assim?

     :::image type="content" source="~/assets/images/bots/sbs-desktop-mobile.png" alt-text="Captura de tela mostrando a saída final.":::
- content: Você concluiu o tutorial para começar a criar um bot com autenticação de SSO.
