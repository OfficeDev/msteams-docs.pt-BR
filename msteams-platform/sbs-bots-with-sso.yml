### YamlMime:Tutorial
title: Criar um bot com autenticação de SSO
metadata:
  title: Criar um bot com autenticação de SSO
  description: Neste tutorial, você aprenderá a criar um bot com autenticação de SSO.
  audience: Developer
  level: Beginner
  ms.date: 08/24/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/authentication/auth-aad-sso-bots.md
  nextTutorialTitle: Leia mais sobre a autenticação de bot
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: 2b9e4cb84dd9afddf9825b34f41b5c0c79a04511
  ms.sourcegitcommit: c7fbb789b9654e9b8238700460b7ae5b2a58f216
  ms.translationtype: MT
  ms.contentlocale: pt-BR
  ms.lasthandoff: 06/29/2022
  ms.locfileid: "66484453"
items:
- durationInMinutes: 1
  content: >
    Os bots do Teams são bots de conversa que executam tarefas automatizadas repetitivas realizadas pelos usuários, como o atendimento ao cliente. O usuário precisa entrar várias vezes sem autenticação de SSO (logon único). Com os métodos de autenticação de SSO, os usuários não precisam entrar no bot várias vezes.


    Um bot se comporta de maneira diferente, dependendo da conversa em que ele está envolvido:


    * Os bots em conversas de chat em grupo e canal exigem que os usuários @mention o bot.

    * Bots em uma conversa privada não exigem uma @menção. Todas as mensagens enviadas pelo usuário são roteadas para o bot.


    Este guia passo a passo ajuda você a criar um bot com autenticação de SSO. Você verá a seguinte saída:

     :::image type="content" source="~/assets/images/bots/sbs-desktop-mobile.png" alt-text="Celular conectado ao bot" border="true":::
- title: Pré-requisitos
  durationInMinutes: 1
  content: "Instale as seguintes ferramentas e configure seu ambiente de desenvolvimento:  \n\n* [Versão mais recente do ngrok](https://ngrok.com/download) ou qualquer solução de túnel equivalente\n\n  > [!NOTE]\n  > Depois de baixar o ngrok, inscreva-se e instale [o authtoken](https://ngrok.com/download).\n\n* [Versão mais recente do Visual Studio](https://visualstudio.microsoft.com/downloads/)\n\nVerifique se você tem as seguintes contas e configure seu ambiente de desenvolvimento: \n\n* [Conta da Microsoft](https://teams.microsoft.com/)\n\n  > [!TIP]\n  > Verifique se a conta do Microsoft Teams não é uma conta de convidado.\n\n* [Conta de desenvolvedor do Microsoft 365](https://developer.microsoft.com/en-us/microsoft-365/dev-program) ou acesso à conta do Teams com as permissões apropriadas para instalar um aplicativo  \n\n## <a name=\"set-up-your-teams-development-tenant\"></a>Configurar seu locatário de desenvolvimento do Teams\n\n   Um **locatário** é como um espaço ou um contêiner em que você conversa, compartilha arquivos e executa reuniões para sua organização no Teams. Você também pode realizar o sideload e testar o aplicativo.\n\n### <a name=\"check-for-sideloading-option\"></a>Verificar a opção de sideload\n\n   Depois de criar o aplicativo, você deve carregar seu aplicativo no Teams sem distribuí-lo. Isso é conhecido como sideload. Entre em sua conta do Microsoft 365 para exibir essa opção.\n\n   > [!NOTE]\n   > O sideload é necessário para visualizar e testar aplicativos no ambiente local do Teams. Habilite o Sideload para visualizar e testar seu aplicativo no Teams localmente.\n\n   Você já tem um locatário e tem acesso de administrador? Vamos verificar se você realmente faz!\n\nPara verificar o sideload de aplicativos no Teams:\n\n1. No cliente do Teams, selecione **Loja**.\n1. Selecione **Gerenciar seus aplicativos**.\n1. Selecione **Publicar um aplicativo**.\n1. Procure a opção para **carregar um aplicativo personalizado**. Se você vir a opção, o sideload de aplicativos estará habilitado.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/upload-custom-app1.png\" alt-text=\"A ilustração mostra a opção de carregar um aplicativo personalizado no Teams.\":::\n\n    > [!NOTE]\n    > Entre em contato com o administrador do Teams se você não tiver a opção de carregar um aplicativo personalizado.\n\n### <a name=\"create-a-free-teams-developer-tenant-optional\"></a>Criar um locatário de desenvolvedor gratuito do Teams (opcional)\n\nSe você não tiver uma conta de desenvolvedor do Teams, poderá obtê-la gratuitamente. Participe do programa de desenvolvedor do Microsoft 365!\n\n1. Acesse o [Programa para desenvolvedores do Microsoft 365](https://developer.microsoft.com/microsoft-365/dev-program).\n1. Selecione **Ingressar Agora** e siga as instruções na tela.\n1. Selecione **Configurar assinatura do E5 na** tela de boas-vindas.\n1. Configurar conta de administrador. Depois de concluir, a tela a seguir será exibida.\n\n      :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/microsoft-365.png\" alt-text=\"Microsoft\" border=\"true\":::\n\n1. Entre no Teams usando a nova conta de administrador. Agora você deve ter a **opção Carregar um aplicativo** personalizado.\n"
- title: Criar e registrar seu bot
  durationInMinutes: 5
  content: "As etapas a seguir ajudam você a criar e registrar seu bot portal do Azure:\n\n1. Crie um recurso de Bot do Azure para registrar o bot no Azure Serviço de Bot.\n1. Crie o segredo do cliente para habilitar a autenticação de SSO do bot.\n1. Adicione o canal do Teams para implantar o bot.\n1. Use o ngrok para criar um túnel para os pontos de extremidade do servidor Web.\n1. Adicione o ponto de extremidade de mensagens ao túnel ngrok que você criou.\n\n**Para criar um recurso de Bot do Azure**\n\n1. Acesse o [Portal do Azure](https://portal.azure.com/). Ele pode solicitar que você entre com suas credenciais de conta da Microsoft.\n\n1. Selecione **Criar um recurso**.\n\n   :::image type=\"content\" source=\"~/assets/images/bots/Createaresource.png\" alt-text=\"Criar Recurso\" border=\"true\":::\n\n1. Na caixa de pesquisa, insira o **bot do Azure**.\n\n   :::image type=\"content\" source=\"~/assets/images/bots/searchazurebot.png\" alt-text=\"Criar Recurso\" border=\"true\":::\n\n1. Selecione **Enter**.\n\n1. Selecione **o Bot do Azure**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectazurebot.png\" alt-text=\"Selecionar Bot do Azure\" border=\"true\":::\n\n1. Selecionar **Criar**.\n\n    :::image type=\"content\" source=\"./assets/images/azure-bot.png\" alt-text=\"Bot do Azure.\":::\n\n   A página Criar um Bot do Azure é exibida.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/azurebotpage.png\" alt-text=\"Página de bot do Azure\" border=\"true\":::\n\n1. Insira os detalhes a seguir para criar o bot do Azure.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Azurebotcreate.png\" alt-text=\"Criar um bot do Azure de recurso\" border=\"true\":::\n\n    1. Insira o nome do identificador do bot necessário no identificador do **Bot** e ele é um identificador exclusivo para o bot.\n\n    1. Selecione sua **Assinatura** na lista suspensa.\n\n    1. Selecione o **grupo de recursos** na lista suspensa que você deseja provisionar para seu aplicativo de bot.\n    \n     \n       Você também pode criar um novo grupo de recursos seguindo as seguintes etapas:\n\n          1. Para criar um novo grupo de recursos, selecione **Criar >** insira o nome do recurso > selecione **OK**.\n\n               :::image type=\"content\" source=\"~/assets/images/bots/newresourcecreation.png\" alt-text=\"Criação de novos recursos\" border=\"true\":::\n\n          1. Se você tiver criado um novo grupo de recursos, selecione o local necessário na lista suspensa Novo local **do** grupo de recursos.\n    \n               :::image type=\"content\" source=\"~/assets/images/bots/newresource.png\" alt-text=\"Novo recurso\" border=\"true\":::\n\n    1. Selecione **o tipo de aplicativo** como **multilocatário**.\n\n        :::image type=\"content\" source=\"~/assets/images/bots/Review-Create.png\" alt-text=\"Examinar Criar\" border=\"true\":::\n\n    1. Na seção **ID do Aplicativo da Microsoft** , por padrão **, a opção Criar nova ID de Aplicativo da Microsoft** está selecionada.\n\n       Você pode selecionar **Usar o registro de** aplicativo existente e inserir a **ID** do aplicativo existente e a senha do aplicativo existente ou selecionar Criar **nova ID de Aplicativo da Microsoft**.\n\n       > [!NOTE]\n       > Não é possível criar mais de um bot com a mesma **ID do Aplicativo da Microsoft**.\n\n    1. Selecione **Rever + criar**.\n\n1. Depois que a validação for aprovada, selecione **Criar**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/validationpass.png\" alt-text=\"Passagem de Validação\" border=\"true\":::\n\n   Leva alguns instantes para que o serviço de bot seja provisionado e a seguinte página seja exibida:\n\n     :::image type=\"content\" source=\"~/assets/images/bots/provisionpage.png\" alt-text=\"Página Provisionar\" border=\"true\":::\n\n1. Selecione **Vá para o recurso**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/gotoresource.png\" alt-text=\"Recurso\" border=\"true\":::\n\n   Seu bot do Azure é criado e você pode ver o grupo **de** recursos e a **ID da assinatura** no bot do Azure.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/Azurebotresource.png\" alt-text=\"Recurso de bot do Azure criado\" border=\"true\":::\n\n**Para criar o segredo do cliente**\n\n Execute as seguintes etapas para criar o segredo do cliente:\n\n1. No painel esquerdo, selecione **Configuração**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectconfigure.png\" alt-text=\"Selecionar Configurar\" border=\"true\":::\n\n   > [!Important]\n   > Salve a **ID do Aplicativo da Microsoft** ou **a ID do Cliente** para referência futura.\n\n1. Ao lado da **ID do Aplicativo da Microsoft**, selecione **Gerenciar**.\n\n   :::image type=\"content\" source=\"~/assets/images/manage-bot-label.png\" alt-text=\"gerenciar bot\":::\n\n1. Na seção **Segredos do cliente** , selecione **Novo segredo do cliente**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/newclientsecret.png\" alt-text=\"Novo Segredo do Cliente\" border=\"true\":::\n\n   A **janela Adicionar um segredo do** cliente é exibida.\n\n1. Insira **Descrição**.\n\n1. Selecione **Adicionar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/addclientsecret.png\" alt-text=\"Adicionar segredo do cliente ao aplicativo\" border=\"true\":::\n\n1. Na coluna **Valor** , selecione **Copiar para área de transferência**. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/valueclientsecret.png\" alt-text=\"Valor do segredo do cliente\" border=\"true\":::\n\n   > [!Important]\n   > Salve o **valor de segredos do** cliente ou a senha do aplicativo para referência futura.\n   \n**Adicionar bot ao canal do Teams**\n\n1. Selecione **Início**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selecthome.png\" alt-text=\"Home page\" border=\"true\":::\n\n1. Selecione seu bot de **recursos recentes**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectrecentresources.png\" alt-text=\"Selecionar recursos recentes\" border=\"true\":::\n\n1. Selecione **Canais** no painel esquerdo.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectchannel.png\" alt-text=\"Selecionar recentes\" border=\"true\":::\n\n1. Selecionar **o Microsoft Teams** <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectmicrosoftteams.png\" alt-text=\"Selecionar o Microsoft Teams\" border=\"true\":::\n\n1. Marque a caixa de seleção para aceitar os **Termos de Serviço**.\n\n1. Selecione **Concordar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Terms-of-service.png\" alt-text=\"Termos\" border=\"true\":::\n\n1. Selecione **Aplicar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/apply.png\" alt-text=\"Apply\" border=\"true\":::\n\n**Para criar um túnel para o servidor Web local**\n\nUse o ngrok para criar um túnel para os pontos de extremidade HTTPS disponíveis publicamente do servidor Web em execução localmente. Execute o seguinte comando no ngrok:\n\n   ```bash\n   ngrok http -host-header=localhost 3978\n   ```\n   > [!TIP]\n   > Se você encontrar **ERR_NGROK_4018**, siga as etapas, conforme exibido no prompt de comando para se inscrever e autenticar o ngrok. Em seguida, execute o `ngrok http -host-header=localhost 3978` comando.\n\n**Para adicionar o ponto de extremidade de mensagens**\n\n1. No ngrok, copie a URL HTTPS.\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/ngrok-url.png\" alt-text=\"URL HTTPS do ngrok\":::\n\n    > [!NOTE]\n    > A URL HTTPS em seu ngrok é seu nome de domínio totalmente qualificado.\n    > É `WebAppDomain` um nome de domínio totalmente qualificado que não inclui `https://` nele.\n\n1. Voltar à portal do Azure.\n\n1. Em **Configurações** do bot do Azure que você criou, selecione **Configuração**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectconfiguration.png\" alt-text=\"Selecionar Configuração\" border=\"true\":::\n\n1. No **ponto de extremidade de Mensagens**, use a URL HTTPS disponível no ngrok e, no final da URL, adicione **/api/messages**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/messagingURL.png\" alt-text=\"Ponto de extremidade de mensagens\" border=\"true\":::\n\n1. Selecione **Aplicar**.\n\n    Você configurou com êxito um bot no Azure Serviço de Bot.\n"
- title: Configurar o SSO para o bot
  durationInMinutes: 5
  content: "**Para adicionar o URI de redirecionamento ao recurso de bot do Azure**\n\n1. Selecione **Gerenciar**.\n\n   :::image type=\"content\" source=\"~/assets/images/manage-bot-label.png\" alt-text=\"gerenciar bot\":::\n\n1. No painel esquerdo, selecione **Autenticação**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/selectauthentication.png\" alt-text=\"Selecionar Autenticação\" border=\"true\":::\n\n1. Em **Configurações de plataforma**, selecione **Adicionar uma plataforma** para escolher a plataforma na qual você deseja hospedar o aplicativo de bot. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/addaplatform.png\" alt-text=\"Adicionar uma plataforma\" border=\"true\":::\n\n1. Para este tutorial, selecione **Web**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectweb.png\" alt-text=\"Selecionar Web\" border=\"true\":::\n    \n1. Insira **URIs de Redirecionamento** como `https://token.botframework.com/.auth/web/redirect` e esse é o URI no qual Azure AD enviará resposta para autenticação do usuário.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/redirectURI1.png\" alt-text=\"URI de redirecionamento 1\" border=\"true\":::\n\n1. **Habilite a concessão implícita e os fluxos** híbridos selecionando as seguintes caixas de seleção:\n\n    * **Tokens de ID**\n    * **Tokens de acesso**\n\n1. Selecione **Configurar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectimplictgrant.png\" alt-text=\"Selecionar Concessão Implict\" border=\"true\":::\n\n    O URI de redirecionamento é adicionado ao recurso de bot do Azure.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/redirectURIadded.png\" alt-text=\"URI de redirecionamento adicionado ao recurso de bot\" border=\"true\":::\n\n**Para expor o ponto de extremidade da API**\n\n1. No painel esquerdo, selecione **Expor uma API**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/exposeanapi.png\" alt-text=\"Expor uma API\" border=\"true\":::\n\n1. Selecione **Definir**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/appidURI.png\" alt-text=\"URI da ID do aplicativo\" border=\"true\":::\n\n1. Use o URI da ID do aplicativo **mostrado e acrescente api://botid-** no início do URI.\n\n1. Selecione **Salvar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/exposeAPI.png\" alt-text=\"Expor uma API\" border=\"true\":::\n\n   > [!Important]\n   > Salve o **URI da ID do Aplicativo** para referência futura.\n\n1. Selecione **Adicionar um escopo**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Addascope.png\" alt-text=\"Expor uma API\" border=\"true\":::\n\n   Adicionar um painel de escopo é exibido.\n\n1. Insira os detalhes para configurar o escopo.    \n\n     :::image type=\"content\" source=\"~/assets/images/bots/addscope.png\" alt-text=\"Adicionar um escopo ao aplicativo\" border=\"true\":::\n\n      1. Insira `access_as_user` como o **Nome do Escopo**.\n\n         > [!NOTE]\n         > O **nome do escopo** deve corresponder ao URI **da ID do** Aplicativo `/access_as_user` com acrescentado no final.\n\n      1. Definir **Quem pode consentir?** para `Admins and users`.\n\n      1. Para configurar os prompts de consentimento do administrador e do usuário com os valores apropriados para `access_as_user` o escopo, forneça as seguintes informações nos campos:</br>\n\n          * Insira `Teams can access the user’s profile` como Administração **de exibição de consentimento**.\n\n          * Insira `Allows Teams to call the app’s web APIs as the current user` como Administração **de consentimento**.\n\n          * Insira como `Teams can access the user profile and make requests on the user’s behalf` nome **de exibição de consentimento do usuário**.\n\n          * Insira como `Enable Teams to call this app’s APIs with the same rights as you have` **descrição de consentimento do usuário**.\n\n      1. Verifique se o **Estado** está definido como **Habilitado**.\n\n1. Selecione **Adicionar escopo** para salvar.\n\n   O URI da ID do aplicativo é criado com o **nome do escopo**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/ExposeAPIandaddscope.png\" alt-text=\"API exposta e escopo adicionado\" border=\"true\":::\n\n1. Na seção **Aplicativos cliente autorizados,** identifique os aplicativos que você deseja autorizar para o aplicativo Web do seu aplicativo.\n\n1. Selecione **Adicionar um aplicativo cliente**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/addaclientapplication.png\" alt-text=\"Adicionar um aplicativo cliente\" border=\"true\":::\n\n   Adicionar um painel de aplicativo cliente é exibido.\n\n1. Insira a ID do Cliente para a área de trabalho e o aplicativo Web separadamente que você deseja autorizar. É a ID do aplicativo cliente que você deseja autorizar.\n   \n   |**ID do cliente**|**Para autorizar**|\n   |--------|-------------|\n   | `1fec8e78-bce4-4aaf-ab1b-5451cc387264` | Aplicativo móvel ou da área de trabalho do Teams |\n   | `5e3ce6c0-2b1f-4285-8d4b-75ee78787346` | Aplicativo Web do Teams |\n\n1. Selecione **escopos autorizados** para determinar qual tipo de token será retornado pelo serviço.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/add-desktop-app.png\" alt-text=\"Adicionar aplicativo cliente ao aplicativo\" border=\"true\":::\n   \n1. Selecione **Adicionar aplicativo**.\n\n    A imagem a seguir exibe a ID do Cliente:\n\n      :::image type=\"content\" source=\"~/assets/images/bots/clientapps.png\" alt-text=\"Aplicativos cliente\" border=\"true\":::\n\n**Configurar permissões do Graph**\n\n1. No painel esquerdo, selecione **Permissões de API**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/selectapipermissions.png\" alt-text=\"Selecionar permissões de API\" border=\"true\":::\n\n   > [!NOTE]\n   > Os usuários precisam consentir com as permissões de API somente se o aplicativo de bot estiver registrado em um locatário diferente.\n\n1. Selecione **Adicionar uma permissão**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/configure-permission.png\" alt-text=\"Permissões de usuário da API\" border=\"true\":::\n\n   A página solicitar permissão de API é exibida:\n\n1. Selecione **Microsoft Graph**.\n    \n    :::image type=\"content\" source=\"~/assets/images/bots/selectmicrosoftgraph.png\" alt-text=\"Selecionar o Microsoft Graph\" border=\"true\":::\n\n1. Selecione **Permissões delegadas**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-graph-permissions.png\" alt-text=\"Selecionar permissões do Graph\" border=\"true\":::\n\n1. Selecione **a permissão User.Read** na **lista suspensa** Usuário.\n\n1. Selecione **Adicionar permissões**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/userread.png\" alt-text=\"Leitura do usuário\" border=\"true\":::\n\n**Para atualizar o manifesto**\n\n1. No painel esquerdo, selecione **Manifesto**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/selectmanifest.png\" alt-text=\"Selecione Manifesto\" border=\"true\":::\n\n1. Verifique se o item de configuração está definido como **\"accessTokenAcceptedVersion\": 2**. Caso contrário, altere seu valor para **2** e selecione **Salvar**.\n\n   > [!NOTE]\n   > Se você já estiver testando seu bot no Teams, deverá sair deste aplicativo e do Teams. Em seguida, entre novamente para ver essa alteração.</br>\n    \n      :::image type=\"content\" source=\"~/assets/images/bots/update-manifest.png\" alt-text=\"Atualizar manifesto\" border=\"true\":::\n\n**Para configurar a conexão de serviço de Bot**\n\n1. Na **página Configuração**, selecione **Adicionar Configurações de Conexão OAuth**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectconfiguration1.png\" alt-text=\"Selecionar configuration1\" border=\"true\":::\n\n    :::image type=\"content\" source=\"~/assets/images/bots/botserviceconnection.png\" alt-text=\"Serviço de Bot conexão\" border=\"true\":::\n\n1. Na **página Nova Configuração de** Conexão, insira os seguintes detalhes:\n\n    | Campo | Valor ou descrição |\n    | ----- | ----- |\n    | Nome | Insira o nome da nova configuração de conexão. Você pode usar o nome nas configurações do código do serviço de bot. |\n    | Service Provider | Selecione **O Azure Active Directory V2**. |\n    | ID do cliente | Salvo anteriormente como sua **ID de Aplicativo da Microsoft**. |\n    | Segredo do cliente | Salvo anteriormente **como Valor** da ID do segredo do cliente. |\n    | URL do Exchange de Tokens | Use a **URL da ID do Aplicativo** obtida anteriormente ao expor o ponto de extremidade da API. |\n    | ID do locatário | Insira **comum**. |\n    | Scopes | Insira **User.Read e** também adicione todos os **Escopos necessários** ao especificar permissões para APIs downstream. |\n\n1. Selecione **Salvar**.\n\n1. Selecione **Aplicar**.\n\n   Agora você configurou o SSO para seu bot.\n"
- title: Configurar e executar o exemplo de bot
  durationInMinutes: 1
  content: "1. Abra **o Visual Studio**.\n\n1. Selecione **Clonar um repositório**.\n\n1. No local **do repositório**, insira `https://github.com/OfficeDev/Microsoft-Teams-Samples.git`. Certifique-se de observar **o caminho** em que o repositório é clonado.\n\n1. Navegue **até o projeto** > /solução **de** > **abertura de arquivo**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/project-solution.png\" alt-text=\"Serviço de Bot conexão\" border=\"true\":::\n\n1. Selecione **o arquivo BotSSOCSharp.csproj** **csharp_dotnetcore** pasta.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/filepath.png\" alt-text=\"Caminho do arquivo\" border=\"true\":::\n\n1. Abra o **arquivo appsettings.json** .\n\n1. Atualize **a configuração de appsettings.json** para que o bot use e `MicrosoftAppId` `MicrosoftAppPassword`. Use o nome da conexão OAuth como o **Nome da Conexão**.\n\n    > [!NOTE]\n    > Você pode obter a partir `MicrosoftAppId` da página configuração do bot. O `MicrosoftAppPassword` valor da ID de segredo do cliente que você salvou anteriormente no Azure.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/appsettingsjson.png\" alt-text=\"Appsettings json\" border=\"true\":::\n\n1. Selecione **F5**  para executar o projeto.\n\n1. Selecione **Sim** se a caixa de diálogo a seguir for exibida:\n\n    :::image type=\"content\" source=\"~/assets/images/bots/certificate.png\" alt-text=\"Ca\" border=\"true\":::\n\n   Uma página da Web é aberta com uma mensagem **que o Bot está pronto**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/yourbot.png\" alt-text=\"Ca\" border=\"true\":::\n    \n    <br>\n\n    <details>\n\n    <summary><b>Solução de Problemas</b></summary>\n\n    Se você receber o **erro Não é possível localizar** o pacote, siga estas etapas:\n\n    1.  Vá para **Configurações do Gerenciador** >  de **Pacotes do Gerenciador de Pacotes** >  nuGet **de ferramentas**.\n    1.  Na janela **Opções** exibida, selecione Fontes de **Pacote do Gerenciador de Pacotes** >  nuGet **.**\n    1.  Selecione **Adicionar**.\n    1.  Em **Nome**, insira `nuget.org` e em **Origem**, insira `https://api.nuget.org/v3/index.json`.\n    1.  Selecione **Atualizar** e **OK**.\n    1.  Recompile seu projeto.\n    <br>\n\n    </details>\n"
- title: Configurar e executar o aplicativo Teams
  durationInMinutes: 2
  content: "1. No Visual Studio, abra a **pasta appPackage** .\n\n1. Abra o **arquivo manifest.json** .\n\n1. Substitua todas as ocorrências de **{TODO: MicrosoftAppId}** pela **ID do aplicativo Microsoft do bot**.\n\n1. No repositório clonado, navegue até **bot-conversation-sso-quickstart > csharp_dotnetcore > pasta appPackage** .\n\n1. Crie um .zip com os seguintes arquivos que estão presentes na pasta **Manifesto** : \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n    :::image type=\"content\" source=\"~/assets/images/bots/manifest.png\" alt-text=\"Manifesto\" border=\"true\":::\n\n1. Vá para o cliente do Teams.\n1. Selecione **Repositório**.\n1. Selecione **Gerenciar seus aplicativos**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/manage-your-app.png\" alt-text=\"Gerenciar seu aplicativo\" border=\"true\":::\n\n1. Selecione **Fazer o upload de um aplicativo personalizado**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/upload-custom-app.png\" alt-text=\"Carregar aplicativo personalizado\" border=\"true\":::\n\n1. Selecione **Abrir** para carregar .zip arquivo que você criou na pasta **Manifesto** .\n\n    :::image type=\"content\" source=\"~/assets/images/bots/open-app.png\" alt-text=\"Abrir aplicativo\" border=\"true\":::\n\n1. Selecione **Adicionar** para adicionar o bot de conversa ao chat.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/add-conversation-bot.png\" alt-text=\"Adicionar bot de conversa\" border=\"true\":::\n\n    Você pode interagir com o bot enviando uma mensagem. O bot troca um token de SSO e chama o API do Graph em seu nome. Ele mantém você conectado, a menos que você envie uma mensagem **para sair**.\n\n1. Envie uma mensagem para o bot. O bot de conversa solicita consentimento pela primeira vez.\n\n1. Selecione **Continuar** para conceder permissões ao cliente do Teams para acessar o bot.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/sbsdesktop-mobile-consent-request1.png\" alt-text=\"Permissões para bot\" border=\"true\":::\n    \n    > [!NOTE]\n    > Agora você configurou o SSO com seu aplicativo de bot e é a única vez que você precisará dar consentimento.\n\n1. Para dispositivo móvel, **selecione Aceitar** **permissões solicitadas**.\n\n    > [!NOTE]\n    > Agora você configurou o SSO com seu aplicativo de bot no celular e é a única vez que você terá que dar consentimento.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/sbsdesktop-mobile-consent-request.png\" alt-text=\"Celular conectado ao bot\" border=\"true\":::\n"
- title: Desafio completo
  durationInMinutes: 1
  content: >
    Você conseguiu algo assim?

     :::image type="content" source="~/assets/images/bots/sbs-desktop-mobile.png" alt-text="Celular conectado ao bot" border="true":::
- content: Você concluiu o tutorial para começar a criar um bot com autenticação de SSO.
