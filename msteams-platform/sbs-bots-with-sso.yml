### YamlMime:Tutorial
title: Criar um bot com autenticação SSO
metadata:
  title: Criar um bot com autenticação SSO
  description: Neste tutorial, você aprenderá a criar um bot com autenticação SSO.
  audience: Developer
  level: Beginner
  ms.date: 08/24/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: bots/how-to/authentication/auth-aad-sso-bots.md
  nextTutorialTitle: Leia mais sobre autenticação de bot
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: fcfff8a5fc1f38c4afdb7b6b64e752dc2234512f
  ms.sourcegitcommit: 6926cf5eee55d5047c11ca13afc7f6f23e270396
  ms.translationtype: MT
  ms.contentlocale: pt-BR
  ms.lasthandoff: 10/27/2022
  ms.locfileid: "68740637"
items:
- durationInMinutes: 1
  content: >
    Os bots do Teams são bots de conversa que executam tarefas automatizadas repetitivas feitas pelos usuários, como o serviço ao cliente. O usuário precisa entrar várias vezes sem autenticação SSO (logon único). Com métodos de autenticação SSO, os usuários não precisam entrar no bot várias vezes.


    Um bot se comporta de forma diferente dependendo da conversa em que está envolvido:


    * Bots em conversas de chat de canal e de grupo exigem que os usuários @mention o bot.

    * Bots em uma conversa privada não exigem uma @menção. Todas as mensagens enviadas pelas rotas do usuário para o bot.


    Este guia passo a passo ajuda você a criar um bot com autenticação SSO. Você verá a seguinte saída:

     :::image type="content" source="~/assets/images/bots/sbs-desktop-mobile.png" alt-text="Dispositivo móvel conectado ao bot":::
- title: Pré-requisitos
  durationInMinutes: 1
  content: "Certifique-se de instalar as seguintes ferramentas e configurar seu ambiente de desenvolvimento:  \n\n | &nbsp; | Instalar | Para usar... |\n | --- | --- | --- |\n | **Required** | &nbsp; | &nbsp; |\n | &nbsp; | [Microsoft Teams com uma conta (não uma conta de convidado)](https://www.microsoft.com/microsoft-teams/download-app) |  Microsoft Teams para colaborar com todos com quem você trabalha por meio de aplicativos para chat, reuniões, chamadas e tudo em um só lugar. |\n | &nbsp; | [Visual Studio 2022 versão 17.3](https://visualstudio.microsoft.com)<br> Instale uma das duas cargas de trabalho a seguir:<br> • ASP.NET e desenvolvimento web <br> • Desenvolvimento entre plataformas do .NET Core | Você pode instalar a versão corporativa no Visual Studio 2022 e instalar as cargas de trabalho. |\n | &nbsp; | [Conta de desenvolvedor do Microsoft 365](/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant) | Acesso à conta do Teams com as permissões apropriadas para instalar um aplicativo. |\n | &nbsp; | [ngrok](https://ngrok.com/download) | Os recursos do aplicativo Teams (bots de conversa, extensões de mensagem e webhooks de entrada) exigem conexões de entrada. Um túnel conecta seu sistema de desenvolvimento ao Teams. Não é necessário para aplicativos que incluem apenas guias. Esse pacote é instalado no diretório do projeto (usando npm `devDependencies`). |\n\n  > [!NOTE]\n  > Depois de baixar o ngrok, inscreva-se e instale [authtoken](https://ngrok.com/download).\n\n## <a name=\"set-up-your-teams-development-tenant\"></a>Configurar seu locatário de desenvolvimento do Teams\n\nUm **locatário** é como um espaço ou um contêiner em que você conversa, compartilha arquivos e executa reuniões para sua organização no Teams. Você também pode sideload e testar o aplicativo.\n\n### <a name=\"check-for-sideloading-option\"></a>Verificar a opção sideload\n\nDepois de criar o aplicativo, você deve carregar seu aplicativo no Teams sem distribuí-lo. Esse carregamento é conhecido como sideload. Entre em sua conta do Microsoft 365 para exibir essa opção.\n\n > [!NOTE]\n > O sideload é necessário para visualizar e testar aplicativos no ambiente local do Teams. Habilite o Sideloading para visualizar e testar seu aplicativo no Teams localmente.\n\nVocê já tem um locatário e tem acesso ao administrador? Vamos verificar se você realmente faz!\n\nPara verificar aplicativos de sideload no Teams:\n\n1. No cliente do Teams, selecione **Aplicativos**.\n1. Selecione **Gerenciar seus aplicativos** > **Carregar um aplicativo**.\n1. Procure a opção para **Carregar um aplicativo personalizado**. Se você vir a opção, os aplicativos de sideload estarão habilitados.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/upload-custom-app1_1.png\" alt-text=\"A ilustração mostra a opção de carregar um aplicativo personalizado no Teams.\":::\n\n    > [!NOTE]\n    > Se você não tiver a opção de carregar um aplicativo personalizado, entre em contato com o administrador do Teams.\n\n### <a name=\"create-a-free-teams-developer-tenant-optional\"></a>Criar um locatário de desenvolvedor gratuito do Teams (opcional)\n\nSe você não tiver uma conta de desenvolvedor do Teams, poderá obtê-la gratuitamente. Ingresse no programa de desenvolvedor do Microsoft 365!\n\n1. Acesse o [Programa para desenvolvedores do Microsoft 365](https://developer.microsoft.com/microsoft-365/dev-program).\n1. Selecione **Ingressar Agora** e siga as instruções na tela.\n1. Selecione **Configurar assinatura E5** na tela de boas-vindas.\n1. Configurar a conta de administrador. Depois de concluir, a tela a seguir será exibida.\n\n      :::image type=\"content\" source=\"~/assets/images/teams-toolkit-v2/prerequisites/microsoft-365.png\" alt-text=\"Microsoft\":::\n\n1. Entre no Teams usando a nova conta de administrador. Agora você deve ter a opção **Carregar um aplicativo personalizado** .\n"
- title: Criar e registrar seu bot
  durationInMinutes: 5
  content: "As seguintes etapas ajudam você a criar e registrar seu bot no portal do Azure:\n\n1. Crie o recurso do Azure Bot para registrar o bot no Azure Serviço de Bot.\n1. Crie o segredo do cliente para habilitar a autenticação SSO do bot.\n1. Adicione o canal do Teams para implantar o bot.\n1. Crie um túnel para os pontos de extremidade do servidor Web usando ngrok.\n1. Adicione o ponto de extremidade de mensagens ao túnel ngrok que você criou.\n\n**Para criar o recurso do Azure Bot**\n\n1. Acesse o [Portal do Azure](https://portal.azure.com/).\n\n1. Selecione **Criar um recurso**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Createaresource_1.png\" alt-text=\"Criar recurso\":::\n\n1. Na caixa de pesquisa, **insira o bot do Azure**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/searchazurebot_1.png\" alt-text=\"Criar recurso\":::\n\n1. Selecione **Enter**.\n\n1. Selecione **Bot do Azure**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectazurebot_1.png\" alt-text=\"Selecionar Bot do Azure\":::\n\n1. Selecionar **Criar**.\n\n    :::image type=\"content\" source=\"./assets/images/bots/azure-bot_1.png\" alt-text=\"Bot do Azure.\":::\n\n   A janela **Criar um Bot do Azure** é exibida.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/azurebotpage.png\" alt-text=\"Captura de tela mostrando a página do bot do Azure.\":::\n\n1. Insira os detalhes a seguir para criar o bot do Azure.\n\n    1. Insira o nome do identificador de bot necessário no **identificador do Bot**.\n\n    1. Selecione sua **Assinatura** e **grupo de recursos** na lista suspensa.\n\n         :::image type=\"content\" source=\"~/assets/images/bots/Azurebotcreate.png\" alt-text=\"Captura de tela mostrando os detalhes ao criar um bot do Azure de recurso.\":::\n  \n    1. Para criar um novo grupo de recursos, selecione **Criar novas** > inserir o nome do recurso > **OK**. Agora, selecione o local necessário na lista suspensa **Local do novo grupo de recursos** .\n    \n         :::image type=\"content\" source=\"~/assets/images/bots/newresource.png\" alt-text=\"Captura de tela mostrando o novo local do grupo de recursos\":::\n    \n    1. Selecione **Tipo de Aplicativo** como **Vários Locatários**. \n\n    1. Na seção **ID do Aplicativo Microsoft** , por padrão, Criar **nova ID do Aplicativo Microsoft** está selecionado.\n\n       Você também pode selecionar **Usar o registro de aplicativo existente** e inserir **a ID do aplicativo** existente, **a ID do locatário** do aplicativo e **a ID do recurso MSI**.\n\n         :::image type=\"content\" source=\"~/assets/images/bots/Review-Create_1.png\" alt-text=\"Captura de tela mostrando a seleção da opção de vários locatários. \":::\n\n       > [!NOTE]\n       > Você não pode criar mais de um bot com a mesma **ID do Aplicativo Microsoft**.\n\n    1. Selecione **Rever + criar**.\n\n1. Depois que a validação for aprovada, selecione **Criar**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/validationpass_1.png\" alt-text=\"Captura de tela mostrando o Passe de validação.\":::\n\n   Levará alguns minutos para o serviço de bot ser provisionado.\n\n1. Selecione **Vá para o recurso**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/gotoresource_1.png\" alt-text=\"Recurso\":::\n\n   Seu bot do Azure é criado. Você pode ver o **grupo de recursos** e os detalhes da **ID da Assinatura** no bot do Azure.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/Azurebotresource_1.png\" alt-text=\"Recurso de bot do Azure criado\":::\n\n**Para criar o segredo do cliente**\n\n Execute as seguintes etapas para criar o segredo do cliente:\n\n1. No painel esquerdo, selecione **Configuração**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectconfigure_1.png\" alt-text=\"Selecione Configurar\":::\n\n   > [!Tip]\n   > Salve a **ID do Aplicativo microsoft** ou **a ID do cliente** para referência futura.\n\n1. Ao lado da **ID do Aplicativo da Microsoft**, **selecione Gerenciar**.\n\n   :::image type=\"content\" source=\"~/assets/images/manage-bot-label_1.png\" alt-text=\"gerenciar bot\":::\n\n1. Na seção **Segredos do cliente** , selecione **Novo segredo do cliente**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/newclientsecret_2.png\" alt-text=\"Captura de tela mostrando a seleção do novo segredo do cliente.\":::\n\n   A janela **Adicionar um segredo do cliente** é exibida.\n\n1. Insira **Descrição**.\n\n1. Selecione **Adicionar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/addclientsecret_1.png\" alt-text=\"Captura de tela mostrando a adição de segredo do cliente ao aplicativo.\":::\n\n1. Na coluna **Valor** , selecione copiar para o ícone de área de transferência para copiar os detalhes do valor. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/valueclientsecret.png\" alt-text=\"Captura de tela mostrando o valor do segredo do cliente copiado para a área de transferência.\":::\n\n   > [!Tip]\n   > Salve o valor **dos segredos do cliente** ou a senha do aplicativo para referência futura.\n   \n**Adicionar bot ao canal do Teams**\n\n1. Selecione **Início**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/selecthome_1.png\" alt-text=\"Home page\":::\n\n1. Selecione seu bot nos **recursos recentes**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-recent-resources_1.png\" alt-text=\"Selecionar recursos recentes\":::\n\n1. Selecione **Canais** no painel esquerdo. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/selectchannel_1.png\" alt-text=\"Selecione recente\":::\n\n1. Selecione **Microsoft Teams** <img src=\"~/assets/images/bots/teamsicon.png\" alt=\"Teams icon\" width=\"20\"/>. \n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-microsoft-teams_1.png\" alt-text=\"Selecione Microsoft Teams\":::\n\n1. Selecione a caixa de seleção para aceitar os **Termos de Serviço**.\n\n1. Selecione **Concordar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Terms-of-service_1.png\" alt-text=\"Termos\":::\n\n1. Selecione **Aplicar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/apply_1.png\" alt-text=\"Captura de tela mostrando a opção aplicar\":::\n\n**Para criar um túnel para o servidor Web local**\n\nUse o ngrok para criar um túnel para os pontos de extremidade HTTPS disponíveis publicamente do servidor Web localmente. Execute o seguinte comando no ngrok:\n\n   ```bash\n   ngrok http --host-header=localhost 3978\n   ```\n   > [!TIP]\n   > Se você encontrar **ERR_NGROK_4018**, siga as etapas, conforme exibido no prompt de comando para se inscrever e autenticar o ngrok. Em seguida, execute o `ngrok http --host-header=localhost 3978` comando.\n\n**Para adicionar ponto de extremidade de mensagens**\n\n1. No ngrok, copie a URL HTTPS.\n\n   :::image type=\"content\" source=\"../msteams-platform/assets/images/ngrok-url1_1.png\" alt-text=\"URL HTTPS do ngrok\":::\n\n    > [!NOTE]\n    > A URL HTTPS em seu ngrok é seu nome de domínio totalmente qualificado.\n    > O `WebAppDomain` é um nome de domínio totalmente qualificado que não inclui `https://` nele.\n\n1. Voltar ao portal do Azure.\n\n1. Em **Configurações** para o bot do Azure que você criou, selecione **Configuração**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-configuration_1.png\" alt-text=\"Selecionar Configuração\":::\n\n1. No **ponto de extremidade de mensagens**, use a URL HTTPS disponível no ngrok e no final da URL adicionar **/api/mensagens**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/messagingURL_2.png\" alt-text=\"Ponto de extremidade de mensagens\":::\n\n1. Selecione **Aplicar**.\n\n    Você configurou com êxito um bot no Azure Serviço de Bot.\n"
- title: Configurar o SSO para o bot
  durationInMinutes: 5
  content: "**Para adicionar o URI de redirecionamento ao recurso de bot do Azure**\n\n1. Selecione **Home** > **Azure Active Directory**.\n\n1. No painel esquerdo, selecione **Registros de aplicativo**.\n\n1. Selecione seu bot.\n\n1. No painel esquerdo, selecione **Autenticação** para definir um URI de redirecionamento.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/select-authentication_1.png\" alt-text=\"Selecionar Autenticação\":::\n\n1. Em **Configurações de plataforma**, selecione **Adicionar uma plataforma** para escolher a plataforma na qual deseja hospedar o aplicativo bot. \n\n1. Para este tutorial, selecione **Web**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-web_1.png\" alt-text=\"Captura de tela mostrando a seleção da Web.\":::\n    \n1. Insira **URIs de redirecionamento** como `https://token.botframework.com/.auth/web/redirect` e esse URI no qual Azure AD enviará resposta para autenticação do usuário.\n\n1. **Habilite a concessão implícita e os fluxos híbridos** selecionando as seguintes caixas de seleção:\n\n    * **Tokens de ID**\n    * **Tokens de acesso**\n\n1. Selecione **Configurar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-implict-grant_1.png\" alt-text=\"Captura de tela mostrando a seleção de configurar.\":::\n\n    O URI de redirecionamento é adicionado ao recurso de bot do Azure.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/redirectURIadded.png\" alt-text=\"Captura de tela mostrando o URI de redirecionamento adicionado ao recurso do bot.\":::\n\n**Para expor o ponto de extremidade da API**\n\n1. No painel esquerdo, selecione **Expor uma API**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/expose-an-api_1.png\" alt-text=\"Expor uma API\":::\n\n1. Selecione **Definir**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/appidURI.png\" alt-text=\"Captura de tela mostrando a opção set.\":::\n\n1. Defina o URI da ID do Aplicativo na forma de `api://botid-{your AppID}`.\n\n1. Selecione **Salvar**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/exposeAPI_1.png\" alt-text=\"Captura de tela mostrando a opção salvar.\":::\n\n   > [!NOTE]\n   > Se você estiver usando um serviço de túnel como ngrok, certifique-se de atualizar o valor sempre que o subdomínio ngrok for alterado.\n   > Por exemplo: `api://f631****.ngrok.io/92c11075-c629-4a1e-ab58-02b4fd4204c2`, onde `f631****.ngrok.io` é o novo nome de subdomínio ngrok.\n\n1. Selecione **Adicionar um escopo**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/Addascope_1.png\" alt-text=\"Captura de tela mostrando a adição de um escopo.\":::\n\n   A janela **Adicionar um escopo** é exibida.\n\n1. Insira os detalhes para configurar o escopo.    \n\n      1. Insira `access_as_user` como o **Nome do Escopo**.\n\n         > [!NOTE]\n         > O **nome escopo** deve corresponder com o URI **da ID do Aplicativo** com `/access_as_user` acrescentado no final.\n\n      1. Definir **Quem pode consentir?** `Admins and users`\n\n      1. Para configurar os prompts de consentimento do administrador e do usuário com valores apropriados para `access_as_user` escopo, forneça as seguintes informações nos campos:</br>\n\n          * Insira `Teams can access the user’s profile` como **Administração nome de exibição de consentimento**.\n\n          * Insira `Allows Teams to call the app’s web APIs as the current user` como **Administração descrição de consentimento**.\n\n          * Insira `Teams can access the user profile and make requests on the user’s behalf` como **Nome de exibição de consentimento do usuário**.\n\n          * Insira `Enable Teams to call this app’s APIs with the same rights as you have` como **descrição do consentimento do usuário**.\n\n      1. Verifique se o **Estado** está definido como **Habilitado**.\n\n      1. Selecione **Adicionar escopo** para salvar.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/addscope.png\" alt-text=\"Captura de tela mostrando o escopo de configuração.\":::\n\n   O URI da ID do Aplicativo é criado com o **nome do escopo**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/ExposeAPI_2.png\" alt-text=\"Captura de tela mostrando a API exposta e o escopo adicionado.\":::\n\n1. Na seção **Aplicativos cliente autorizados,** identifique os aplicativos que você deseja autorizar para o aplicativo Web do seu aplicativo.\n\n1. Selecione **Adicionar um aplicativo cliente**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/addaclientapplication.png\" alt-text=\"Captura de tela mostrando a adição de um aplicativo cliente.\":::\n\n   A janela **Adicionar um aplicativo cliente** é exibida.\n\n1. Insira a ID do cliente para área de trabalho e aplicativo Web separadamente que você deseja autorizar. É a ID do aplicativo cliente que você deseja autorizar.\n   \n   |**ID do cliente**|**Para autorizar**|\n   |--------|-------------|\n   | `1fec8e78-bce4-4aaf-ab1b-5451cc387264` | Área de trabalho ou aplicativo móvel do Teams |\n   | `5e3ce6c0-2b1f-4285-8d4b-75ee78787346` | Aplicativo Web do Teams. |\n\n1. Selecione **Escopos autorizados** para determinar qual tipo de token será retornado pelo serviço.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/add-desktop-app.png\" alt-text=\"Captura de tela mostrando a seleção de escopos autorizados.\":::\n   \n1. Selecione **Adicionar aplicativo**.\n\n    A imagem a seguir exibe a ID do cliente:\n\n      :::image type=\"content\" source=\"~/assets/images/bots/clientapps.png\" alt-text=\"Captura de tela mostrando a adição da ID do cliente.\":::\n\n**Configurar permissões do Graph**\n\n1. No painel esquerdo, selecione **Permissões de API**.\n\n      :::image type=\"content\" source=\"~/assets/images/bots/select-api-permissions_1.png\" alt-text=\"Selecionar permissões de API\":::\n\n   > [!NOTE]\n   > Os usuários precisam consentir com as permissões de API somente se o aplicativo bot estiver registrado em um locatário diferente.\n\n1. Selecione **Adicionar uma permissão**.\n\n   A janela **De permissão da API de Solicitação** é exibida.\n\n1. Selecione **Microsoft Graph**.\n    \n    :::image type=\"content\" source=\"~/assets/images/bots/select-microsoft-graph_2.png\" alt-text=\"Captura de tela mostrando a seleção do Microsoft Graph.\":::\n\n1. Selecione **Permissões delegadas**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-graph-permissions.png\" alt-text=\"Captura de tela mostrando a seleção de Permissões delegadas.\":::\n\n1. Selecione **Permissão User.Read** na lista suspensa **Usuário** .\n\n1. Selecione **Adicionar permissões**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/userread.png\" alt-text=\"Captura de tela mostrando a seleção de Leitura do Usuário.\":::\n\n**Para atualizar manifesto**\n\n1. No painel esquerdo, selecione **Manifesto**.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/select-manifest_1.png\" alt-text=\"Selecione Manifesto\":::\n\n1. Verifique se o item de configuração está definido como **\"accessTokenAcceptedVersion\": 2**. Caso contrário, altere seu valor para **2** e selecione **Salvar**.\n\n   > [!NOTE]\n   > Se você já estiver testando seu bot no Teams, deverá sair deste aplicativo e do Teams. Em seguida, entre novamente para ver essa alteração.</br>\n    \n      :::image type=\"content\" source=\"~/assets/images/bots/update-manifest.png\" alt-text=\"Captura de tela mostrando a atualização do manifesto.\":::\n\n**Para configurar a conexão do serviço bot**\n\n1. Na **página Configuração**, selecione **Adicionar Configurações de Conexão OAuth**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/select-configuration_2.png\" alt-text=\"Selecione configuration1\":::\n\n   A janela **Nova Configuração de Conexão** é exibida.\n\n     \n\n1. Em **Nova Configuração de Conexão**, insira os seguintes detalhes:\n\n    | Campo | Valor ou descrição |\n    | ----- | ----- |\n    | Nome | Insira o nome da nova configuração de conexão. Você pode usar o nome nas configurações do código do serviço de bot. |\n    | Service Provider | Selecione **Azure Active Directory V2**. |\n    | ID do cliente | Salvo anteriormente como sua **ID do Aplicativo Microsoft**. |\n    | Segredo do cliente | Salvo anteriormente como **Valor** da ID de segredo do cliente. |\n    | Token Exchange URL | Use a **URL de ID do Aplicativo** obtida anteriormente ao expor o ponto de extremidade da API. |\n    | ID do locatário | Insira **comum**. |\n    | Scopes | Insira **User.Read** e adicione todos os **Escopos necessários** ao especificar permissões para APIs downstream. |\n\n    :::image type=\"content\" source=\"~/assets/images/bots/botserviceconnection.png\" alt-text=\"Captura de tela mostrando a conexão do serviço de bot.\":::\n\n1. Selecione **Salvar**.\n\n   Agora você configurou o SSO para o bot.\n"
- title: Configurar e executar seu exemplo de bot
  durationInMinutes: 1
  content: "1. Abra **o Visual Studio**.\n\n1. Selecione **Clonar um repositório**.\n\n1. No **local do Repositório**, insira `https://github.com/OfficeDev/Microsoft-Teams-Samples.git`. Verifique se você observa o **Caminho** em que o repositório é clonado.\n\n1. Vá para **Arquivo** > **Abrir** > **Projeto/Solução**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/project-solution_1.png\" alt-text=\"Captura de tela mostrando a navegação para projeto/solução.\":::\n\n1. Selecione **Arquivo BotSSOCSharp.csproj** na pasta **csharp_dotnetcore** .\n\n    :::image type=\"content\" source=\"~/assets/images/bots/filepath_1.png\" alt-text=\"Captura de tela mostrando o caminho da pasta.\":::\n\n1. Abra o arquivo **appsettings.json** .\n\n1. Atualize a configuração **appsettings.json** para que o bot use o `MicrosoftAppId` e `MicrosoftAppPassword`. Use o nome da conexão OAuth como o **Nome da Conexão**.\n\n    > [!NOTE]\n    > Você pode obter a `MicrosoftAppId` na página Configuração do bot. O `MicrosoftAppPassword` é a ID de segredo do valor do cliente que você salvou anteriormente no Azure.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/appsettingsjson.png\" alt-text=\"Sceenshot mostrando a opção json appsettings.\"lightbox=\"~/assets/images/bots/appsettingsjson.png\":::\n\n1. Selecione **F5**  para executar o projeto.\n\n1. Selecione **Sim** se a caixa de diálogo a seguir for exibida:\n\n    :::image type=\"content\" source=\"~/assets/images/bots/certificate.png\" alt-text=\"Captura de tela mostrando para selecionar a opção Sim quando a caixa de diálogo for exibida.\":::\n\n   Uma página da Web é aberta com uma mensagem **bot está pronto**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/yourbot.png\" alt-text=\"Captura de tela mostrando a página da Web dizendo que o bot está pronto.\":::\n    \n    <br>\n\n    <details>\n\n    <summary><b>Solução de Problemas</b></summary>\n\n    Se você receber o erro **De não localizar o pacote** , siga estas etapas:\n\n    1.  Acesse **Ferramentas Configurações** >  do **Gerenciador de Pacotes** >  do **NuGet** Package Manager.\n    1.  Na janela **Opções** exibida, selecione **Fontes de Pacote** do **Gerenciador de Pacotes** >  do NuGet.\n    1.  Selecione **Adicionar**.\n    1.  Em **Nome**, insira `nuget.org` e na **Origem**, insira `https://api.nuget.org/v3/index.json`.\n    1.  Selecione **Atualizar** e **OK**.\n    1.  Recompile seu projeto.\n    <br>\n\n    </details>\n"
- title: Configurar e executar o aplicativo Teams
  durationInMinutes: 2
  content: "1. No Visual Studio, abra **a pasta appPackage** .\n\n1. Abra o arquivo **manifest.json** .\n\n1. Substitua todas as ocorrências de **{TODO: MicrosoftAppId}** pela **ID do aplicativo Microsoft** do bot.\n\n1. No repositório clonado, acesse a pasta **bot-conversation-sso-quickstart > csharp_dotnetcore > appPackage** .\n\n1. Crie um .zip com os seguintes arquivos presentes na pasta **Manifesto** : \n   * manifest.json\n   * icon-outline.png\n   * icon-color.png\n\n    :::image type=\"content\" source=\"~/assets/images/bots/manifest_1.png\" alt-text=\"Captura de tela mostrando como fechar uma pasta de manifesto\":::\n\n1. Vá para o cliente do Teams.\n1. Selecione **Armazenar**.\n1. Selecione **Gerenciar seus aplicativos**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/manage-apps_3.png\" alt-text=\"Captura de tela mostrando a seleção de gerenciar seu aplicativo.\":::\n\n1. Selecione **Fazer o upload de um aplicativo personalizado**.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/upload-custom-app.png\" alt-text=\"Captura de tela mostrando o aplicativo personalizado de upload.\":::\n\n1. Selecione **Abrir** para carregar o arquivo .zip que você criou na pasta **Manifesto** .\n\n    :::image type=\"content\" source=\"~/assets/images/bots/open-app.png\" alt-text=\"Abrir aplicativo\":::\n\n1. Selecione **Adicionar** para adicionar o bot de conversa ao chat.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/add-conversation-bot_1.png\" alt-text=\"Captura de tela mostrando a opção adicionar bot de conversa.\":::\n\n    Você pode interagir com o bot enviando-lhe uma mensagem. O bot troca um token SSO e chama o API do Graph em seu nome. Ele mantém você conectado, a menos que você envie uma mensagem para **sair**.\n\n1. Envie uma mensagem para o bot. O bot de conversa pede consentimento pela primeira vez.\n\n1. Selecione **Continuar** para dar permissões ao cliente do Teams para acessar o bot.\n\n     :::image type=\"content\" source=\"~/assets/images/bots/sbsdesktop-mobile-consent-request1.png\" alt-text=\"Captura de tela mostrando a seleção de dar permissões para bot\":::\n    \n    > [!NOTE]\n    > Agora você configurou o SSO com seu aplicativo bot e é a única vez que você terá que dar consentimento.\n\n1. Para dispositivo móvel, selecione **Aceitar** **permissões solicitadas**.\n\n    > [!NOTE]\n    > Agora você configurou o SSO com seu aplicativo bot no celular, e essa é a única vez que você terá que dar consentimento.\n\n    :::image type=\"content\" source=\"~/assets/images/bots/sbsdesktop-mobile-consent-request.png\" alt-text=\"Captura de tela mostrando o celular conectado ao bot.\":::\n"
- title: Desafio completo
  durationInMinutes: 1
  content: >
    Você veio com algo assim?

     :::image type="content" source="~/assets/images/bots/sbs-desktop-mobile.png" alt-text="Captura de tela mostrando a saída final.":::
- content: Você concluiu o tutorial para começar a criar um bot com autenticação SSO.
